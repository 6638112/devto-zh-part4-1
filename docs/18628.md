# 了解代理、反向代理、负载平衡器等等。

> 原文:[https://dev . to/nikhilponnuru/understanding-proxy-reverse-proxy-VPN-load-balancer-and-more-2p 98](https://dev.to/nikhilponnuru/understanding-proxy-reverse-proxy-vpn-load-balancer-and-more-2p98)

proxy 这个词的意思是代表别人行事。说到网络，有两种代理。正向代理和反向代理。

### [](#forward-proxy-or-just-proxy)转发代理或仅代理:

让我们考虑几个场景:

I)您想在网上冲浪，而您的 IP 地址不会被任何网站看到。

ii)您想要访问地理上被阻止或限制的内容。

iii)您是某个公司或学校的管理员，想要限制用户访问某些恶意网站或某些特定网站。

这种情况的一个解决方案是使用转发代理。转发代理位于用户前方，将流量从转发到互联网。

在上述情况下，转发代理如何提供帮助

I)本身是服务器(网络节点)的转发代理将具有其自己的地址。现在，代理的 IP 地址将对网站或应用程序可见，但对用户的 IP 地址不可见。

ii)使用用户 IP 地址进行地理封锁或基于位置的限制。是的，你的 IP 地址不仅仅是数字。它可以提供你所在位置的大概地址。但是我们的 IP 地址怎么会泄露我们的位置呢？如果你去参加像这样的活动，你会看到你的国家、州和城市。它的信息来源于由 [ipinfo](https://ipinfo.io/) 或 [ip2location](https://www.ip2location.com/) 服务提供的数据库，这些服务提供特定 ip 地址和位置细节之间的映射。但是这个数据库是如何被填充的呢？当你输入你的密码/邮政编码时，这些信息将会链接到你的 ip 地址。所以名单还在继续。

因此，如果一个服务想地理封锁或限制你所有他们需要做的是使用这个数据库提供的地理跟踪服务和黑名单这些 IP 地址。如果在白名单 IP 的范围内，这里的代理可以帮助您超越这一点。

使用 IP 地址进行地理跟踪应该被认为是一个令人担忧的问题吗？答案大多是否定的。它们被用于许多严肃的商业用例。例如，银行可以利用这一点来防止可疑交易，欺诈检测，浏览器可能会使用您的 IP 地址来设置默认搜索引擎等..好的用例很多！但是不能排除它们被滥用的可能性。

iii)您可以在您的转发代理中设置过滤器，以过滤您作为管理员想要访问的特定网站的流量。(听起来像防火墙吗？这是防火墙的对立面)

**转发代理**:(用户< - >转发代理)< - >互联网< - >(应用/服务器)

### [](#reverse-proxy)反向代理:

让我们考虑以下场景:

I)用户经常访问一些资源，如一些静态资产。

ii)您希望在将服务器的响应发送给用户之前对其进行压缩。

与位于用户前面的正向代理不同，反向代理位于服务器的前面。反向代理在到达服务器之前处理进入服务器的流量，并发回响应。

反向代理如何在上述场景中提供帮助:

I)反向代理服务器可以充当高速缓存服务器。一个用户请求首先命中 revers 代理，如果它有必要的数据，它就可以服务，否则就把它转发给它后面的服务器。

ii)您希望压缩响应，但是根据响应的有效负载大小，常规服务器上的压缩逻辑可能很繁重。这个逻辑可以安全地从实际的服务器分离到反向代理。

其他用户:用于 SSL 加密和解密，用于负载均衡(那么反向代理和负载均衡器之间有什么区别？)

示例:Nginx

**反向代理**:用户< - >互联网< - >(反向代理< - >应用/服务器)

### [](#load-balancer)负载均衡器:

来自 Nginx 网站:

> 当一个站点需要多台服务器时，通常会部署负载平衡器，因为单个服务器无法有效处理大量请求。部署多台服务器还消除了单点故障，使网站更加可靠。最常见的情况是，所有服务器都托管相同的内容，负载平衡器的工作是以一种充分利用每个服务器容量的方式分配工作负载，防止任何服务器过载，并尽可能最快地响应客户端。

因此，简单来说，负载平衡器就像一个交通警察，它将流量分流到多个服务器，以便横向扩展流量。

这里可能会出现两个有趣的问题

Q1)反向代理和负载均衡器有什么区别？
A)如上所述，负载平衡器旨在平衡服务器之间的流量，但反向代理将/可以执行缓存、安全、SSL 加密解密等操作。以及负载平衡流量。

Q2)如果一个负载均衡器将流量转移到它后面的许多服务器，那么它如何维持会话？将流量一次传递给服务器 1，下一次传递给服务器 2，会不会弄乱我们在两个 http 请求之间存储的会话数据？这是一个由负载平衡器处理的问题:)。例如 Nginx 通过会话持久性来实现。

负载平衡器的例子:HA 代理、Nginx。

在我的下一篇文章中，我讨论了 Nginx 作为反向代理的有趣用法。