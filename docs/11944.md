# 打开的文件太多了

> 原文：<https://dev.to/robbyronk/there-s-such-a-thing-as-too-many-open-files-ien>

我今天学到了一些关于 Linux 的新东西！当操作系统进程打开太多文件时，我遇到了一个问题。事实证明，这也可以防止在进行网络连接时打开新的套接字。一个进程可以打开多少文件的限制包括套接字，因为它们都是 *[内核句柄](https://unix.stackexchange.com/a/157353)* 。默认限制对我来说有点低，所以我想提高限制，不仅是每个进程，而是整个系统。

要检查每个过程的限制，运行`ulimit -n`。我的情况是 1024。

要更改它，请将这两行添加到`/etc/security/limits.conf` :

```
* soft nofile 4096
* hard nofile 10240 
```

软限制是一个进程可以正常打开的文件数量。硬限制是用户可以配置的最大数量，以防他们临时需要更多资源。第一个参数是限制将应用到的用户，并且可以使用一个`*`来改变所有用户的限制。

要改变整个系统的限值，将`fs.file-max = 1048576`加到`/etc/sysctl.conf`上。

这是一个有趣的跟踪！