# 您的个人 AWS 设置(以及如何不被黑客攻击)

> 原文:[https://dev . to/loujaybee/your-personal-AWS-setup-and-how-to-not-get-hacked-5 hnf](https://dev.to/loujaybee/your-personal-aws-setup-and-how-to-not-get-hacked-5hnf)

2016 年，黑客入侵了我的个人 AWS 设置。几个小时后，我收到了一张 3000 美元的 AWS 账单😱😱😱😱

[![](../Images/ef3bcf8cae91d6ae0d2250531b1145ef.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--Gz9JWcU4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/www.thedevcoach.co.uk/wp-content/uploads/2019/07/Copy-of-Avoid-a-3000-AWS-BILL.png%3Ffit%3D760%252C428%26ssl%3D1)

当你是一名云原生工程师时，我们可以学习的最佳方式之一是直接在云平台上进行实验，比如 AWS。但是，如果您在设置和使用云帐户时不小心，这样做可能会充满困难。一个不正确设置的帐户很容易被黑客攻击，你甚至可能以巨额账单告终！

到本文结束时，你将知道在访问你的 AWS 云帐户之前要采取的所有步骤，这样你就可以试验和了解 AWS。

## [](#why-setting-up-your-cloud-account-is-so-important)为什么设置您的云帐户如此重要

向您展示设置您的云帐户有多重要的最佳方式是告诉您前面提到的 3000 美元 AWS 账单的故事。

那是 2016 年，我被指控在 Github 上有太多的私人存储库。

为了尝试和削减，我决定将我的一些私人存储库切换回公共访问。

但是，匆忙中我忘记了我公开的一个存储库已经暴露了我的 AWS 证书。

我为每月多存了 7 美元而沾沾自喜。但是几天后，我收到了一封奇怪的电子邮件，引起了我的注意…

[![](../Images/ec6907c20b2a65379ef0d9955e98526e.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--UaM4k2oY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/www.thedevcoach.co.uk/wp-content/uploads/2019/07/Screenshot-2019-07-24-at-17.11.21.png%3Fresize%3D760%252C89%26ssl%3D1)

神圣的狗屎！

到目前为止，我每月只支付几英镑的账单。更糟糕的是，巨额账单在几个小时内就累积起来了。所以每过一个小时，我就被收取数百英镑的费用。时间是至关重要的…我登录我的帐户，开始疯狂地关闭资源。一些我从未听说过的资源！

现在你可能在想:我的账户到底是怎么被黑的？

让我解释一下…

有一些自动化的工具正在扫描网络上泄露的凭证。当该工具找到您的凭据时，它会使用这些凭据进行 programattic API 调用，以启动尽可能多的资源。我的 AWS 账户现在是一个极其庞大、非常非法的僵尸网络的一部分。

[![](../Images/d2c921dcfc14a43a4ac2ff96f09a2b61.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--_YXoBLP1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/www.thedevcoach.co.uk/wp-content/uploads/2019/07/Screenshot-2019-07-24-at-17.12.53.png%3Fresize%3D760%252C274%26ssl%3D1)

当时我甚至不知道这种事情是可能的。如果你不小心，你也会有危险。

但是，不要担心，这不是所有的厄运和黑暗！有很多方法可以对付这些类型的黑客，这就是我们今天要讨论的内容。

我将带你经历四个简单的步骤，在你开始使用你的 AWS 账户之前，你应该采取这些步骤。

首先…

## [](#1-dont-use-your-root-credentials)1)不要使用你的根凭证

根凭据是您用来注册 AWS 的用户名和密码。您应该只在紧急情况下使用您的 root 帐户凭据。

我们的 root 帐户可以完全访问 AWS 上的所有资源和所有权限。这就给了黑客完全的权利去制造他们想要的资源。因此，当你拥有一个 AWS 帐户时，你要做的第一件事就是* *停止使用你的根凭证。**

因此，当你注册了 AWS 并准备好账户后，按照下面的步骤操作，然后将密码保存在安全的地方，除非紧急情况，否则不要使用它。但是，如果我告诉你不要使用 root 帐户，你应该如何访问和使用 AWS 帐户？

让我们现在就开始吧！

## [](#2-create-an-admin-user)2)创建管理员用户

在接下来的两步中，我们将创建两个用户。但是现在，让我们关注第一个，我们的管理员用户。

我猜你现在正在想:但是为什么我们需要一个新用户呢？如果只有一个人进入我们的账户？这不是矫枉过正吗？

因为用户的概念为我们分配权限提供了粒度，即使用户由同一个人使用。通过用户功能，我们可以确保我们日常使用的用户帐户拥有尽可能少的权限。

受限用户访问的概念被称为最低特权原则。入侵我的帐户的黑客之所以能够造成如此大的损害，是因为我使用了我的 root 帐户进行完全访问。通过创建新用户，我们可以限制如果我们的帐户受到威胁可能造成的损失。

要创建用户，我们将使用 IAM 服务。AWS IAM 服务是创建和委派 AWS 用户和权限的方式。现阶段不用太担心服务。跟着做，一旦你设置好了，你就可以进行实验了。

好了，让我们看看设置第一个用户需要执行的实际步骤:

*   通过转到**服务> IAM >用户>添加用户**并调用此用户**管理**T4】来添加您的用户。
*   通过转到:**服务> IAM >组>创建新组来创建组。**调用这个组**管理员**并分配策略**管理员访问权限**。
*   将您的管理员用户分配到您的新组

## [](#3-create-a-developer-user)3)创建开发者用户

太棒了，这是一个用户创建的！

接下来，让我们创建我们的开发者用户。

我们将在日常使用中使用我们的开发者用户，它将只被分配所需的权限。

*   通过转到**服务> IAM >用户>添加用户**并调用此用户**开发者** *来添加您的第一个用户。*
*   通过转到:**服务> IAM >组>创建新组来创建组。**调用这个组**开发者**并分配策略 **AmazonEC2FullAccess** 。
*   将您的管理员用户分配到您的新组

这些步骤可能看起来有些笨拙，但是使用这个过程，我们将限制我们的开发人员凭证所拥有的访问权限。

如果有人损害了管理员帐户，攻击者将需要您的 MFA 设备登录。但是如果有人危害你的开发者，攻击者所能造成的损害将受到你所分配的权限的限制。因此，在可能的情况下，保持这些限制。如果需要，您可以在完成任何类型的帐户创建活动后删除权限。

因此，总结一下我们的新用户设置和工作流程，您将有…

*   一个 **root 账户**，带有隐藏密码，仅在紧急情况下使用。
*   一个 **Admin** 用户，用于登录控制台并将权限委托给其他用户。
*   一个**开发人员**角色，通过令牌访问与我们的 AWS SDK 一起使用，我们只授予我们需要的权限。

## [](#4-enable-mfa)4)启用 MFA

之前我提到我们的管理员帐户将启用 MFA。MFA 代表多因素身份认证。实际上，当我们启用 MFA 时，使用我们帐户的用户需要密码和其他信息才能登录。MFA 是有用的，因为如果我们的密码丢失，潜在的攻击者仍然无法访问我们的帐户。

因此，让我们继续为我们刚刚创建的所有三个用户启用 MFA。

你可以去* *服务> IAM >你的用户>安全凭证>管理 MFA >申请。** 并选择对您有意义的 MFA 方法。我目前正在手机上使用 authenticator 应用程序，我需要做的只是扫描一个二维码，瞧！我站起来了。

[![](../Images/7b7f3e1523984d3666f476896cd3900b.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--jNDS3i7U--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/www.thedevcoach.co.uk/wp-content/uploads/2019/07/Screenshot-2019-07-25-at-16.11.21.png%3Fresize%3D760%252C460%26ssl%3D1)

我可能应该在这里提到，如果您丢失了 MFA 设备，您可以通过使用您的 root 帐户电子邮件或电话号码来恢复您的访问。因此，确保这些是正确的，以防您丢失您的设备！

## 现在你可以安全地进行实验了

就是这样，你自己的 AWS 设置。在接下来的几天里，我会发布另一个帖子，解释如何在本地机器上设置密钥，以便于使用和简化。所以，确保你已经注册了简讯，你很快就会在收件箱里收到帖子！设置和使用 AWS 帐户时，请遵循以下简单步骤。避免可怕的 AWS 费用，安心体验 AWS 服务！

***你有账户被黑的恐怖故事吗？在下面的评论里让我了解一下吧！*T3】**

* * *

帖子[你的个人 AWS 设置(以及如何不被黑)](https://www.thedevcoach.co.uk/how-to-setup-an-aws-to-experiment-and-learn/)最先出现在[Dev 蔻驰](https://www.thedevcoach.co.uk)上。

像您一样加入云原生软件工程师社区。了解最新的云技术，学习核心云工程主题的基本技能，如:Docker。无服务器和 Linux，等等。

[加入我们](https://thedevcoach.co.uk/newsletter)并取得成功！