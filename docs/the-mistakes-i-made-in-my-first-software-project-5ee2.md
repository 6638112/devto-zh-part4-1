# 我在第一个软件项目中犯的错误

> 原文：<https://dev.to/mokkapps/the-mistakes-i-made-in-my-first-software-project-5ee2>

在我开始开发人员的职业生涯之前，我主要使用 Java 作为编程语言开发 Android 应用程序。我受雇于一家软件服务公司，在我的第一个项目中，我们必须为汽车开发基于 JavaScript 的应用程序。所以我人生中第一次不得不使用 JavaScript，在此期间我犯了很多错误，现在我想和你分享。

> 唯一从不犯错的人是从不做任何事的人。
> 
> 西奥多·罗斯福

## 项目设置

当我加入这个项目时，有一个项目经理和一个高级开发人员。几个星期后，两人都离开了这个项目，我同时扮演了开发人员和项目经理的角色。在我的办公室里，有另外两个高级开发人员也在从事类似的 JavaScript 项目。该团队开发了大约 10 个相当小的 JavaScript 应用程序，我的目标是在发布之前修复错误并实现新功能。发布进行得很顺利，我有机会开发一个基于相同技术堆栈的更大的应用程序。

该项目的技术堆栈由 JavaScript (ECMAScript 3)、用于构建应用程序的 Apache Maven 和作为测试运行程序的 Karma + jasmine 组成。不涉及 HTML 和 CSS，因为 JavaScript 代码与汽车公司内部开发的专有 UI 对话。

## 学习基础知识

我最大的错误之一是我没有很好地学习 JavaScript。我刚刚参加了一个简短的在线教程，它对我来说很容易。但是在这个简短的教程之后，我完全不知道:

*   关闭
*   领域
*   `this`参考文献
*   `==`对`===`
*   为什么要使用`"strict mode"`
*   `undefined is not a function`
*   以及 JavaScript 所有其他有趣的方面

如果你在一个有代码审查过程的大团队中，这可能不是一个大问题，因为在审查过程中，你会学到，坏的代码不应该进入存储库。但是我是一个人，没有人审查我的代码。我原以为我的基础 JavaScript 知识足以胜任这项工作，但今天我知道这是一个非常糟糕的代码，我今天会用不同的方式来做。

## 技术错误

我想谈谈我在这个项目中犯的一些最大的技术错误。

> 失败并不总是一个错误，它可能只是一个人在这种情况下所能做的最好的事情。真正的错误是停止尝试。
> 
> B. F .斯金纳

### 没有将视图与业务代码分开

我为应用程序的每个视图创建了一个单独的 JavaScript 文件。问题是，我没有将视图与业务逻辑分开。因此，这个文件包含了几乎所有必要的逻辑，以填补生活的屏幕。

使用 MVC(模型-视图-控制器)或一些类似的模式来避免逻辑和视图的紧密耦合将是一个更好的方法。

### 记载了所有方法

我将 JSDoc 添加到应用程序中每个方法的**中，即使该方法已经有了一个声明性名称。**

阅读推荐:[不要评论你的代码！](http://apdevblog.com/comments-in-code/)

### 使用窗口对象作为全局状态

这可能是我最大的错误:我将窗口对象用于全局状态，并在那里存储了许多属性。对全局状态使用窗口对象可能出现的问题进行总结:

*   任何人都可以在任何时候改变状态(它是可变的)
*   代码可读性差
*   测试可能很棘手
*   更多…

阅读推荐:[为什么全球状态这么邪恶](https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil)

### 通用后端处理程序

为了避免每个文件中的代码重复，我创建了一个通用类，用于在每个视图中发出 HTTP 请求。这是一个非常、非常、非常愚蠢的决定，导致了一大堆不可维护的代码。

这个后端处理程序类中的每个方法都由一个大的 switch-case 语句组成，能够确定哪个视图类进行了调用。由于多个视图可能同时触发一个请求，我们还实现了一个简单的队列机制，这使得它变得更加复杂和不可维护。

在每个视图中处理请求会是一种更好的方法(理想情况下是在每个控制器中，但是如上所述，我没有实现这样的抽象)。

### 坏单元测试

我为这个应用程序写了很多单元测试，但是最后，他们没有发现主要的错误。我也没有在修复一个错误后编写回归错误，所以有时我不得不再次修复相同的问题。此外，将视图和业务逻辑耦合在一个类中使得测试非常困难，因为必须模拟大量的依赖关系。

阅读推荐:[如何知道考什么](https://kentcdodds.com/blog/how-to-know-what-to-test/)

### app 的结果

我按时按预算完成了应用程序，但在我离开项目后出现了问题。当然，有一些错误，但是客户只提供了一点预算来修复它们。因此，我的公司将任务分配给工作的学生或学徒，他们只是使用快速肮脏的黑客来修复漏洞。可以想象，这并没有改善我留在那里的已经很糟糕的代码库。

此外，该应用必须在更多地区推广，这些地区都有特殊的业务需求。由于该应用程序根本没有可伸缩性和灵活性，这对该项目的下一批开发人员来说是一个相当大的问题。

## 结论

正如你可能想象的那样，作为一名开发人员(或者一般来说，作为一个人)，公开谈论我的错误并不容易。但我认为这对我的个人发展很重要，我也想带着你的恐惧谈论你所犯的错误。此外，你不应该害怕在你的第一个软件项目中犯错误，这是可能发生的，你会从中学到很多。

如果你是编程语言或项目的新手，提问是你能做的最重要的事情之一。如果你在需要的时候不提问，你可能会陷入像我一样的麻烦。特别是，如果是关于为业务应用程序定义软件架构，你应该向高级开发人员寻求建议。尽可能早地、经常地从有经验的开发人员那里获得帮助。如果您是团队中唯一的开发人员，尝试与更有经验的开发人员一起建立代码审查流程。

<small>封面图片由[穆罕默德·哈桑](https://pixabay.com/users/mohamed_hassan-5229782/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=3085712)拍摄来自[皮克斯拜](https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=3085712)T5】</small>