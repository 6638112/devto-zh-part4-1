# 接受技术债务和与之斗争同样重要

> 原文：<https://dev.to/shubhamjain/accepting-technical-debt-as-important-as-fighting-it-25el>

我第一次读《实用程序员》的时候是 16 岁。那时候，我的编程生涯还处于非常早期的阶段——粗糙的网站，愚蠢的游戏，甚至更愚蠢的测验。我写的代码粗制滥造，难以理解(很长一段时间，我更喜欢创建一个大文件，而不是以某种方式将代码模块化)。我刚刚开始了解到，软件开发人员的工作不仅仅是让它工作，你不是为机器而是为人类编写代码，在这方面，实用主义程序员的一句话对我产生了催化作用:

> 不想把软件做好，做软件就没有意义了。

当我读完这本书时，我知道我必须改变我懒惰的编程方式。有效的代码是一个微不足道的目标；真正的圣杯是干净的代码。在接下来的项目中，我尽了最大努力去做务实的程序员所期望的——或者我认为它期望的——我要做的事情:没有一行代码是重复的；每一个标志，无论多么微不足道，都应该可以通过配置文件进行定制；这些抽象应该是可靠的，经得起未来考验的。我开始花时间写测试，而不是仅仅构建他更喜欢的特性，这让我的客户很有保留。

值得吗？

* * *

打技术债是一场永无止境的战斗。该团队可能在过去做出了一个愚蠢、短视的决定，对于他们的限制来说似乎是合理的，而今天，它正在承受其后果。这种情况提出了一个两难的选择——是继续负债，还是留出资源来弥补错误。但是，让我们不要进入那个。我们感兴趣的是之后会发生什么。

团队吸取了教训，并承诺不再做出愚蠢、短视的决策。这意味着需要更多的会议来决定正确的方法，需要更多的过程和检查。当然，这也意味着开发人员的平均生产率下降了，但这似乎是一个可以接受的开销。

要再问的问题:值得吗？

* * *

在理想的世界中，需要做的事情非常清楚，开发团队和销售、市场营销以及产品团队之间的关系非常和谐，答案是肯定的。但是，现实世界的情况截然相反。该公司的未来愿景即使非常清晰，也不妨碍事情在粒度级别上变得混乱。此时，试图在每一步都避免技术债务似乎更像是一种毫无意义的困扰。

事实上，这经常是我在企业界工作的沮丧来源——当事情不像预期的那样运作时，太多的计划被扔出窗外。举个我最喜欢的例子:

不久前，我不得不制作一个几乎没有花里胡哨的注册页面——一个具有基本样式的表单。理想情况下，本来应该是两天的工作变成了一个不必要的紧张、单调的项目，持续了两个星期。我不能只在一个 HTML 文件中构建表单，我必须“以正确的方式”完成它。我必须设置 SCSS，网络包，林挺，和一个 makefile。我必须从现有项目中导入模块和实用程序。在我开始工作之前，我必须对它进行详细说明，这也意味着要参加多次会议。“适当的方式”是为了避免以后产生成本。

六个月过去了，这一页仍未被使用。营销团队(很可能)发现，Wordpress 中构建的相同表单可以让他们避免要求开发人员做琐碎更改的挫败感，开发人员可能不喜欢“计划外的工作”

你不能责怪营销团队为自己选择了一个方便的选项，你也不能责怪开发团队没有预料到这个决定。但是，为什么做正确的事情需要如此执着呢？解决眼前的问题不是比精心计划未来更好吗？如果技术债务有成本，那么避免技术债务也有成本。

当我教条地跟随实用主义程序员时，我犯了同样的错误:构建从长远来看没有什么意义的抽象，使组件可配置，但从一开始就不会改变。我想从长计议，但不经意间，我过度工程化了。

## 接受技术债务

代码不会孤立地发展，它会随着公司的业务目标发展，这在很长的时间尺度上是不可预测的。以温和的方式进行预期，这可能会有所帮助，但除此之外的任何事情，你都是在解决虚构的问题。

软件世界充满了这样的例子。为什么我们把网站设计成单页应用程序，而普通的 HTML 会好得多？很可能，这个思考过程包含了对网站未来发展的宏伟愿景，因此，从一开始就包含 React 和 SPAs 是显而易见的。

事实是，你最好解决最直接的问题。完全避免技术债务只不过是一种错觉。最终会有一个决定——不管考虑得多么周全——你最终会后悔。相反，目标应该是让人们更容易适应这些错误。例如，如果有 a)就地测试 b)变更可以以渐进的方式部署 c)并且它们可以很容易地逆转，重构就不会那么可怕了。

> 因为我们有相当全面的测试覆盖，我们可以大胆地进行重构。Chrome 中总有一些重大的重构工作在进行。
> 
> ...
> 
> 如果重构破坏了测试失败时没有暴露出来的东西，我们的观点是，这不是进行重构的工程师的错，而是这个工程师的功能没有足够的测试覆盖率。
> 
> -[Chrome 开发团队的 Aaron Boodman](https://medium.com/@aboodman/in-march-2011-i-drafted-an-article-explaining-how-the-team-responsible-for-google-chrome-ships-c479ba623a1b)

技术债务是进化代码的一部分。是的，在某些地方，这更明显:在多年忽视重构之后，代码库已经变成了一团乱麻。然而，这更多的是冷漠的结果，而不是一个单一的决定，如果你的团队想做得更好，这是不太可能的情况。保罗·格拉厄姆说得再好不过了:

> ![Paul Graham profile image](img/0ef273a776f75f5ee71a4eac1eaacd8b.png)@ paulg![twitter logo](img/4c8a2313941dda016bf4d78d103264aa.png)如果你是一名在创业公司工作的体面程序员，尽可能多地承担技术债务。(如果你是一个体面的程序员，你不会忍受太多。)2019 年 1 月 07 日下午 13:33[![Twitter reply action](img/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=1082268906201456640)[![Twitter retweet action](img/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=1082268906201456640)[![Twitter like action](img/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=1082268906201456640)

关心写好代码，但不要太多。

*本文最初发表于[我的博客](https://shubhamjain.co/2019/09/15/accepting-technical-debt/)。我计划更经常地发布。如果你喜欢这篇文章，请订阅。*