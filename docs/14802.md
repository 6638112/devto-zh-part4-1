# 网络基础知识- RIP

> 原文:[https://dev.to/shubho/networking-basics-rip-eod](https://dev.to/shubho/networking-basics-rip-eod)

您最先学习的路由协议之一是路由信息协议(RIP)。它是一种内部网关协议(IGP ),使用一种叫做贝尔曼-福特算法的距离矢量算法。以下是我对该协议及其工作原理的简要说明。

该协议有两个版本 RIPv1 和 RIPv2。两者都在今天使用，并且有显著的不同。UDP 用于传输更新的。UDP 端口是 520。IPv6 版本称为 RIPng。

邻居以 30 秒的固定间隔(默认)交换完整的路由表。这被称为更新定时器。RIP 邻居之间没有会话形成。一旦网络子网上启用了 RIP，它就会立即开始发送 RIP 更新。

## rip v1 和 RIPv2 的区别

| RIPv1 | RIPv2 |
| --- | --- |
| 更新消息被发送到本地子网广播地址即 255.255.255.0 | 更新消息被发送到组播地址 224.0.0.9 |
| 没有身份验证支持 | 支持纯文本和 MD5 身份验证。 |
| VLSM 支持不存在。因此 RIPv1 是有类的。仅使用 A 类(/8)、B 类(/16)和 C 类(/24)地址的默认子网掩码。这些子网掩码不会在更新中发送。当收到路由时，掩码从地址中导出。 | 支持 VLSM。子网掩码包含在更新中，因此 RIPv2 是无类的。此外，由于此功能，当网络不连续时，RIPv2 仍然可以运行。 |
| 不允许路由器通告与其自身不同的下一跳路由器。 | 支持更新消息中的下一跳字段。因此，路由器可以指定另一台路由器作为下一跳。 |

## [](#rip-timers)RIP 定时器

RIP 使用四种不同的计时器来帮助维护路由表和避免环路。所有这些计时器都是每条路线的。这些是:

1.  **更新计时器** (30 秒)–这是一个时间间隔，规定了特定路由的更新必须发送的频率。
2.  **无效计时器** (180 秒)–这是一个时间间隔，表示一旦收到路由更新，要等待多长时间，直到路由被视为无效或不可达。
3.  **抑制计时器** (180 秒)–如果某条路由的度量变差并被更新，抑制计时器将启动。在此期间，该路由不会接受任何等于或差于当前度量的其它度量。
4.  **刷新或垃圾计时器** (240 秒)–这是一个时间间隔，表示从上一次有效更新开始，在从路由表中删除路由之前要等待多长时间。

每当从邻居接收到有效的更新时，更新、无效和刷新计时器重置为 0。每当度量值降低时，抑制计时器重置为 0。

RIP 使用跳数作为度量。因此，在从多条路径接收前缀的情况下，具有较少跳数的前缀将是优选的。RIP 最多允许 15 跳。16 跳及以上被认为是无限的，这些路由被认为是不可达的。这种跳数限制可以防止环路。与 OSPF 和 ISIS 等其它协议不同，RIP 使用一些有助于防止环路的特定概念，这些协议是链路状态协议，其实施本身就能确保网络无环路。这使得 RIP 在实现方面是一个很好的协议，但同时也带来了更长的收敛时间。

## RIP 中的环路防止概念

1.  **水平分割**–尽管 RIP 会将整个路由表发送给邻居，但 RIP 会忽略接收更新的邻居已经通告的路由。换句话说，如果路由的传出接口与发送新更新的接口匹配，则该路由将被忽略。
2.  **路由中毒**–当某个路由的可达性失败时，会发送该路由的度量为 16(无穷大)的更新，从而向邻居指明该路由不可达。
3.  **毒性反转**–在这种情况下，具有无限度量的路由会通过接收该路由的同一接口进行通告。大多数情况下，水平分割和毒性反转一起使用。

*最初发表于 [Shubho。dev](https://www.shubho.dev/blog/networking-basics-rip)T3】*

特色图片来自[乔丹·哈里森](https://unsplash.com/@aligns)在 Unsplash