# 偿还忒修斯船上的科技债务

> 原文:[https://dev . to/integerman/sailing-on-the-ship of-Theseus-4d fn](https://dev.to/integerman/sailing-on-the-ship-of-theseus-4dfn)

一年前，我了解了思想实验“忒修斯之船”，尤其是它如何应用于软件开发。

简单来说，忒修斯之船是指忒修斯所驾的一艘古老的木制帆船。在航行过程中，船的每一部分都至少更换了一次。思维实验问的问题是“它还是同一艘船吗？”

这个应用于软件架构的概念，假设你可以一个方法接一个方法，一个类接一个类地替换一个应用程序，并且拥有一个有效的应用程序的新版本。当然，当应用于软件时，思想实验的答案很简单:二进制文件和代码是不同的，导致了不同的形式和因素，所以在作者看来，软件的改变会导致以旧船为代价的稍微不同的新船。

但这就是重点——我们不想用一个相同的版本替换一个有问题的或复杂的方法或类——当我们工作时，我们想要清理遗留代码，扩展测试，提高性能，使技术栈现代化，等等。修改代码可以是清理灰尘和加强设计，也可以是修复一个 bug 或增加一个新功能。

这些系统的终极梦想是，我们一点一点地替换一个系统，直到它像我们想要的光滑的游艇，而不是我们开始时的腐烂的旧驳船。

这有很多好处。第一，我们不是出售大规模的重写，而是通过遵循童子军原则来改进软件——通过使我们的营地(我们改变的代码)比我们开始工作时更好——每次我们进行代码改变。

其次，更改应用程序的单个“板块”的风险比更改应用程序的层、子系统或完全重写要低得多。此外，我们的变更导致的测试负载被最小化，并且通常与已经在测试中的足迹相同。

第三，重新设计系统背后的恐吓因素和分析瘫痪被转化为更具可操作性的东西——采用应用程序的一小块“木板”并改进或替换它的简单问题。

然而，这并非没有缺点。在这种慢慢替换和现代化木板的心态下，进行更广泛的改变可能会更难，例如迁移到新技术或托管平台，或者进行重大的架构更改。这当然是可能的(在过去的一年里我已经这样做了很多次)，但是这更难。

此外，通过在使用代码时逐步清理代码，您正在放大每次更改引入错误的机会。除非您在开始时有一个良好的测试覆盖度，否则您可能只是部分复制了您要替换的“木板”的行为。推而广之，遵循这种心态会给质量保证和编写单元测试的开发人员带来更重的负担。

你在每个特性/修复上花费的额外时间也不是没有代价的，因为它会稍微降低你的开发速度。尽管如此，这比从头重写应用程序的大得多的延迟要容易得多。

也许跟随忒修斯之船的方法而不是重写一个需要注意的应用程序的最大缺点是软件设计的因素。性能改进的一个常见格言是，设计通常是性能差的主要原因。通过替换应用程序的各个部分而不改变其整体行为，我们就失去了解决设计层面问题的机会。

也就是说，在跟随这次航行 12 个月后，我很高兴地向大家报告，大海风平浪静，碧蓝碧蓝。技术债务在最关键的领域得到了偿还(因为这是容易出现错误的地方)，对质量的关注将替换应用程序较大部分的固有风险降到了最低，这种方法已经证明了自己是管理应用程序走向成熟和稳定的一种方式。有时你需要“欺骗”一点，一次更换整个主桅或方向舵，但总的来说，原理是合理的，值得探索。