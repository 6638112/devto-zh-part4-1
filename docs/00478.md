# 审查代码审查，第二部分

> 原文:[https://dev . to/codestream/reviewing-the-code-review-part-ii-1b9e](https://dev.to/codestream/reviewing-the-code-review-part-ii-1b9e)

在[第一部分](https://www.codestream.com/blog/reviewing-the-code-review-part-i)中，我们讨论了使用 PRs 改进代码评审的具体建议，以及该方法本身如何具有固有的局限性。我们问:

*   如果你不需要公关来开始评估会怎样？
*   如果您可以在任何时候对代码的任何部分进行标记和注释，会怎么样？
*   如果您可以链接两个原本不相关的代码部分来突出一个依赖项或说明一种方法，会怎么样？

在这篇文章中，我们回顾了 Yelp 的 Jonathan Maltz 在他的文章[代码审查指南](https://engineeringblog.yelp.com/2017/11/code-review-guidelines.html)中提出的建议。它们与你能找到的关于这个主题的许多其他文章相似，所以它们作为这个讨论的一个清晰的大纲。

## [](#a-code-review-is-a-discussion)一次代码评审就是一次讨论

Jonathan 指出了有助于改进代码审查的一般主题。以下是他的一些关键信息:

*   沟通是关键
*   越小越好
*   让你的代码易于审查
*   代码评审是一种讨论，而不是口述
*   时间是最重要的
*   检查正确性

请注意，这里有一个总体主题，你可以从字里行间看出。公关事实上决定了节奏。我们习惯于用 PRs 定义什么是可能的。我现在建议，在持续方法的背景下，可能有更好的方法来构建代码评审。

## [](#a-continuous-code-review-mindset)一种持续的代码评审心态

在 CodeStream，我们正在开发工具，允许在任何时候对您的代码的任何部分进行代码审查，而不需要 PR。我们称这种方法为*持续代码审查*，它非常适合 DevOps 时代。让我们在这种思维模式的背景下看看乔纳森的建议。

当然，在评审代码时，*沟通是关键*，因为澄清问题和达成一致的唯一方法是沟通。但是你们是怎么交流的呢？你是否使用 Slack 或微软团队，剪切和粘贴代码片段，并希望澄清 ide 环境之外的事情？为什么不完全避免上下文切换，留在你的编辑器中交流呢？这将简化和改进这一过程。

*越小越好是*也是小词块更容易理解、处理和学习的一种说法。为什么不把它做得越小越好？如果您可以在任何时候讨论和评审任何代码块，而不需要 PR，会怎么样？这将增加有效性，并提供指导，而没有任何公关形式的陷阱。

*让你的代码易于评审*意味着提前给评审者提供指导。虽然这是可取的，但当交流在上下文中很容易时，它就变得不那么重要了，如果您的评审者可以对您的代码进行提问或评论，并且您可以快速回复，而无需切换上下文，您就不必猜测评审者可能不清楚什么了。

*代码审查是讨论，而不是口述*意味着审查者提供反馈，这可能只是澄清的需要，而不是建议的改变。但是一个好的和有效的讨论需要很好的沟通，而关于代码的很好的沟通不可能发生在大量的上下文切换中。见上文。

*时间是至关重要的*指的是尽快将审查转交给提交者。建议不超过 24 小时保持势头。当然，有很多原因可以推迟评审，但是一般来说，这是因为要评审的代码太多了，不可能在几分钟内完成。在*持续的代码评审*环境中，评审者和被评审者将快速地完成小块的工作，以便找到解决方案和清晰度，并保持动力。问题有时可以在几分钟内解决，而不是几天。

*审查正确性*意味着确保代码没有错误，并解决了手头的问题。但是，如果您可以对代码中不需要立即解决的任何部分提出建议，并允许代码被合并，同时还提供一种机制来跟踪代码中需要关注或改进的领域，以便从事代码工作的任何人都可以被告知这些问题并适当地解决它们，那又会怎么样呢？

## [](#summary)总结

持续的代码评审思想意味着一组关于评审什么、在评审期间在哪里进行最好的交流以及何时进行的新的假设。以下是外卖。

*   当您遇到可能需要改进的代码时，最好立即将其标记出来。不限于任何可能打开的 PRs，而是任何时间、任何地点、任何分支上的任何代码。
*   为了使这种方法切实可行，假设您将在 IDE 中，在那里谈论代码是最容易的，并且不需要 PR。否则，摩擦只会让这个过程停止。
*   最后，评审应该经常进行。当你使用代码时，如果你有问题，就提出来；如果你看到一个问题，标记它；如果你有建议，描述一下；如果你有某个问题的答案，那就提出来。

CCR 代表了代码评审中摩擦的数量级减少。通过允许您在没有 PR 的情况下，并且在不离开编辑器的情况下，审查或要求审查代码库中的任何代码，您有机会从根本上改进代码审查过程。