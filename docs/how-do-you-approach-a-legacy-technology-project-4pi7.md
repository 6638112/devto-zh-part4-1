# 你如何处理遗留技术项目？

> 原文：<https://dev.to/matmooredev/how-do-you-approach-a-legacy-technology-project-4pi7>

我目前在一个小团队中工作，对一些业务关键的遗留软件进行“现代化”。

这项工作与我习惯的工作有点不同。它涉及许多规划和许多“人员”——我们正在与现有的团队合作，并将影响该团队的未来结构及其运作方式。我们将解决诸如轻松部署代码的障碍、安全风险和过时的技术等问题，这些问题使得雇佣和留住愿意从事这些应用的员工变得更加困难。

我想分享我们在这个项目中学到的经验，但我不知道最好的方法是什么。我在考虑编写一些可以应用于其他项目的模式目录。

根据我们目前所做的工作，这里有几个这样的例子:

## 模式 1:采用更现代的构建工具

## 上下文

*   现有的构建脚本使用 ant
*   我们有多个构建工件、ant 脚本和属性文件
*   许多配置是针对特定的环境和操作系统(windows)的
*   依赖项与项目捆绑在一起(或者存储在共享开发环境中的某个地方)。jar 文件

## 问题

*   构建脚本很难理解
*   Ant 不是我们用于其他项目的技术，所以开发人员对它不熟悉
*   依赖性管理比需要的更难

## 解

*   我们使用 Gradle 创建了新的构建脚本
*   我们通过列出 jar/war 文件的内容并运行一个工具来比较包的二进制兼容性，来检查生成的构建 artefects 是否与旧构建生成的相同

## 新建上下文

*   构建文件更加简明易懂
*   依赖关系在一个地方声明，并在构建时从 maven 仓库中提取，符合 [12 因子应用](https://12factor.net/dependencies)的建议

# 模式 2:引入持续集成

## 上下文

*   团队共享一个开发环境，这是唯一可以构建应用的地方
*   开发人员每个人都有自己构建软件的配置
*   每个环境都有不同的人工制品
*   代码分支是长期存在的，并且变更被分批到预定的发布中
*   我们有一些自动化测试，但是很多没有运行
*   该团队已经从 SVN 迁移到 git，所以旧的构建过程并没有考虑 git

## 问题

*   开发变更时没有即时反馈
*   团队不确定他们发布的产品包含了他们期望的变化
*   主分支不能在短时间内部署，所以我们必须创建热修复分支并跟踪它们

## 解

*   我们创建了一个 CircleCI 配置来运行 gradle 构建。战争档案
*   我们审查了测试，修复了一些不工作的测试，删除了其他我们不需要的测试，所以整个套件都在 CI 中运行
*   我们和整个团队讨论了 git 中的分支和基于主干的开发

## 新建上下文

*   Master 包含已经通过 CI 的代码，我们很乐意发布，所以不太需要热修复分支
*   测试给了我们一些信心，一个拉请求没有破坏现有的功能
*   在短期内，我们打算从 CI 中构建特定于环境的工件，并部署这些工件，这将更容易看到部署的工件和构建它的源代码之间的联系

# 这个有用吗？

你认为这样的东西在处理其他遗留项目时会有帮助吗？你如何在工作中进行过程改进？

有效地使用遗留代码是关于遗留代码的最佳指南，但是很多建议都集中在对代码本身进行修改，而不是围绕代码的系统。你能推荐看看关于这个主题的其他资源吗？