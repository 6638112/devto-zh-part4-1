# 攻击技术债务

> 原文：<https://dev.to/ardalis/attacking-technical-debt-2k7g>

技术债务是对软件中捷径和漏洞的隐喻，这些捷径和漏洞使得软件比最优设计更难修改和维护。许多应用程序已经积累了大量的技术债务，对于许多开发人员来说，弄清楚如何处理这些债务是一个相当普遍的挑战，尤其是高级开发人员在需要帮助他们处理遗留代码和巨额技术债务的公司开始新的合同或工作。

## 那么，你应该如何偿还技术债务呢？

在某些情况下，你不应该。重写应用程序可能是有意义的。宣布“技术破产”这种情况应该很少发生，而且很可能不是开发人员要做的决定。让我们假设在这个场景中这不是一个选项(或者不是所做的决定)。现在怎么办？

## 止血

第一步是止血。如果你是一名医生，你有一个大量出血的病人，你需要做的第一件事是**止血**，而不是进行一系列其他诊断或收集病史或进行 CT 扫描。止血为你赢得了时间来评估情况，并在事情没有继续恶化的情况下纠正事情。

回到债务的比喻，如果你建议某人如何摆脱债务，而他们最大的问题是他们经常使用信用卡支出超过收入，你要做的第一件事是**切断信用卡**。

给你最后一个比喻。如果你在一个很深的洞里，不知道如何才能出来，首先要做的是停止把自己挖得更深。你只会让未来的问题更难解决。

就你的软件项目而言，这看起来像什么？当您添加未测试的、难以测试的、紧密耦合的代码时，技术债务会增加。所以，第一步是停止这样做。新代码将遵循标准。它将接受考验。它将被很好地分解。甚至对大型遗留代码库的更新也可以使用设计良好的新类来编写。[通过添加新代码](https://weeklydevtips.com/episodes/015)来维护遗留代码，而不是通过更改现有代码。

## 一边重构，一边增值

摆脱技术债务是重构的全部内容。您可以使用许多特定的技术，并且可以识别出导致技术债务的代码气味。我写了三个关于重构的课程，当你走到这一步的时候，你可能会觉得有用:

*   面向 C#开发人员的重构
*   [微软 Azure 开发者:重构代码](https://www.pluralsight.com/courses/microsoft-azure-code-refactoring)
*   [重构基础](https://www.pluralsight.com/courses/refactoring-fundamentals)

他们的一个共同点是*什么时候应该重构*？我推荐的方法是在对代码进行必要更新的过程中进行重构——修复错误或添加新功能。客户和利益相关者期望开发团队做出他们可以看到和欣赏的改变。如果你试图停止交付价值，并花很长时间“清理”代码，你会向利益相关者传递一个非常危险的信息。更重要的是，你不一定把精力集中在最重要的地方，也不一定能获得最直接的投资回报。

当您在增加价值的同时进行重构时，您正在使您已经在处理的代码变得更好。你的重构工作的好处马上就能感受到。通常，您在任何时间点上正在处理的代码区域都可能在不久的将来再次被处理。bug 和特性往往会对代码库的某些区域产生比其他区域更大的影响，而不是均匀分布。如果你对你的重构工作采取一种广泛的、全面的方法，很有可能你会清理掉那些你从来不需要接触的代码，这并没有增加多少价值(这可能完全是浪费时间，更糟糕的是，可能会破坏一些你本可以做得很好的东西)。

## 测量并保持质量增长

一旦你决定停止让事情变得更糟，并开始遵循童子军规则，并通过每个新的拉请求至少让代码变得更好一点，你就在正确的轨道上。现在是使用您认为有价值的任何度量来监控应用程序质量的好时机。我使用的一些指标包括:

*   代码测试覆盖率——随着时间的推移保持上升趋势
*   [总复杂性](https://ardalis.com/measuring-aggregate-complexity-in-software-applications)–保持其趋向于零
*   [不依赖](https://www.ndepend.com/)技术债务——保持下降趋势

您还可以使用 Visual Studio 或[sonar cube](https://www.sonarqube.org)中的一些可用指标。但是无论你选择什么样的度量标准，你都希望能够使用某种度量标准来观察你的代码质量随时间的变化趋势，从而给你信心，让你确信你正在朝着正确的方向前进。

您可能想要跟踪的其他内容:

*   通过测试总数(越多越好)
*   部署频率(越频繁越好)
*   新工作的周期时间(越快越好)
*   错误报告的频率
*   部署回滚的频率

您不需要跟踪所有这些事情，但是如果您打算不辞辛苦地齐心协力清理您的代码，那么预先确定您将如何度量您的进展是值得的。什么指标对你的团队或者你的利益相关者是有价值的？你如何通过努力让他们朝着正确的方向前进？这就是你如何知道你是否在正确的轨道上。

## 轮到你了

你经历过重大的重构工作吗？什么有效，什么无效？下面分享一下你的想法。度量标准呢？你怎么知道你什么时候结束了？还是说“更好”？您是否使用了某些指标来指导您的工作？请分享。谢谢！

[攻击技术债](https://ardalis.com/attacking-technical-debt)的帖子最早出现在 [ardalis](https://ardalis.com) 上。