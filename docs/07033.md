# 设置您的 AWS 物联网按钮

> 原文：<https://dev.to/mcloide/setting-up-your-aws-iot-button-5e8n>

作为对读者和工程师同事的合理警告，我必须告诉你，本指南是基于 2019 年的 AWS 界面，因此，如果你不能找到基于这里所说的资源或方向，那么，很可能你需要调整。本指南还假设您对如何在 AWS 上设置某些东西有一定程度的了解。

如果你正在考虑设置你的 AWS 物联网 Gen 1 按钮，这意味着你也知道物联网在下一次技术革命中的潜力，你越早了解这一点，你就可以打开越多的机会。

首先，您需要拥有 AWS 控制台访问权限，无论是作为 root 用户还是拥有足够权限来配置和管理物联网设备的用户。作为扩展帮助，还要创建一个 IAM 编程用户，以便您能够访问 AWS CLI。就像控制台用户一样，该用户也需要访问物联网资源。这种 CLI 访问对于从物联网(如端点)获取一些信息非常方便(稍后您将需要它)。

在控制台服务搜索栏上，键入 IoT 并选择 IoT Core。一个新的页面将会打开，在这里你应该点击管理，然后事情。

在创建策略之前，您可以遵循此处的 AWS 文档。请记住在此过程中下载证书文件。

在策略创建过程中，它会要求您添加两条语句，一条用于连接，另一条用于发布。您可以完全保持它所显示的连接，但是发布，现在，不是发布到主题，而是使用*。您可以在以后更改它。现在的目标是通过各种方式连接和发布。

完成此操作后，继续按照文档操作，直到到达配置您的设备。

现在是你找不到任何文档的时候了，你能找到的只有指南，就像这样，有一些关于如何工作的参考。更糟糕的是，你刚刚得到的设备没有附带说明如何执行这些步骤的手册。

[![sad](img/2003e5d7395b11b70913cbfd034b0d85.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--PXKU0zu9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/http://giphygifs.s3.amazonaws.com/media/LAFShX32UwUj6/giphy.gif)

是啊，差不多吧。

好吧，让我们从失望中走出来，设置好设备。获取一些设置设备所需的信息。

如果您已经安装了 AWS CLI 工具，请运行以下命令:

```
aws iot describe-endpoint

```

它将抛出一个错误，询问区域，这是因为您尚未配置 CLI，为此，只需运行以下命令:

```
aws configure

```

它会询问您在本指南开头创建的 IAM 用户的信息。

保存它返回的 URL 中的标识符。它应该返回以下格式的内容:

```
.iot..amazonaws.com

```

**注意**:这是一个 MQTT REST 端点，所以理论上，只要这个东西有证书和私钥，任何东西都可以是一个东西。**T3】**

您需要的下一条信息是 WiFi 网络的密码。抓住它，放在手边。现在按住设备上的按钮，直到它显示出蓝色的光。就像你使用蓝牙设备一样。

它将为您创建一个名为“ConfigureMe”的特殊网络。密码将以大写字母表示，即设备序列号的最后 8 位数字。盒子和设备本身都有。

一旦连接，进入配置页面[http://192 . 168 . 0 . 1/index . html](http://192.168.0.1/index.html)

在这里，您将:

*   为此设备配置您的 WiFi 网络
*   将私钥和证书文件附加到该设备
*   添加您之前保存的内容

一旦所有都被填满，点击保存按钮，它会自动断开无线网络，并尝试第一个消息发布。

如果一切顺利，你将获得绿灯。如果没有，那么，这就是事情变得令人讨厌和真正痛苦的时候，因为它将取决于视觉解释。当出现故障时，它会显示红色 led，如果发生这种情况，您需要阅读故障排除的红色模式部分，可以在此处找到。

它不会直接告诉您失败的原因，但会给您一些线索。基本上，它可能会在以下情况下失败:

*   证书未激活或无效
*   策略无效或限制性太强
*   端点无效
*   WiFi 未连接

重要的是要记住，AWS 的工作原理是否认所有和大部分问题可能与此有关。

现在您已经获得了许可，您需要找到一种方法来查看它发布了什么，最简单的方法就是简单地将调试日志添加到 CloudWatch。

恭喜您，您的设备成功连接到 AWS 并发布消息。

[![well done](img/413ae2393d52973ce63b0f3c5fd5acaf.png)](https://i.giphy.com/media/d31w24psGYeekCZy/giphy.gif)

接下来的步骤显然是对这些信息做些什么，但是我会告诉你。

祝你好运，别忘了享受乐趣和分享知识。

本文最初发布于:[https://bit.ly/2KJK5V8](https://bit.ly/2KJK5V8)