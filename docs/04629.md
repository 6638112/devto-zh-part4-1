# 安装 Git 的不幸遭遇

> 原文:[https://dev.to/davekang/misadventures-in-installing-git-og2](https://dev.to/davekang/misadventures-in-installing-git-og2)

我试图在我的 mac 上安装 Git。我是初学者。我遇到了困难。事情是这样的...

我正在开始一个新的网站项目，想学习一些新技能。我知道足够的 HTML 和 CSS 来制作一个功能性的但不是最佳实践的静态网站。我的最终目标是用 Hugo 建立网站，并部署在 Netlify 上，因为所有酷孩子都在 Netlify 上做静态网站生成器。

但是在我使用 Hugo 或 Netlify 之前，我需要首先启动并运行 Git。对于那些不知道 Git 是什么的人来说，这是一个特殊的软件，它记录了你所有的编程错误，以及你修复这些错误的各种尝试。我曾经在一个项目中使用过 Git，可能是在 6 年前，但是我有一个真正的程序员，他知道他在做什么，帮助我安装它，设置它，并教我如何使用基本命令。不太记得怎么用 Git 了。关于推，拉，忽视，但我真的不记得了。

总之回到故事。像所有优秀的程序员一样，我开始谷歌“我如何知道我是否安装了 Git”？这让我找到了我的第一个指令。你必须打开终端，输入:

git 版本

然后按回车键。它会告诉您是否已经有了 Git，以及它是哪个版本。

结果是 mac 安装了 g it 和 xCode，所以如果你安装了 xCode，我出于某种原因安装了 xCode(我不记得安装了)，你的 mac 可能已经安装了 Git。在终端中执行“git - version”会产生如下结果:

git 版本 2.7.0(苹果 Git-66)

现在苹果自动给你安装 Git 真是太好了，但是苹果出于某种原因安装一个老版本的 Git 就不太好了。这意味着无论你什么时候安装 xCode，很明显你总是会得到一个过时的 Git 版本。我知道很难跟上像 Git 这样似乎定期发布新版本的软件，但问题是苹果的版本不只是落后十分之一个小数点版本，它似乎落后了好几个小数点版本。

对于像我这样的普通程序员来说，这可能没什么大不了的，因为即使是旧版本的 Git 也能满足我的所有需求，但是如果你像我一样，使用过时的版本就有些烦人了。你只是感觉...后面。我想走在业余编程的前沿。我想要最新最好的版本。

# [](#looking-for-the-latest-and-greatest-git)寻找最新最伟大的 Git

这就把我们带到了 Git 安装之旅的第 2 部分——如果 Apple xCode 版本过时了，在哪里可以找到最新的版本呢？当然是在[官方 Git 网站](https://git-scm.com/downloads)了！所以我把 Mac 安装程序下载到我的桌面上，双击它，像运行其他我想安装的软件一样运行安装程序，成功了！！已经安装好了。耶，我用的是最新版本！我打开终端，做另一个:

git 版本

这就是事情变得不愉快的地方。它仍然把我吐回去:

git 版本 2.7.0(苹果 Git-66)

等一下。我刚刚从制作 Git 的官方人士那里成功安装了最新的官方版本，为什么它还在向我显示旧的苹果版本？是时候进行更多的谷歌搜索了:“我如何让 Mac 使用官方 Git 而不是苹果 Git？”

一些比我聪明的人已经明白了这一点。他们说问题在于你的$路径。我说的$PATH 到底是什么？为什么它有一个美元符号？我希望当我把这些东西都弄好的时候，这是一条通往财富的路。从技术上讲，我不知道$PATH 是什么，也不知道它是如何工作的，但显然它是你的计算机查看你的计算机血淋淋的内部来做程序我的东西的顺序。它从你电脑的食道开始，然后移动到胃，然后小肠，然后大肠，然后十二指肠，直到弹出你想要的东西。好吧，严肃地说，你的$PATH 告诉你的计算机按照一定的顺序查看特定的文件夹，以知道如何执行事情。为什么我们需要一个$PATH 呢？为什么它不像 mac 上的用户友好图形用户界面那样工作，如果我需要什么，我只需去那个文件夹双击它？我不知道，我也没有时间去搞清楚，我只知道我的$PATH 被搞乱了，它用错了 Git。

在谷歌上搜索这个话题会得到一些有趣的建议，带你进入电脑的黑暗世界，在这里你漂亮的 GUI 鼠标毫无用处。出于好奇，如果您想查看您的路径，请在终端中键入以下内容:

echo $PATH

它会让你回想起一些非常有感觉和用户友好的东西，比如:

/usr/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin

显然这个路径是我的计算机通过它的肠子寻找东西的顺序，这也是我的问题所在(虽然我上面粘贴的是固定的$PATH 版本，所以你们这些自作聪明的人可能会读我的路径，不明白为什么我有问题。仅供参考，我正在做这个开发。在我想通了所有这些东西后，我不知道我的$PATH 过去说什么)。

无论如何，关于如何纠正这种情况的建议让我想到了我在软件工程中最大的挫折之一:

* * *

# 在编程中，做一件事没有唯一正确的方法，有 100 种错误的方法

* * *

谷歌求助会产生以下结果:

-有人说用“vi”或“nano”来编辑你的$PATH 文件。但是“vi”和“nano”到底是什么？

-有人说使用“mv”终端命令将新 git 移动/重命名为 Apple git，但我不喜欢这个选项，因为我不知道这实际上在做什么。是不是在重写旧的苹果 Git？是把它移动到路径中的苹果 g it 前面吗？如果我以后升级 Git，这个 mv 的东西是不是原封不动？

——有人说编辑你的~/。bash_profile 文件来添加新 Git 的路径，以便您的计算机在 Apple Git 之前查找官方 Git。但这往往伴随着可怕的警告，你可能会搞糟你的电脑，如果你不这样做，你将不得不买一台新的，所以我很害怕。还有为什么这个文件的名字这么奇怪:~/。bash_profile？这个名字前面的点号是怎么回事？我发现圆点表示这是一个隐藏文件，所以你在你的电脑上找不到它，因为苹果知道业余程序员不应该乱动这个文件。斜线的意思是如果你编辑错误，你就再也找不到它了。~

-有些人说去他妈的，因为现在是 2019 年了，搞乱你电脑的肠子是过时的建议，只需使用以下终端命令:

brew 安装 git

等等什么？我只需发出一个命令，它就会替我治疗我的肠道绦虫？我加入。

# [](#but-what-the-heck-is-brew)但到底是什么东西酿的呢？

我们的 Git 安装之旅的第 3 部分发现我处于这种情况:

-我已经通过 xCode 安装了过时版本的苹果 Git
-我已经安装了最新最好版本的官方 Git
-我已经将这两个 Git 安装在我电脑的深处。我想用官方 Git，但是我的电脑一直用苹果 Git。

输入 Brew。

在互联网上到处都可以看到有人说使用 Brew。什么是 Brew？嗯，谷歌搜索显示了一个来自 Brew 制造商的[网站。它说 Brew 是“macOS(或 Linux)缺失的包管理器”。](https://brew.sh/)

我不知道 Brew 的历史，但我假设它的出现是因为程序员意识到在你的计算机肠道中安装各种绦虫会给它带来各种消化问题。例如，苹果 Git 的过时版本拒绝使用更酷的官方版本。Brew 显然可以帮助你安装东西，并照顾你所有的绦虫。我喜欢 Brew 这个主意，因为我认为制造它的酿酒师比我聪明得多。我要试试。

根据该网站，您只需将它放入您的终端即可安装 Brew:

/usr/bin/ruby-e " $(curl-fsSL[https://raw . githubusercontent . com/home brew/install/master/install)](https://raw.githubusercontent.com/Homebrew/install/master/install))

Dev.to 自动将那个 URL 放在一个链接上面，我不知道如何使它不是一个链接，所以忽略它的可点击性。我不知道这个命令是做什么的，但输入它后，开始吐出一长串东西，我试着去读，但它飞得有点快，反正我基本上不明白。你需要依赖。好的。你需要其他的包裹。好的。它在这里安装东西。好的。它在那里安装东西。好的。我的一部分担心新的绦虫，就像我以为我只是安装 Brew，但 Brew 正在酝酿各种其他东西来安装。我祈祷相信酿酒师们一定知道他们在做什么，所以这可能比我自己安装这些东西更好。

它结束了。我有啤酒。

我在终端中尝试:

brew 安装 git

更多矩阵状的乱码文字飞过。但它成功了。太棒了，我现在已经通过 Brew 安装了 Git，版本 2.23.0。

我在终端中尝试:

git 版本

它吐了回去:

2.22.0

厉害！它不再使用苹果 Git 了！我在做生意-等一下？Brew 刚装了 2.23.0 那么为什么说 2.22.0 呢？？？

2.22.0 是我从 Git 官方制造商网站安装的 Git。现在 Brew 帮我把苹果 Git 换成了官方 Git。我想这是一个进步，至少它现在使用了非苹果的 Git，这是我想要的，但是现在我有了一个新问题。Brew 安装的是 2.23.0 而不是 2.22.0。我想要最新最好的。当我输入“git - version”时，我想显示 2.23.0。

# 现在，如果我能让我的电脑使用正确的 Git，也就是第三次，那就太棒了

如果你还在读我现在的情况:

-我安装了旧的苹果 Git，现在已经不用了
-我安装了官方 Git 2.22.0，现在已经在用了
-我安装了 Brew Git 2.23.0，还没用，但是想用

那现在怎么办？

更多谷歌搜索。我发现 Brew 为业余爱好者提供了一个很酷的功能，叫做“医生”。它会诊断你的绦虫，并告诉你如何摆脱它们。太棒了。我进入终端:

酿造医生

它返回了一些我必须修复的东西，比如 xquartz 过时了，我按照说明去修复了。完成了。太好了，你瞧，有几个与 Git 相关的问题突出了出来。太好了，终于有些见识了！

第一个说:

错误:`brew link`步骤未成功完成
公式已构建，但未符号链接到/usr/local
您可以使用“brew link git”重试

我试着在终端输入:

去 brew link

但是它仍然抛出一个错误，很抱歉我没能写下来。正在做:

git 版本

还在给我指 2.22.0，这不是我想要的。我要 2.23.0。

我发现网上有人说尝试关闭并重新启动终端，因为显然终端不够智能，无法意识到已经安装了新的东西。我试过了，但无济于事。

我的新错误是这样说的，它不是确切的错误，因为我没有写下来，但它是这样的通用格式:

* * *

错误:无法符号链接 bin/git-upload-pack
目标/usr/local/bin/git-upload-pack
已经存在。你可能想删除它:
RM/usr/local/bin/git-upload-pack

强制链接并覆盖所有冲突文件:
brew link -覆盖 git

要列出所有将被删除的文件:
brew 链接-覆盖-模拟运行 git

* * *

我决定尝试第一个建议来删除有问题的项目:

RM/usr/local/bin/git-上传包

它被移除了。我再试了一次，我得到了同样的错误，除了现在有一个不同的项目引起了攻击。我把它拿掉。再试一次。同样的错误，除了现在它是第三个导致犯罪的项目。我想知道这个列表中会有多少攻击性的绦虫，所以我决定试试 Brew 的第二个建议“强制链接，覆盖所有冲突文件”。这似乎会造成一些严重的损害。我有点担心。它到底在覆盖什么？如果我把 Brew Git 和官方 Git 搞混了怎么办？

我看到了第三个建议“列出所有将被删除的文件”。我在谷歌上搜索“brew dry run”，发现它是这样做的:“显示将被删除的内容，但实际上不删除任何内容。”嗯，听起来不错。我至少能看到我肠壁里将要毁灭的东西。

我在终点站:

brew 链接-覆盖-模拟运行 git

它向我展示了大概 30 或 40 件将要改变的事情。好了，我现在知道，如果继续使用“rm”一次删除一个文件的方法，我将花费一整天的时间来手动一次删除一个文件。我深吸一口气，决定使用核选项。我在终端输入:

brew 链接-覆盖 git

然后，我在终端中尝试:

去 brew link

我不记得它说了什么，但它是好消息。然后，我在终端中尝试:

git 版本

它吐了回去:

git 版本 2.23.0

成功！！！我终于在使用最新、最棒的 Brew 安装版 Git 了。唷。下一篇文章将是关于设置 Git 的。