# 什么是持续集成？

> 原文：<https://dev.to/rlxdprogrammer/what-is-continuous-integration-2h9>

现在程序员很难单独工作，大多数情况下他们是作为团队的一部分来开发的。有时这个团队只有 3-4 个成员，但是有几个超过 1000 名开发人员的大型项目。组织他们的工作并不容易。不仅从管理的角度，技术上也是如此。

首先，需要跟踪软件的不同版本。为此，有几种不同的版本控制系统(如 Git、SVN、Mercurial 等)。)，但大多数情况下，仅有版本控制系统是不够的，还需要确保不同的版本是正确的。

## 什么是软件集成？

软件集成商是几家公司的专职角色。这到底是什么意思？不同的代码组件和组件的不同部分由不同的团队和不同的开发人员完成。他们都在做自己的工作，有时并不了解整个软件。所以最后他们都完成了，他们意识到即使他们的部分做了预期的事情，他们的代码也不能一起工作。有时甚至不能建造。这是因为不同的接口，对接口的不同期望等。或者只是在集成之后，软件变得太慢或者占用了太多内存。还有不同的标准(编码指南等。)并不是在所有代码中都得到正确遵循。这些任务都是软件集成商的责任，以确保代码的每个部分都单独满足需求，然后将它们合并到一个代码库中并使其工作。这项工作听起来可能很容易，但大多数情况下它是具有挑战性的。此外，这需要很多时间。想象一下，你从 10 个开发人员那里得到了几个星期的工作，你需要让他们一起工作...这是一场噩梦，对吗？幸运的是，有一个策略可以让它变得简单，这就是持续集成。

# 什么是持续集成？

持续集成的想法是不要等到混乱变得太大，而是尽可能快、尽可能频繁地集成软件。每天，甚至每次改变后。当然手动是不可能的，所以想法是尽可能自动化。首先，你需要一个版本控制系统，它跟踪代码的实际状态。

有几种检查可以在您的代码基础上自动运行:

*   **构建整个代码**

## **如果你在多个编译目标上工作，它特别有用，所以你可以为所有的编译目标构建它**

**运行单元测试**

## 正如我在关于测试驱动开发的文章中已经讨论过的，用单元测试覆盖你的代码也是很好的，这样你可以确保其他修改你代码的人不会破坏已经工作的功能

**运行更高级别的测试**

## 您还可以创建自动化的组件或集成测试，并且您可以随时运行它们来检查已经实现的功能是否还在工作

**运行静态代码分析器**

## 有几个工具可以对你的代码进行静态检查。它可以检测潜在的错误(如使用未初始化的变量等。)并且它还可以检查预期的编码风格或者给出更有效代码的建议

**运行动态检查**

## 有几个工具可以检测典型的错误使用，如内存泄漏或程序挂起

**进行测量**

## 您可以随时测量关键场景的运行时间或代码的内存使用情况。您甚至可以测量代码覆盖率

**根据需要运行额外的脚本**

它总是依赖于项目。例如，在我的一个项目中，我们有一个从代码中收集所有 TODO 注释的脚本，这样我们就可以在发布之前确保所有注释都已解决。

您可以在代码的任何状态下运行所有这些检查，并通过状态监控工具或电子邮件通知立即向开发团队提供反馈。以便团队始终了解代码库的当前状态。让所有测试保持绿色是一个好策略。

# 扩展您的系统

如果您正在处理一个庞大的代码库，那么对您的代码运行所有这些检查可能会花费很长时间，尤其是因为编译器和静态代码分析器通常特别慢。所以一直运行所有的东西是有意义的，因为这会导致一个太长的反馈循环。如果有一天你的代码出了问题，但没有多大帮助，你第一次收到通知。因此，您需要扩展您的集成框架。

在代码库的每次更改之后(每次提交之后)，需要运行一组检查，比如编译和单元测试。

您还可以设置一个夜间作业，每天晚上对代码运行几个脚本，这样开发人员每天早上都会得到反馈:编译、单元测试、更高级别的检查、静态分析器的某些部分。

此外，您还可以设置一个运行所有检查的作业，但这个作业只允许运行一次，例如每周一次或在软件发布之前。

# 使用框架

您可以自己用一些脚本来实现它，但幸运的是，有几个框架已经支持这种功能。

其中最受欢迎的是詹金斯。首先，它是免费的。它也非常灵活。您可以通过多个触发操作设置多种作业。您还可以设置不同种类的通知。它有几个外部工具(GIT 等)插件。)，但是您可以将任何工具与任何脚本语言(python、bash 等)上的简短脚本集成在一起。).它创建了很好的报告和图表，你可以向你的管理层展示。

我在这里想说的是，你可以轻松快速地设置这样一个系统，它有很多好处。

# 定义你的整合策略

您还需要设计您的集成策略。如果你把每一个变化都立即集成到最终的软件中，那么如果它破坏了构建，你能做什么？它需要被修复，同时每个人都被封锁。这就是为什么首先运行检查器，只有在所有检查都基于。

还有一些过程，您独立开发不同的组件，并且您只是将的一些专用“发布”版本合并到主软件中。

还有更多的策略。你需要决定什么时候以及如何将什么合并到主软件中。大多数策略都有自己的优点和缺点。你需要定义哪一个最适合你的项目。