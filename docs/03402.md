# LWC——使用事件将数据传递给父组件

> 原文:[https://dev . to/Brett Mn/LWC-using-events-to-pass-data-to-a-parent-component-5543](https://dev.to/brettmn/lwc-using-events-to-pass-data-to-a-parent-component-5543)

[https://www.youtube.com/embed/KUbwqxG-M1E](https://www.youtube.com/embed/KUbwqxG-M1E)

你好，我是布雷特和 WIPDeveloper.com。上次，我们通过将数据分配给一个属性，将数据从父组件传递给子组件。现在我想将数据从子组件传递到父组件。但是因为我们不能给父组件的属性赋值，所以我们必须使用事件。

我们将在子组件中生成一个事件，然后在父组件中生成一个事件，我们将像处理按钮点击事件或任何其他由 DOM 生成的事件一样处理它。因此，从父母的角度来看，它的处理方式看起来是相似的，但孩子将创建一个新事件，父母将收到它。我们将能够在父组件中使用这些数据。

我将从在父组件中添加一个位置来放置从子组件获得的信息开始。因此，我将添加另一个 lightning 卡，我将调用，我将把它保存在父级上的一个名为 child data 的属性中，并在这个 lightning 卡中显示它，当然，为此，我们必须添加一个属性。我们需要跟踪它，以便我们可以看到它的更新。track attribute，我们的 track decorator 非常重要，所以我们可以修饰子组件。这是我们需要在子标记中处理父标记的一部分，我们要添加一个按钮。因此，在我们这样做之前，让我们使它们不会一起循环。

我要把前面的内容放在一个段落标签中，下面有一个按钮。

我要让它引起一场儿童活动。我绑定到 JavaScript 中一个名为 cause child event 的事件。

这将是我们孩子标记的全部内容。因此，在我们的类中，我们需要创建 cause 子事件处理程序。

这里，我们有一个叫做类子事件的方法。这将创建，它将执行调度，一个新的事件调度事件被绑定到闪电元素中。所以我们可以从这个调度事件中直接调用它。它寻找的是一个自定义事件。因此，我们将创建一个新的自定义事件，我们必须给它一个名称。因此，这个自定义事件将是我们在父事件或元素的父事件中查找的名称。所以我们要给它起个名字，子事件，全小写。

把它放大一点，这样更容易看到。因此，不做 camera case 看起来确实有点奇怪，但我们将创建一个名为 create 的新自定义事件，我们将调度一个名为 Charlie man 的新客户事件。现在，如果我们看我们的页面，我们可以看到我们的按钮，我们可以点击它，但什么也没有发生。那是因为我们没有处理它。让我们在第一个事件上添加一个处理程序，我们要使用 on，我们要用 on 作为我们要找的事件的开头，然后记住，它都是小写的，所以 on 子事件，然后我们要让一个处理程序对它做一些事情。

有一个处理子事件。然后在我们的 JavaScript 中，我们必须创建处理程序。现在，我将把声音数据设为等号，因为我们现在实际上没有传递任何数据。这只是为了证明我们没有得到这个事件。刷新页面。现在，我将单击这个第一个原因子事件。我们会得到我们得到的事件，我们可以看到时间戳。但是让我们通过给它一些填充来使它排成一行。

不需要额外的斜线，刷新页面。现在它有一些填料。但是我们所做的只是验证这是因为这个时间戳已经被创建并且是明显的。所以我们知道事件被接收到了。我们只是没有通过，我现在就去数据。并传递数据，我们将从子节点为自定义事件传入第二个属性。它将是一个具有细节属性的对象。我们将传递给它一个字符串，我们称它为，我将拥有这个字符串，所以从孩子开始，让它传递时间

现在对本地字符串执行此操作。现在，当我部署后，我们刷新页面时，将会出现错误。那个错误说没有，看起来我们现在没有进去。但是现在，当我们单击事件时，它会将此详细信息发送到处理程序中。但是我们必须让它接受一个事件。我们可以做一些事情

详述并赋值我们传递的值。

现在我们看到，are from child 将一个非常奇怪的字符串传递给了 local。

不是最好的。现在去掉它，我们可以看到我们的孩子正在发送事件，我们现在在父节点中显示来自它的信息。但是如果我们点击另一个孩子，什么也不会发生。因为我们没有监听父节点上的事件。我们只在第一个中添加了句柄子事件，但是如果我们将它添加到第二个中

再试一次。我们可以看到，我们可以从两个孩子那里接收事件。这就是我们如何将数据从子组件传递到父组件。

## [](#links)链接

*   [创建和调度事件](https://developer.salesforce.com/docs/component-library/documentation/lwc/lwc.events_create_dispatch)
*   [处理事件](https://developer.salesforce.com/docs/component-library/documentation/lwc/lwc.events_handling)

## [](#thats-it-for-now)现在就这样。

记得报名参加 **[每周一次的单口相声！你可以得到我们关于 WIPDeveloper.com 的任何最新信息。](https://wipdeveloper.com/newsletter/)**

使用事件将数据传递给父组件的帖子[首先出现在 WIPDeveloper.com](https://wipdeveloper.com/lwc-using-events-to-pass-data-to-a-parent-component/)的[上。](https://wipdeveloper.com)