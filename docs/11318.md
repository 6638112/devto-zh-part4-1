# 访问控制

> 原文:[https://dev.to/dwd/access-control-472g](https://dev.to/dwd/access-control-472g)

上面那个家伙？

他叫蒂姆。他是一个魔法师，与本文更密切相关的是，他也是一个访问控制机制。

## [](#enchanter-based-access-control)基于访问控制的魔法师

大多数开发者都无法使用基于 EBAC 的访问控制。它需要一个训练有素的附魔师，一个桥梁，和一些问题，是一个高度互动的解决方案。

一般来说，我们将交互性限制在身份验证上，而将授权作为非交互式的解决方案。

另外，就一个例子来说，这有点奇怪。让我们以医疗保健中的患者记录为例来讨论一下。病人记录有很多部分——有姓名和地址等数据，也有医疗数据，既有当前的也有历史的。因为几乎每个人都会在某个时候得到一些医疗照顾，所以我们也有很多这样的人。

那么，我们如何保护对这些数据的访问呢？

认证让我们获得一个经过验证的身份，有时这就足够了。

## [](#identity-based-access-control)基于身份的访问控制

[![NHS Sample Identity Badge](../Images/50d6f23cf394a48efadb3f78c8836253.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--x4J-k6pD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0a455gi7colovp4xpju0.jpeg)

如果你有一个身份，那可能就是你所需要的。爱丽丝和鲍勃可以访问这些数据。其他人都不知道。

这是指定访问控制列表(ACL)的一种非常好的方式。但是当爱丽丝离开公司时会发生什么呢？我们需要检查她所在的所有前交叉韧带并移除她。Alice 的替代者也需要加入——这意味着以某种方式跟踪 Alice 需要访问什么。

因此，如果您有大量数据——因此也有大量 ACLs 那么一点点间接性可能会有用。

## [](#role-based-access-control)基于角色的访问控制

[![The Doctor Role](../Images/69fdbe23f100ab2af74b882dd80a36ec.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--71_W80yP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/qrmdqc6wig8osj1ntekr.jpeg)

我们可以做的是将人们分成不同的类型——无论如何，从数据访问的角度来看。经理、医生、开发人员、管理员等等。这些不同的类型被称为角色，这意味着您的 ACL 现在只包含一组角色，而不是人。

当爱丽丝不再是一名医生时，我们只是从她身上移除了那个角色。替代者得到医生的角色。管理起来要简单得多。

通常，您可以混合使用 ACL 可以包含混合的角色和身份，因为任何身份都是一个(专门的)角色。

问题是，这仍然会给你留下许多 ACL，而细粒度的访问控制——你可能要管理数千条记录——意味着每条记录都有数千个 ACL。或者甚至是部分记录。也许多一点间接可能会有帮助。

如果您可以描述数据的敏感性，然后描述人们处理此类数据的信任和培训，会怎么样？

## [](#rule-based-access-control)基于规则的访问控制

[![Labels in action](../Images/1f6dd969c93626fa55708720bf42e8d5.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--gJbHnTZ9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/yhkmvgprq0la0or2lmp9.jpeg)

假设所有的病历都是“敏感”的。那里的个人信息——尤其是姓名、地址——我们将添加一个“个人”标签。医学的东西，让我们给它贴上“医学”的标签。所以我们现在的数据有的是“敏感个人”，有的是“敏感医疗”。我们将这些称为保密标签，或简称为“标签”。

现在，我们说医生和护士，当他们受雇于医院时，会接受如何处理敏感信息的强制性培训。他们也接受过处理个人和医疗信息的训练，也值得信任。我们称之为“清除”。

实验室工作人员可能只看到医疗数据，其他医院工作人员可能只看到个人信息，他们的许可反映了这一点。

你可能会从电影和电视节目中认出这些术语——“敏感”是一种“分类”，如果这有所帮助的话。

有许多处理这种机制的标准化方法，如 sdn . 801(c)(NIST/NSA 联合私人出版物)、STANAG 4774(北约标准)和 FIP-188(NIST 公共出版物)。我还写了一个 MIT 授权的库来处理这些，因为我是个疯子，喜欢引起国家安全机构注意的疯狂难题。(嗨伙计们！).

这些还定义了另一个元素——“策略”,它列出了分类和标签，并告诉您如何将它们组合起来。

该政策还增加了标签制度的两个关键特征。首先，它告诉你如何标记受保护的数据。这不仅意味着查看一些数据的医生被清楚地告知数据的敏感性，而且我们还可以包括一些根本不用于访问控制的标签，并且仅提供关于数据敏感性的信息。

最后，该策略告诉您如何将标签翻译成其他人的策略(例如，当您想要将患者记录发送到不同的医院时)。

当发送电子邮件或即时消息时，人们可以在消息上贴上正确的标签，以确保安全并传达敏感性——这是所谓的“发起者控制的访问控制”的一部分，或称为 ORCON——因此患者记录以外的消息仍然受到保护。

这是一个强大的系统，这可能解释了为什么它是世界各地的军队和情报机构用来保护他们的数据的系统，以及 HL7 和其他医疗技术标准组织推荐的医疗数据系统。

但是，任何医生真的应该能够看到任何病人的记录吗？在荷兰，最近有一个丑闻，一个名人的病人记录被完全没有必要的医务人员(和其他人)纯粹出于好奇而查看。

我们可以把基于规则的访问控制(RBAC)和基于角色的访问控制(RBAC——是的，我知道)结合起来，给事物一个标签和一个 ACL。但这真的很难管理。随着护理的进展和变化，病人在病房和科室之间移动，管理这种移动又将是痛苦的。

如果我们能自动做到这一点，那么当一个病人被转移到一个病房时，病房的工作人员会自动获得他们需要的访问权限。

## [](#attribute-based-access-control)基于属性的访问控制

[![UNIVAC Mainframe](../Images/802c41490e4fa6a7b735575b46d1e901.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--LF9vChSb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/vtsg3nlrku1wsv09loal.jpeg)

ABAC 使用数据本身来动态推导访问控制决策。它的策略本身几乎就是一种编程语言，通过挖掘表示资源、环境和主体的数据来决定主体是否可以访问环境中的资源。

因此，XACML 之类的标准非常复杂，正如基于角色的访问控制可以用来实现基于身份的访问控制一样，XACML 可以用来实现我们到目前为止讨论过的任何访问控制系统，还有一些我们甚至还没有想到的系统。医生只能在工作时间使用经批准的设备访问患者记录吗？当然，我们能做到。

当然，如果没有 XACML 或类似的系统，我们可以用更传统的编程方式来编写策略。

当然，ABAC 系统需要为此处理大量数据——它需要知道护士是否在特定的病房工作，以及病人是否在那个病房。它需要知道一个医疗程序是否由顾问工作的同一个部门执行。它需要知道医生是否在值班。它需要知道他们的个人移动电话是否已经被批准使用。

但是，如果你能理解这种复杂性，ABAC 是惊人的强大。

复杂性之外的负面影响更加微妙。基于规则的访问控制通过其翻译能力给出了一个联合访问控制系统——ABAC 实际上不能提供这种功能。它也不能标记数据，这对于指示简单访问控制之外的敏感性是有用的。

那么什么是最好的访问控制呢？

## [](#everything-based-access-control)一切基于访问控制

[![All the things](../Images/8b95fc30aa9f4d94115368257c55a7da.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--Z168Bzmc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/uuxedwmgi7z5du0h27r2.png)

事实证明，所有的访问控制系统都有优点和缺点——但是，我们可以很方便地将它们结合使用，这样就基本上消除了缺点。

ACL 仍然是我们拥有的最简单的访问控制解决方案，特别是当使用角色进一步简化时。如果你不自信，或者不能做其他事情，就选这个。

将这些与标签和许可结合起来，您可以立即保证，即使 ACL 说有人可以读取数据，如果他们接受了正确的培训，或者不被信任，他们仍然不能。此外，您还拥有强大的标记和联邦控件，这对人类理解非常有用。

使用 ABAC 的技术，ACL 和角色都可以由代码自动分配。病人记录更新说他们在 X 病房？自动调整 ACL，我们就完成了。ABAC 的环保技术也可以通过注入设备间隙来复制。

在任何重要的系统中，访问控制都是一个复杂而重要的问题。但是，这也是一个已经接受了大量学术研究以及来自工业界的许多实用方法的领域。就像几乎任何大的架构决策一样，最好的答案是“合理地混合”，最差的答案是“混合得不好”，最安全的选择是选择最容易的。但是不要用蒂姆。他其实没那么好。