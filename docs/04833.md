# 立即用 Zeit 创建无服务器 API

> 原文:[https://dev . to/spu kas/create-server less-API-with-zeit-now-50ln](https://dev.to/spukas/create-serverless-api-with-zeit-now-50ln)

对于我的副业项目，跟踪最喜欢的电视节目，我创建了一个简单的 API，响应来自 RSS 提要的数据列表。为了让它变得令人愉快，并学习一些新的东西，我做了一个无服务器的基础设施，并写了一些我发现的想法。

如果无服务器应用程序的概念对您来说是新的，简而言之，它是每个入口点的无服务器 Lambdas(函数),存储在第三方云基础架构提供商中，按需执行——每个函数存储为一个单独的包。当你请求一个特定的端点时，Lambda function 启动，执行代码并发回一个响应。

## [](#pros-and-cons)利弊

考虑选择无服务器架构而不是自己运行服务器的优势和劣势:

*   赞成的意见

    *   维护-服务提供商负责服务器更新、补丁、硬件
    *   成本——你为你使用的东西付费；对于许多调用或计算值
    *   安全性-每个功能在每个入口点都存储为一个单独的包
    *   缩放-自动缩放
*   骗局

    *   依赖第三方供应商
    *   延迟-功能启动需要时间
    *   因为价格不适合长时间跑步
    *   难以测试和调试-复制无服务器环境极具挑战性

## [](#choosing-provider)选择提供商

随着无服务器架构变得越来越流行，越来越多的供应商提供他们的服务。举几个比较流行的:亚马逊 AWS Lambda，谷歌云函数，Cloudflare Workers，Azure 函数。我查看了 AWS 和谷歌服务，迷失在文档和注册过程中。对于一个快速测试项目来说，这看起来太复杂了。
我选择了 Zeit Now 无服务器功能，无需配置或优化管理即可快速轻松地进行设置。
它支持 React、Node.js、Go 等等。现在，您编写并推送代码，其他一切都自动管理，并且您会收到一个执行函数的入口点。此外，它有一个免费层，这可能会涵盖您的小项目需求。

## [](#bootstrap-project)自举项目

Zeit Now CLI 提供快速模板来引导您的项目。如果您现在还没有安装，您可以在终端中运行以下命令:

```
npm i now -g 
```

要列出模板，请运行:

```
now init 
```

从列表中，选择您喜欢的语言或框架。
对于我的项目，我使用`vanilla-functions`模板。

## [](#create-a-function-for-an-entry-point)创建一个函数的入口点

为了让`Now`创建一个有效的入口点和函数，它必须被放置在项目的`root`中的`/api`目录下，并被默认导出。
一个简单的函数示例是这样的:

```
// api/greet.js
module.exports = (req, res) => {
  res.send('Welcome!');
} 
```

如果您创建一个 Node.js 应用程序，您将可以访问一些助手，这与`express.js`非常相似:

*   请求.查询
*   请求. cookie
*   请求.正文
*   response.status()
*   response.json()
*   response.send()

## [](#deployment)部署

使用`Now`进行部署轻而易举。只需在终端中从您的项目`root`目录:
运行一个命令

```
now 
```

看看一切是如何为你做的。成功构建后，您将获得一个部署的应用程序地址，类似于此:
`https://vanilla-functions-bcb58vyrs.now.sh`

要发送问候消息的请求，请在部署的地址中添加`/api/greet`后缀:
`https://vanilla-functions-bcb58vyrs.now.sh/api/greet`
就是这样。我们创建了一个愚蠢的简单的 API，并带有一个有意义的消息。

## [](#conclusion)结论

无服务器基础设施很容易建立，像 Zeit 这样的提供商现在使这一过程对开发人员很友好。大部分工作都是自动化的，只需几个步骤就能完成。

现在就看你的了，无服务器函数内部会发生什么。
如果你有兴趣，现在查看更多关于[无服务器功能](https://zeit.co/docs/v2/serverless-functions/introduction/)的信息。