# 如何在 git 中返回到上一次提交

> 原文：<https://dev.to/projectpage/how-to-go-back-to-a-previous-commit-in-git-16o8>

你有没有不小心把错误的文件提交给 git，但是你还没有把你的提交提交到 origin，只是想整理一下？

一切都没有丢失，很容易恢复，尽管这样做的命令不是很直观。不幸的是，git 没有撤销命令，但是你可以使用 git reset 很容易地撤销它。

如果您想要添加一些文件或者编辑提交消息，您可以使用带有 amend 选项的 git commit:

```
git commit --amend 
```

这将把您已经排队的任何更改添加到上一次提交中(例如，您可能在提交的注释中看到了一个错别字)，并且它还允许您编辑上一次提交的提交消息。

如果您想去掉提交，同时保留对文件的更改，请使用带有 HEAD~的 git reset 来指示前一次提交，或者使用一个提交散列来返回到特定的提交:

```
git reset HEAD~ 
```

这将执行 git 索引的重置(但不是更改本身)。因此，您的文件仍然是原来的样子，但是 git 索引将被重置，您可以再次开始提交(进行修改，而不是添加所有文件等)。就好像你之前的承诺没有发生一样。

如果您提交了您只想丢弃的更改，并且您根本不想保留，您也可以进行硬重置:

```
git reset --hard HEAD~ 
```

或者，如果您想要删除一些提交，那么您想要保留的最后一个提交散列:

```
git reset --hard a1b2c3 
```

但是*注意，这可能会删除或更改文件*，并将所有文件的状态重置为之前提交的状态，所以要小心使用。通常你最好做一个软复位。

只有在没有将提交推送到原点的情况下才这样做。

如果您已经发布了提交，您应该发布另一个恢复提交，而不是重写历史(这会给其他人带来很多问题)。