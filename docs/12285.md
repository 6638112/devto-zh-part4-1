# 我被我们新的机器人吸尘器迷住了

> 原文:[https://dev . to/decudio ly/I-am-mersized-by-our-new-robotic-vacuum-10pc](https://dev.to/deciduously/i-am-mesmerized-by-our-new-robotic-vacuum-10pc)

免责声明:这是一个咆哮比什么都多。也许更多的# crazydudewontstotalkingavidthewatercooler，但这作为一个标签是不实用的。#help 部分在 TL 中；博士

我的女朋友(有点冲动)最近给我们买了一台新的机器人吸尘器。我们有这个想法已经有一段时间了，但我总是假设我们谈论的是至少 500 美元以上的购买，只听说过像 Roomba 这样的大牌品牌。多亏了贝佐斯勋爵，我们以不到 200 美元的价格买到了一台 Eufy robo vac 30 T1——从制造商那里只卖 270 美元，仍然比我预期的要便宜很多。这是一个被广泛认可的“预算”模型。我甚至不能让自己那么难过，这件事真的很酷。该死的，亚马逊，要戒掉你太难了。她唯一的其他购买？PS4 的战神。我要留下她。

我发誓我不是 Eufy shill，我甚至从来没有听说过这个品牌，我只是对我们的新机器人着迷。我不一定特别推荐这种模型而不是其他类似层次的模型。

我们在这个周末进行了它的首次运行，我完全被它迷住了。这个小东西非常聪明，比我预想的还要聪明，我浪费了一上午的时间跟在它后面，试图进入它的软件脑袋。我知道这些东西已经存在很长时间了，但我从来没有真正存在过足够长的时间来看它做它的事情，我对它做得如此彻底印象深刻。

这似乎是从非常简单的部分突现行为的一个很好的例子，我无法停止思考它。

我承认，我最初是一个完全的精英主义者。一些粗略的搜索让我相信，超级花哨的高端产品具有完整的映射功能，可以计算出我们的楼层地图并存储它，以有效地覆盖该区域，利用其布局知识来优化路径，而便宜的产品则在传感器周围瞎转悠，以完成相同的工作，但效率低得多，多次运行后可能只有 100%的覆盖率。与其说是普通手动吸尘的替代品，不如说是日常维护和润色的额外帮助。

我以前从来没有真正想过这个问题，所以当我们打开它时，我最初认为基本的模式是直线运行，直到它的保险杠撞到什么东西，然后尝试一个新的角度。冲洗，重复 X 次，地板最终会被清洗干净。每天或一周多次这样做，一周下来，你的整个地板都干净了。我们的公寓在布局上有点时髦，有相当大的面积，但有些地方有奇怪的隔断和角度，所以我想，如果没有一些存储的空间形状的图片，它不可能在一次 100 分钟的黑暗中拍摄风格的运行中合理地覆盖这个区域。

我欠整个行业一个道歉，这显然是一个严重的低估。我知道我应该更清楚，有所有这些不同的公司制造所有这些不同的模型。现在已经是未来了，人们还把一些*思想*投入到这个 even(尤其？)这个价位。

这件事教会了我如何完成工作。我甚至毫不惭愧地说，这可能是我们一年前搬进来以来最干净的地板了。仅仅通过非常简单的运动算法的有效应用，它就完成了任务，这简直是疯了。如果不是 100%，也差不多了。我最终还是跟着它走了一圈，或者在整个过程中在我的桌子上看着它(这感觉有点尴尬，是的，但我不能停止寻找)，我不相信一个地方没有被触及，即使它以一种非常迂回的方式到达那里。它甚至毫无怨言地爬上一个区域垫子，像冠军一样处理房间之间所有升高的门槛。

它可能只是比我们的手动真空吸尘器有更好的吸力，但这个特定的测量单位(1500Pα)对我来说并没有太大的意义。我无法告诉你一帕斯卡的吸力是什么感觉，也不知道另一个真空是多少。考虑到它这么小，我确实知道它做得非常好。

虽然在同一个领域，我没有一个超级花哨的模型可以比较，但这件事让我相信，更上一层楼可能甚至不值得，至少对我们来说。我想，如果我们有一座大厦，而电池寿命根本不够长，无法满足所有楼层的需求，那么为我们特定的住宅进行优化所节省的时间可能是有用的。然而，看着它四处游荡，我几乎相信它是在为空间做地图。

相反，手册和一些搜索表明，它只是根据传感器的数据，在几种模式之间循环。这一切都很模糊，但我认为这可能意味着它真的很简单。正如预期的那样，它开始向随机方向发射，当它探测到障碍物时就会转向。它还具有边缘跟踪模式，通过不断尝试低速右转来系统地跟踪边缘，以及从一个点螺旋出来的污点清洁模式。你可以明确地启用每种模式，或者让它自动循环，我认为没有理由不这样做。

我还低估了传感器的数量——它不像我想的那样只是一个大的前保险杠。它的侧面有一个红外传感器，底部有一个传感器用于检测水滴，还有一个磁性传感器用于检测你可以放置的条带，以防止它进入特定区域。红外传感器可能只是用于遥控，但我认为它也可能用于定位家庭基地，如果它不存储任何位置。

让我继续观察的是，这种简单算法的循环是如何设法覆盖所有以前没有覆盖的领域的。当我看着它的时候，我一直在想“哦，不，它不知道它刚刚错过了这里的整个角落”，看着它在某个随机的对角线上跑开了。实际上，我认为它会更有条理一些，在空间中画出之字形，但是不，这个东西都是随机的不相关的方向，这使它足够有趣(显然)。不可避免地，十到十五分钟后，房子里其他一些看似随机的轨迹会把它准确地带到它需要去的地方。它在每个房间的每面墙上和每个奇怪的角落里至少触发了一次边缘模式，在所有的椅子和餐桌下找到了几次浴室，找到了它能找到的任何地方，真的做了一件了不起的工作。我们从来不需要干预。

这些新向量的选择不可能是随机的。效果太好了。它们看起来肯定是通过某种先前对发现的边的理解而被告知的，但我的一个猜测是，它实际上只是随着时间的推移尝试一系列向量，以确保它达到一个大范围。我的直觉是，它实际上调得更好，但我不能从观看第一次运行来判断，我很想了解更多关于这个过程的信息。我也不知道这种行为是否特定于这种模式，其他人确实采取了更曲折的方法。理想情况下，我会尝试一下，但我还没准备好把第二个吸尘机器人带进我们的生活。我发誓，我没有那么过分。

据我所知，它没有存储在它找到边缘的特定位置，我确实注意到它重复了一些工作——例如，在 100 分钟的运行过程中，它有条不紊地沿着客厅的同一面墙移动了三次。如果它正在存储特定的边沿，它就不会这样做，所以它一定是刚刚感应到一个边沿并进入那个模式。

它必须被适当地校准以避免问题。例如，它必须知道进入边缘模式的频率，以便在不牺牲彻底性的情况下最大限度地进行探索，最大限度地减少重复工作。100 分钟的吸尘时间很长，但如果你一遍又一遍地在一面墙上浪费 20 分钟，时间就不会那么长了。然而，大多数时候它只是转过身去，有时它甚至会在撞到墙之前(我想)在它的任何传感器注意到它之前就已经预料到并转过身去了。如果它不记录任何东西，我也搞不清楚。尽管如此，它仍然可以在所有不同的墙壁上激活！

由于一个连接的门，我们保持关闭以利于空气流通，在机器人的世界里，我们的单元是 U 形的。我们在一些奇怪的地方摆放家具，还有一些大的开放区域和一些小的、更加破碎的非矩形区域。我们希望它覆盖的所有六个房间都有不同的形状和大小，并且由于角落和缝隙以及不同大小的壁橱，所有房间都有超过四面墙。大多数门口都是你的标准门大小，但客厅和餐厅通过一个大开口相连，几乎和墙一样宽，但不完全一样。这就产生了更多奇怪的棱角来迷惑它。在给定的时间限制内，即使事先有所了解，手工优化归档路径可能也不简单。

不知何故，令人惊讶的是，它只是以足够不同的角度穿过房间，覆盖了整个地板。有时它会在一个房间里呆一会儿，有时它会在两个房间之间定期来回移动，但当它进入低功耗模式并返回充电器时，它实际上已经到达了我在脑海中注意的所有地方。

当我担心它在离家太远的地方没电时，我甚至再次感到惊讶。我听到它进入低功耗模式，它在一个完全不同的房间里，面向错误的方向。它确实知道如何确定自己回家的方向，并试图到达那里，但在路上它撞到了长椅(所以，它没有预料到会发生这种情况)，并再次转错了方向。它甚至在没有视线的情况下，设法让自己朝着车站的方向，绕过搁脚凳直直地撞过去，然后慢悠悠地回到触针上。更好的是，这张直拍照片包括了一点边缘模式——我很高兴地看到即使在低功耗模式下仍然启用——沿着沙发的前边缘。我已经注意到未探索的边缘，这是唯一剩下的它没有做的！

好吧。够滔滔不绝了。重点来了。

## TL；速度三角形定位法(dead reckoning)

我被这种预算有限的机器人吸尘器看似简单的算法在清洁我们整个怪异空间的效率迷住了。我想尝试对问题进行建模，并自己实现运动算法，看看我是否可以用完全随机的输入来复制这种突发行为，或者它是否需要更多的调整，如果是的话，需要什么样的调整。我对这种编程没什么经验。你会用什么来探索这类事情？

我的工具箱中有一些通用的空间填充/路径查找算法，但我也知道有些环境比其他环境更容易进行这种建模。一些我听说过但不了解的选项:

*   [处理](https://processing.org/) - Java(我不是很懂 Java，但是在学 C++？差不多吧？)
*   [巨蟒龟](https://docs.python.org/3.3/library/turtle.html?highlight=turtle)——巨蟒。我对 turtle 一无所知，对 Python 也知之甚少，但听起来它可以用来探索这个问题空间。Python 似乎是一个很好的选择，但是我一点也不了解这个生态系统。
*   我猜是 HTML canvas 元素，但这听起来既笨拙又复杂。有没有你推荐的框架？
*   我知道 Rust 有一些地理空间板条箱和图像/图形板条箱用于可视化，但据我所知没有集成的用于易用性、实验性和一次性的。
*   游戏引擎？我从未使用过任何工具，这种类型的工具合适吗？对于 LUA 来说，Love2d 看起来可能是个不错的选择，但也可能有些矫枉过正。

...就这样，真的。还有什么我应该知道的吗？

还有，如果你对这些机器人吸尘器了解的比我多，能给我/我们启发，那就请吧！

照片由 Unsplash 上的摇滚猴子拍摄