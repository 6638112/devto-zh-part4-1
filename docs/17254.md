# 更好的代码评审实践

> 原文:[https://dev . to/leading-edje/better-code-review-practices-15nb](https://dev.to/leading-edje/better-code-review-practices-15nb)

代码审查是开发过程的一部分，在这个过程中，开发人员和他们的同事一起工作，在一些可能准备发布的代码中寻找 bug。在这样的时刻，你可以是代码开发人员，也可以是评审人员之一。

在这个过程的一方面，你可能不确定你在找什么。另一方面，当提交代码评审时，您可能不知道会发生什么。双方缺乏同理心和错误的期望会引发不幸的情况，并加快进程，直到以双方都不愉快的经历结束。

代码评审是实现更高质量代码、建立最佳实践以及传播经验和知识的强大手段。它还让开发人员向他们的同行学习，实践指导，并参与关于他们所构建的内容的公开对话和讨论。

然而，如果做错了，代码审查可能会一无所获，或者损害团队的人际关系。因此，关注代码审查的人的方面是很重要的。为了取得最大的成功，代码审查需要一定的思维模式和措辞。

我是这样组织的:

1.  我的代码审查经历。
2.  一般代码审查指南。
3.  作为开发人员的代码评审。
4.  作为评审者进行代码评审。
5.  应该由谁来审核？
6.  积极的代码评审文化
7.  代码审查的潜意识含义

## [](#my-experiences-)我的经历...

### [](#enduser-code-review-no-process)最终用户代码评审(无流程)

当我开始作为一名开发人员工作时，我记得没有代码审查过程。事实上，我得到的唯一评论是一个通知，当客户报告这个问题时，一些代码不能正常工作。我很快了解到 console.log 对 IE 的早期版本做了一些讨厌的事情。

### [](#everyone-stare-at-me-weekly-target-practice)大家都盯着我(每周打靶练习)

从这开始，我们的团队开始了一个非正式的每周流程，我们取一些代码，然后挤在我老板的办公室里审查它。多么痛苦的过程...必须在整个开发团队面前当场解释设计决策；或者更糟，试图用一种我不太熟悉的语言提出关于代码的智能问题。

### [](#everyone-reviews-learning-to-accept-criticism)人人点评(学会接受批评)

我合作的下一个团队有一个嵌入到提交和生产过程中的评审过程。默认情况下，团队中的每个人都包括在这个过程中。Gerrit 中的工具实际上使过程变得更加简单和直观；事实上，我们能够将一个组放入 Gerrit 中，这允许我们简化添加人员作为评审者的过程。

我的代码被推送的最初几次，代码审查是痛苦的(不知道会发生什么)...我坚信我学到的关于代码评审的知识几乎和我为项目本身生成代码一样多。

### 一个人怎么会如此擅长这个？

我们的团队中有一位出色的评审员，他不仅对代码有着独到的见解，还以一种让人感觉轻松的方式来管理代码。因为这种互动，我花时间研究如何重复这种类型的努力(无痛部分...我所知道的见解会随着时间的推移而来)。

## [](#code-review-guidelines)代码评审指南

这些指导方针来源于代码评审应该完成的事情。不可能制定出适用于所有情况的指导方针。记住这些目标将有助于实现代码评审的“精神”,即使出现了这些指南没有涵盖的情况。

代码评审应该:

1.  验证代码对于手头的需求是一个正确有效的解决方案。
2.  确保代码是可维护的。
3.  增加代码库的共享知识。
4.  通过定期反馈提高团队技能。
5.  不是开发人员时间上的繁重开销。

## [](#as-a-developer)作为开发者

对于作为开发人员(或“作者”、“提交者”)的您来说，对您将收到的反馈保持开放和谦逊的心态是很重要的。

任何人都可以做代码评审，每个人都必须接受代码评审；不管资历高低。感激地接受任何反馈，把它作为学习和分享知识的机会。将任何反馈视为公开讨论，而不是防御性反应。

我们是人类。而且，人类也会犯错。这是完全正常的。只要软件是人写的，就会包含错误。

这并不意味着您应该漫不经心地编写代码或者停止编写测试。但这种心态会带走对错误的恐惧，营造一种犯错被接受的氛围。反过来，这对于接受代码评审期间的批评是很重要的。

### [](#exchange-of-experience)交流经验

在代码评审期间，开发人员和评审人员正在交流最佳实践、经验、技巧和诀窍。

开发人员和评审人员不仅仅是在谈论代码...他们正在交流最佳做法和经验。代码评审是建立和内化好的编码风格和最佳实践的一个很好的方法。这种交换是双向的。因此，将代码评审视为有价值的知识来源和学习机会。

## [](#as-a-reviewer)担任审核人

定位要改进的代码是成功的代码评审的一小部分。同样重要的是，通过对同事表现出同理心，以健康的方式传达反馈。

作为评审者，注意反馈的具体语言是极其重要的。措辞对于您的反馈被接受至关重要。

> **对:**“我很难**看出这段代码在做什么。”
> **错:**“你写的是加密代码。”**

通过表达个人的想法、感受和印象，始终从个人的角度来阐述反馈。代码开发人员很难反驳个人感受，因为它们是主观的。

在提交评论之前，请记住设身处地为他人着想。这太容易被误解了，所以回顾评论，永远保持尊重...对别人说好话从来都不是一个坏决定。

### [](#take-the-developer-out-of-the-feedback)拿出开发者的反馈

把开发者带出反馈；只谈开发人员提交审查的代码。对代码的批评很难针对个人，因为你只是在谈论代码，一个客观的东西，而不是开发人员。同样，这将提高接受度(只要开发人员明白它们不是他们的代码)。

### [](#nonjudgmental-collaboration)非判断式协作

整个团队的态度和行为应该拥抱**非评判式协作**，以学习和分享为共同目标；不考虑经验水平。

### [](#accept-there-are-different-solutions)接受有不同的解决方案

记住，一个问题总有不同的解决方案。很可能你有一个最喜欢的解决方案，但是开发者的解决方案也可能是有效的。区分常见的最佳实践和个人品味。请记住，怀疑主义可能只是反映个人品味，而不是不正确的代码。

### [](#remember-praise)记得表扬

完全可以说:“一切都好！”。 ***没有代码变更*** 是代码评审的有效结果。不要强迫自己去寻找代码中的错误。

最后，但同样重要的是:如果代码很好，不要忘记表达谢意。表扬不会有坏处，而且可能会激励开发人员。

## [](#who-should-review)谁应该审查

依我拙见，团队中的每个人都应该参与代码评审。简单地从学习的角度来看，每个团队成员至少可以看到发布描述。当我很忙的时候，我会简单地检查一天中所有评论的评论。通过观察，我能够看到发生了什么变化。当我有更多的时间时，我是一个积极的评审员，试图帮助改进代码库，一次一个评论。

## [](#foster-a-positive-code-review-culture)培养积极的代码评审文化

由同事完成的代码审查会给团队的人际关系带来压力。让同事来评论工作是很困难的。因此，为了让同行代码评审成功，管理者在代码评审过程中创造一种协作和学习的文化是极其重要的。

虽然很容易将已识别的缺陷视为纯粹的负面影响，但是发现的每个 bug 实际上都是团队提高代码质量的机会。代码评审也允许初级团队成员向高级领导学习，甚至让最有经验的程序员改掉坏习惯。

在代码评审中发现的缺陷不应该被用来评估团队成员。如果评审度量标准成为报酬或晋升的基础，开发人员将会对该过程产生敌意，并自然地关注于改进个人度量标准，而不是编写更好的整体代码。

## 拥抱代码评审的潜意识含义

知道别人会检查他们的工作自然会驱使人们生产更好的产品。这种“自我效应”自然会激励开发人员编写更干净的代码，因为他们的同事肯定会看到。如果你的代码将要被审查，这是一个非常简单的激励去仔细检查你的工作。

## [](#conclusions)结论

代码评审是实现更高质量代码、建立最佳实践以及传播经验和知识的强大手段。它还让开发人员向他们的同行学习，实践指导，并参与关于他们所构建的内容的公开对话和讨论。

为了取得最大的成功，代码审查需要一定的思维模式和措辞。因此，关注代码评审中人的方面是极其重要的。

## [](#leading-edje)领先 EDJE

 [![Smart EDJE Image](../Images/a18d2ed822f0d27bf0442cb281f40c56.png)](https://dev.to/leading-edje)