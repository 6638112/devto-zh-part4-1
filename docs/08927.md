# 你的代码有很多安全和性能问题，他说...

> 原文：<https://dev.to/slavius/your-code-has-lots-of-security-and-performance-issues-he-said-24c7>

## 简介

最近，我们为我们的团队聘请了一名外部自由职业者来帮助完成后端服务器项目。Net 核心和 PostgreSQL 数据库服务器。我们的解决方案由许多项目组成，包括基于 MQTT 协议的服务器、线程 TCP 服务器、计算/处理引擎和公共 rest API。

仅仅两周之后，这个人突然改变了态度，说他对项目中的安全和性能问题太不满意了，所以他已经决定离开。当面，我们从未设法从他那里得到他所指的问题的清单。不幸的是，我们不得不威胁他，除非他能为自己的主张提供一些证据，否则就不给他的作品付款。我们太害怕我们的项目遭受一些我们忽略的问题，如果他有专业知识和经验给我们建议，我们只是想知道。

几天后，我们收到了一封电子邮件，感谢我们的合作，并简要列出了这个人对我们项目的安全性和性能感到不可接受的困扰。这是一份未经编辑的电子邮件摘录:

> 首先，你不应该担心安全问题。我只是笼统地告诉你。但是我强烈建议你在代码和数据库上遵循这些变化，以获得更好的质量。(这只是一个帮助)
> 
> 1.  我猜我们可能用 HTTPS 把数据从 GUI 传输到 API 服务器，但是这还不够。因为一个人可以很容易地用 DNS 欺骗获得 SSL 证书并监听包。所以第一件事是，我们发送我们的密码登录或任何其他交易作为一个纯文本，然后我们只会在数据库上加密它。当我们想要发送类似登录功能的请求时，我们还必须在客户端使用另一种 salt 或另一种类型的加密来加密密码。(为不同的顾客推荐不同的盐)
> 2.  3 char 用户密码真的很短。因为通过身份验证尝试攻击，一个人可以在短时间内找到密码，建议至少 7 或 8 个字符
> 3.  此外，我们应该防止身份验证尝试，例如，在一个用户尝试 10 次后，我们会阻止该用户。
> 4.  还有一点可能不是很重要，但你要知道，有一种叫做中间人攻击或欺骗的东西，在这种情况下，为了防止任何问题，最好验证对服务器的任何请求。例如，在项目/添加中，我们只检查主体。设备不为空，那么我们做我们的过程，但想象一下，如果身体。设备真的不为空，并且包装上的数据不是正确的数据。这种类型的数据可能会损坏数据库数据或添加一些无效值。对于这一项，因为你通常了解你的客户，这不是一个重要的问题。但还是很重要。
> 5.  在数据库中，我发现了许多非索引字段，如表 ProjectDevices 中的 Group。(性能可以更好)
> 6.  关于 API 头中的令牌，我建议你在发送时加密它。
> 7.  也因为更好的安全性，我建议使用节点到节点的客户端证书(x509。证书认证)

我决定亲自检查列表，检查、调查并最终解决每一点中的问题。通读之后，我意识到这个人只是缺乏知识，他描述的威胁并不真实。

我决定在单独的文章中对每一点都写一个详细的解释，这样当你在你的项目中工作时，你会发现其中的一些是有用的，你理解了这些主题，并且你没有错过任何关于安全性和性能的东西。

敬请关注。