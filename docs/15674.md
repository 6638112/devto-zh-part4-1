# WSL 2.0:更多的好果汁

> 原文：<https://dev.to/hamza/wsl-2-0-more-of-the-good-juice-3eko>

*本文原载于[我的博客](https://hamza-tam.gitlab.io)。*

微软在它的上一个微软版本中发布了重大公告。已经发布了许多面向开发人员的令人兴奋的新产品。虽然人们的主要注意力集中在新的 windows 终端上，一个具有许多期待已久的增强功能和新的 VS 代码功能的终端，但吸引我注意力的是针对 Linux 的 Windows 子系统的改进，即所谓的 T2 WSL 2.0 T3。

# 为什么您会对 WSL 2.0 感到兴奋

## WSL 1.0 太神奇了

当我在 Linux 上进行整个开发工作时，主要是 Xubuntu 和 Arch，我不得不总是将它安装在 windows 的旁边，因为 Linux 不支持我几乎每天都在使用的许多工具(特别是游戏)。但是在发现 WSL 之后，一切都变了，我突然发现自己可以把自己的开发工作完全迁移到 windows 上，除了一些用 C 进行的系统开发，生活在 *CMD* 里面(我试过很多 windows 终端模拟器，但是我一直发现 *CMD* 是最好的一个，有什么建议吗？).

WSL 1.0，除了它的一些限制，比如不能安装很多 Linux 应用程序或者它的速度非常慢，在实现它给我们的承诺方面是相当成功的；一个基于 Windows 的 Linux 开发环境。

## WSL 2.0 哪里会更好

### WSL 1.0 的大问题

对 WSL 1.0 最大的抱怨是它的速度太慢，一些命令需要很长时间才能完成，而它们本应该只需要几秒钟。这是由于 WSL 1.0 引入了兼容层，这个层的作用主要是将 Linux 系统调用转换成 Windows 系统调用，所以它没有发现 Linux 内核的用处。

### WSL 2.0 解决方案

解决方案非常简单和明显，将 linux 内核直接安装到 Windows 中，让它来完成这项工作。这是 WSL 团队取得巨大成功的工程壮举。所以现在程序运行起来就好像它们运行在 Linux 内核上一样，因为它们最终做到了。这将使许多使用兼容层无法运行的工具能够运行，最显著的是 **Docker** 。

## 它是如何工作的

Linux 内核运行在一个非常轻量级的虚拟机中，所有的 WSL 实例都将在其上运行。这对 WSL 的性能有着不可思议的影响。由于只有一个带有内核的虚拟机实例在运行，所以拥有大量 WSL 实例不会导致性能大幅下降，包含内核的虚拟机的轻量级特性更突出了这一特性。

除此之外，WSL 团队放弃了他们对文件使用的奇怪的兼容层，而是直接在 WSL 中使用本地 Linux 文件系统，这样文件系统的性能得到了显著的增强。

这并不意味着你不能直接在 windows 上访问你的文件，反之亦然，他们使用网络协议在 Linux 和 Windows 之间共享文件。这种方法通过使用 Samba，使用 vagger 来访问客户机中主机文件系统的某个部分，但是这次使用 WSL 2.0，您可以通过两种方式进行访问。

## 结论

有了 WSL 2.0，Windows 给了我们更多 WSL 1.0 带给开发者社区的美好体验。这是一个令人印象深刻的成就，不仅因为它使 Windows 用户能够做什么，而且因为它代表了不可思议的工程壮举。如需更多信息，您可以查看 WSL。

如果您有兴趣了解更多信息，我邀请您观看 [WSL 团队主题演讲](https://www.youtube.com/watch?v=lwhMThePdIo)。