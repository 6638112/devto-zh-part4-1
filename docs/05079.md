# 早上好

> 原文：<https://dev.to/gelopfalcon/buenas-practicas-en-docker-1ac0>

## 如何保持你的形象小

启动容器或服务时，较小的映像从网络中提取的速度更快，加载到内存中的速度更快。以下是保持图像较小的一些常规规则:

*   从适当的基础映像开始。例如，如果您需要 JDK，请考虑将其映像基于正式的 openjdk 映像，而不是从 ubuntu 的通用映像开始，并将 openjdk 作为 dockerfile 的“
    ”部分进行安装。

*   使用多层构建。例如，您可以使用 Maven 映像构建您的 Java 应用程序，然后重置 Tomcat 映像并将 Java 对象复制到正确的位置以部署您的应用程序，所有这些都位于同一 dockerfile 中。这意味着您的最终映像不包括编译时提取的所有库和依赖项，而只包括运行这些库和依赖项所需的对象和环境。

*   如果您有多个共用许多影像，请考虑使用共用元件建立您自己的基础影像，并以此为基础建立您自己的独特影像。docker 仅需要加载一次常用图层，并对其进行缓存。这意味着您的派生映像在 Docker 主机上使用内存的效率更高，加载速度更快。

*   构建映像时，请始终使用有用的标签来编码版本信息、预期目标(例如 prod 或测试]、稳定性或其他在不同环境中部署应用程序时有用的信息。不要信任上次自动创建的标签。

## 何时以及如何继续应用程序数据

*   避免使用存储驱动程序将应用程序数据存储到容器的写层。这增加了容器的大小，从 I/O 的角度来看，效率不如使用卷或链路装载。

*   而是使用卷存储数据。

*   在开发过程中，可能需要装载源目录或您刚构建的归档文件二进制文件时，可能需要使用挂接。对于生产，请改用卷，将其移动到开发过程中装配联接部件的同一位置。

*   对于生产，使用`secrets`存储服务使用的敏感应用程序数据，并使用配置文件等非敏感数据的配置。

## 开发和生产环境的差异

| 德萨罗洛 | 1 .生产 |
| --- | --- |
| 使用 bind mounts 授予对容器源代码的访问权限。 | 使用卷存储归档数据。 |
| 使用 Mac 的 dock desktop 或 Windows 的 dock desktop。 | 如果可能，请使用 Docker Engine - Enterprise，并映射用户，以进一步隔离主机进程中的 Docker 进程。 |
|  |  |

感谢您的关注，我们正在作出巨大努力，使讲西班牙语的社区也能与内容合作。我邀请各位在 twitter 上关注我，也邀请各位关注像 gdg pura vida 这样的社区，在那里，定期为社区举办免费活动。