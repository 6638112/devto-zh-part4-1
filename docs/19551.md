# flutter——Google 的开源跨平台 UI 工具包

> 原文:[https://dev . to/tomavelev/flutter-Google-s-开源-跨平台-ui-toolkit-5ha](https://dev.to/tomavelev/flutter-google-s-open-source-cross-platform-ui-toolkit-5ha)

Flutter 是谷歌的开源项目，混合了多年来购买或内部创建的其他几个谷歌开源项目，以及公共开源库和开发方法，不归谷歌所有，而是开源的，目标是为开发人员提供工具和框架，为所有大型用户界面平台创建图形用户界面。我将解释它是关于什么的，这个工具包的一些优点和缺点，比较，关于它的个人意见。演示-[https://www.youtube.com/watch?v=EWU5R7_12wI](https://www.youtube.com/watch?v=EWU5R7_12wI)-这是一个从互联网上读取内容并在移动设备上显示的应用程序。它可以在 Android 和 iOS 上运行，完全不需要修改代码。由于插件在这些平台上还不被支持，同样的代码也可以作为桌面应用程序和 Web 前端应用程序运行。

它试图遵循这样的思路——编写一次——为平台 X 编译(不做任何修改)—运行。而且它似乎做了工作，至少足够接近。

为什么够近？

首先是因为插件。有一些由 Flutter 团队编写的插件很可能是最新的，与 SDK 的最新版本和目标平台的最新版本兼容，并且即使不是 100%，也将接近所有目标平台。而不好的——社区写的开源插件——哪个平台支持哪个库，支持哪个版本？这是所有跨平台和混合框架共有的问题。其他替代方案有时间和更大的社区带来的好处，它们为框架带来了所需的特性，但是时间也对它们不利——不断变化的原生框架和它们对原生框架的依赖性。

第二，因为输入方法和设备。Flutter 将尝试瞄准许多平台。与移动设备的交互是通过手指、手写笔、语音、接近传感器进行的，较少使用鼠标或键盘。台式机、笔记本电脑、上网本主要通过鼠标和键盘访问，很少使用其他输入设备，如鼠标、绘图板等。安装了一些更复杂操作系统(Android、iOS 或第三方)的电视也配有红外遥控器。除上述设备之外的其他设备——物联网设备，理论上可能有各种非标准的输入方法。

为了能够感觉像是所有平台的原生代码并且实际上是有用的，唯一的源代码必须是广泛完整的——处理不同的交互——悬停/鼠标悬停、选择、拖动、多点触摸、特殊键，如 alt、control、escape、箭头键等等。但是即使不是所有的事件都被处理了，使用 Flutter 所能完成的统一的数量也是令人印象深刻的。当然，如果为你的商业案例定制的其他东西都有效的话。

这一切是如何发生的？你可以观看谷歌团队的演示。https://www.youtube.com/watch?v=IyFZznAk69U:我会马上为你介绍一些细节。

Flutter 有两层——您将使用的公开的 Dart API 和它下面的 Flutter 引擎。

skia——开源图形库 Chrome 中使用的 C++框架——10 多年前由谷歌购买并开源。它被移植到所有主要的系统上，它为 Google 和外部开发者提供了一个基础，让他们可以在它之上创建东西，并能够为不同的操作系统打包本地包。Chrome 当然是这个框架的顶级客户端。当你成功了，你就扩展它。这就是为什么他们用它来建造 Flutter。这将直接和间接地改善 Skia 本身，因为反馈，因为它都在谷歌的帽子下。

除了 SDK 和插件社区之外，(客户端)开发人员大多使用 Dart 编程语言进行编程。它类似于 Swift、TypeScript、Kotlin、C#等等。UI 构建与 JavaFX 声明式 UI 和新的 SwiftUI 非常相似。

Dart 代码在开发过程中被解释，并在开发过程中插入一个小层——因此在较旧的设备上，有时在编码过程中可能会感觉有点慢，因为本机应用程序中有虚拟机，以及 Dart 到 JavaScript 解释器——用于 Web 的附加层。你的代码提前编译成本地代码，再编译成本地应用程序的代码或者网络版的 JavaScript，所以在生产中应该会快得多(希望 Flutter 或者 Dart 团队也能跳到 WebAssembly 这样最终的代码会更快)。

如果您在过去五年中开发过任何商业应用程序，Dart 会让您感觉很自然，学习曲线会很短。您将拥有所有预期的特性——空检查操作符、面向对象的范例(如封装、继承、类型模板化)、功能性/反应性 API(如 Future)、流、参数默认值、混合/扩展函数等等。

Flutter 团队已经构建了一些材质小部件(Appbar、TabBar、(导航)抽屉、按钮、选取器、警告对话框、SnackBar)和一些 iOS (Cupertino)小部件(ActionSheet、Dialog、选取器、选项卡、工具条等)，这些小部件与这些平台上可用的原生组件相匹配。还有一些你应该知道的常用小部件，这样你就可以按照你喜欢的方式排列了——行、列、图像、填充、文本、图标。也是为了利用屏幕空间——有灵活的、可扩展的小部件和一个 MediaQuery API，所以你可以在不同的屏幕方向、大小等上显示不同的东西。

Flutter Mobile 在 2018 年底被标记为准备生产。它目前有一个稳定的版本 1.5。你，作为 Dart Flutter API 里的一个 app 开发者代码。对于产品，所有代码都被转换、翻译和编译成本地二进制。Web 的 Flutter 目前处于“技术预览”阶段。许多插件目前还没有移植到网络上。谷歌开发人员有很多为网络反编译的经验——谷歌网络工具包使用 Java，Angular 使用 TypeScript(由微软开发)。现在 Dart 语言-内部开发和开源。

Flutter 为 web 工作所需要的是重新实现 Dart 中的小部件，以便为 web 生成适当的标记/ JavaScript/绘图。一旦一切稳定下来——所有的 flutter 代码都将神奇地在 web 上运行，无需修改。

用于桌面的 Flutter 仍然处于非常早期的开发阶段。这个想法和在网络和手机上是一样的。对于 ChromeOS，下面的层理论上可以更薄，因为它是由谷歌开发的。ChromeOS 支持 Android 应用——这是 Flutter 的目标平台，而且操作系统本身也是由 Skia/Web Engine 制作的 Chrome。

对于一个适用于所有主要平台的桌面应用程序来说——下面一层必须是特定于平台的——Linux、Windows、MacOS。他们会尝试重用 Chromium 的代码和开发经验来让它飘起，但仍然。一切都需要触摸和调整才能正常工作，这不是一件容易的事情。

用于嵌入式设备的 Flutter 尚未准备好投入生产。我们需要的是在 Flutter SDK 之下为具体的嵌入式目标实现的层(可能是映射桌面环境相同功能的 C/C++代码)。[https://github . com/flutter/flutter/wiki/Desktop-shell # tooling](https://github.com/flutter/flutter/wiki/Desktop-shells#tooling)。
有一些爱好者已经将 Flutter 移植到了 Raspberry Pi:[https://medium . com/Flutter/Flutter-on-Raspberry-Pi-mosely-from-scratch-2824 C5 e 7 dcb 1](https://medium.com/flutter/flutter-on-raspberry-pi-mostly-from-scratch-2824c5e7dcb1)所以这一切都是时间问题。

如果你需要一些本地功能，你可以自己写一个插件。目前官方支持 Android 和 iOS:

https://flutter . dev/docs/development/platform-integration/platform-channels
这是一个简单的过程——你注册一个插件通道 ID，它类似于一个套接字或远程程序代码。然后，从 Flutter 代码中执行函数 X 并期待结果 y。在移动本机端，当收到方法调用 X 时，您执行一些操作并返回 y。由于代码的异步/反应性质，您不会阻塞代码的用户/工作流。

目前还没有来自 Flutter 团队的官方 UI 构建器，但社区足够强大，甚至有一些付费、免费或开源的选项——Flutter Studio、Meta Flutter App、Widget Maker。此外，如果你搜索得足够多，你可以找到很多流行应用程序代码的 Flutter UI 克隆，以及一些很酷的 UI 的源代码。

有很多选项可供选择——Flutter、Xamarin、React Native、NativeScript、Ionic、Cordova，还有更多免费和付费平台。如果你不是被迫使用具体的框架——你应该选择你更喜欢的，最了解的，这样你就能更快地产生一些东西，如果你的东西是好的，你就能收到来自世界的反馈。

颤振与其他颤振相比，有一些相似之处，也有一些不同之处。它有一个以状态为中心的方法，当状态改变时，UI 会重新呈现——类似于 React Native。与所有其他平台类似，它具有快速重装/热重装功能。在不久的将来，它将像 Xamarin 一样，不仅仅针对移动平台。这将是一个插件地狱，非常像其他平台，随着时间的推移，它可能会改善感谢社区。

另外，Flutter 不使用本机窗口小部件——它自己绘制它们。这有利有弊。不依赖他人通常是件好事。没有外在的改变会打破你的东西。但与此同时，你必须自己开发、测试、验证用户习惯的所有本地组件的克隆。由于 Flutter 代码被编译成二进制代码，因此不通过市场升级应用程序目前是不可行的，因为用本机代码实现这样的功能很棘手。速度原因导致的颤振结果在生产模式中不被解释。

谁使用它？谷歌、阿里巴巴等等。我给你展示的是我的应用程序“你吃什么”在 Flutter 中重写的进展。

归根结底，“开源”只是吸引开发者的一个标签。让 it 以开发者为中心——因为开发者，开发者，开发者——是成功的关键。看看华为发生了什么。你给了别人使用的可能性，而不用为你创造的东西付费，但这些用户大多是技术人员。最终支付账单并支持任何项目的受众是非技术性的大多数。因为——开发人员社区的一些人喜欢我的/你的/open/的虚幻抽象，他们付出时间、反馈、为项目做贡献，很多时候没有报酬，这就是如何扩大不可扩展的——人力。