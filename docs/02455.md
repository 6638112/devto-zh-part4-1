# 原始 SQL 迁移库

> 原文：<https://dev.to/grahamsutton/raw-sql-migrations-library-3a1h>

在我目前工作的地方，我们操作的主要是 PHP 和 PostgreSQL。我们的框架是用 ZF1 编写的(它是遗留的)，并且我们保持数据库变更版本受控的部署过程非常繁琐和复杂。

工作之外，我喜欢使用 Laravel 和 Rails 之类的框架，我非常喜欢这两个框架的一个特性就是迁移。由于我们工作中的遗留应用程序没有这个概念，我开始想办法采用这种现代方法，并将其应用到我们的遗留应用程序中。

由于我们无法将我们的整个应用程序转换到这些框架中的一个(这将是一个重大的改革)，我研究了一些选项，如 Phinx 和 Flyway，以进行可能的集成，但这些选项与我们的应用程序并不真正兼容(出于各种原因，它们应该有自己的帖子)。

在我们公司，我们大量使用 PostgreSQL:复杂的过程、触发器、视图、多模式、数据仓库等...我们用它来驱动一切。许多迁移类型的库通常有一些抽象层，这些抽象层并不真正支持所有这些数据库特性。例如，Rails 迁移是用 Ruby 编写的，然后在执行前转换成 SQLLaravel 和 PHP 也一样。这并不是一件坏事，但是这些类型的抽象并不真正支持广泛的数据库特性(尤其是过程),并且通常仅限于创建表、索引和约束。

因此，我决定给自己一个任务(主要是为了好玩),尝试构建一个可以在原始 SQL 上运行的迁移库，瞧，我实际上有了一个简单的概念！底层 CLI 是用 PHP 编写的，但是您用原始 SQL 编写和执行迁移。

我想也许很多其他人可以从这样一个库得到一些使用，所以不久前我把它放在了 GitHub 上，但从未真正与任何人分享过它的存在。所以今天，这就是我正在做的。

我真的在寻找那些愿意帮助我做得更好的人。我认为这是一个好的开始，但我知道一个真正伟大的工具不是由一个人独自打造的。请随意批评、表扬或投稿！

出埃及记迁徙图书馆:[https://github.com/grahamsutton/exodus](https://github.com/grahamsutton/exodus)