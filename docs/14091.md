# POP 基于云的安全服务

> 原文：<https://dev.to/wegotpop/pop-s-cloud-based-security-services-43ej>

作为我们通用安全自动化工具包的一部分，我们使用了许多第三方基于云的服务，这些服务使我们能够利用这些合作伙伴的专业知识和专长。

我们使用的服务是:

*   可能地
*   幽灵检查员
*   建筑风筝
*   哨兵

## 尝试

[很可能](https://probely.com/)是一种安全扫描服务，提供各种不同的扫描。闪电扫描检查端点的基本问题，我们在工作日开始和结束之前针对生产和试运行环境运行这些扫描。

我们使用 OWASP 扩展来进行更深入的扫描，并且每周运行几次。这种扫描更类似于人工渗透测试(该过程中存在人为因素，因此它不是完全自动化的)，当我们被要求提供上次渗透测试的结果时，我现在提供 Probley 报告的最新 PDF 导出。到目前为止，这让审计人员和研究人员很高兴。

当我们第一次运行 Problely 时，它在我们的 AWS 和应用程序设置中发现了一个问题，我们认为获得一份清晰的报告很重要，因此我们解决了这个问题，通常我们会在发现问题的两周内解决它提出的任何问题。但是最近我们发现很少有可能的客户在他们的扫描中没有问题，客户也同样怀疑。如果我知道这一点，那么我可能会保持在一个低优先级的问题。

在纠正了各种 HTTP 代理问题之后，现在最致命的问题可能就是我们的 XSS 风格问题了。这改变了我们现在使用功能的一些方式。

## 幽灵探长

我们开始使用 [Ghost Inspector](https://ghostinspector.com/) 作为改进我们的集成测试的一种方式，并删除了一些发生在我们的测试运行系统中的无头测试。

在捕捉回归方面，它是一个非常有用的工具，如果没有它或类似的系统，那就太可怕了。现在，我们很少将一个回归一直发布到产品中，我们不得不还原它。绝大多数都是在测试过程中被抓的。

Ghost Inspector 允许您通过浏览器插件捕获测试场景，但最终的 CSS 选择器往往非常具体和脆弱。如果你真的自己编程这些步骤，这个系统就会发挥作用。

测试步骤可以被抽象成模块并重新共享。该系统有一个相当不错的截图比较工具。运行和失败的完整历史(再次提供了很好的审计跟踪)。测试运行期间发生的事情的视频是可用的。它还提供了一个假的电子邮件系统，这是我们认为我们必须自己建立的东西。

Ghost Inspector 改变了我们现在开发系统的一些方式。我们有专门设计的屏幕向 Ghost Inspector 显示信息以供验证。我们已经大规模地改进了 DOM 的结构，使其更具机器可读性。

我们的代码中也有一些经典的热点，如用作页面参数的主键，在这里很难切换到不透明的标识符，因此我们使用回归测试，尝试通过直接访问来访问不同的页面，以确认访问控制系统是否按预期工作。这是唯一的方法，除非大规模重写，我们可以保证这个潜在的安全漏洞实际上不是一个问题。

我们还发现，我们的许多客户在检查我们平台的漏洞时都使用手动测试流程。当他们发现错误时，他们经常分享他们的过程，我们已经能够将这些变成 Ghost Inspector 测试。我们已经能够基于与我们合作过的不同公司的不同专业知识建立一套测试。这就像是我们这边有一个虚拟安全研究人员的小团队！

## 建筑风筝

Buildkite 是将我们所有的自动化粘在一起的粘合剂。虽然被宣传为持续集成(CI)平台，但它实际上是一种通用的任务自动化系统，可用于任何类型的预定或触发任务。

Buildkite 确实管理我们所有的 CI 构建，但它也处理我们的预生产环境的部署、刷新和其他任务。

在其管道内，它将部署软件，然后使用 Ghost Inspector 并验证部署的结果。

在我们切换到 Buildkite 之前，我们使用的是[Jenkins]。这是一个值得尊敬的工具，但是对于我们来说，运行我们自己的 CI 服务有两个主要问题。

首先，事实是有效地运行詹金斯是困难的。它依赖于文件系统访问，为了获得可审计的控制，你需要运行需要更新和维护的插件，管道功能是系统的后期添加，而不是核心元素。

其次，在参加了几次 secops 会议后，很明显 Jenkins 是他们寻找 bug 奖金时的首要目标之一(排名第一的是 Wordpress，这并不奇怪)。

这意味着我们有一个高调的目标，我们对自己的能力没有信心。由于没有使用 Jenkins，许多“路过”黑客将会忽略你，并转移到其他有此功能的组织。我们需要做出改变。

Buildkite 与 CircleCI 等 CI 系统的一个关键区别是，您可以将自己的代理带到 Buildkite。我们可以在自己的 AWS 帐户中运行作业，并将自己的安全策略分配给代理。这意味着我们可以选择完全隔离一个代理群集，而不会影响向需要大量权限的 ECS 进行部署的群集的特权权限。

如果我们想要的是纯 CI 或轻量级自动化，并且回购的内容是低风险的，我们也会使用 CircleCI。

## 哨兵

Sentry 主要是一个异常报告和聚合服务。然而，因为它还记录了团队中谁查看了异常，这意味着它可以用于确认您对系统中发生的错误进行了定期检查。

无论如何，您可能都应该使用错误聚合服务，但是值得看看如何使用它们来提供一种实现安全目标的方法，例如，显式忽略常见但不相关的错误，并寻找意外问题。