# 使用“gradle.properties”配置 Gradle

> 原文：<https://dev.to/jmfayard/configuring-gradle-with-gradle-properties-211k>

使用[https://gradle.org](https://gradle.org)作为你的构建工具？请继续阅读。

我发现`gradle.properties`文件是 Gradle 的一个很好的部分。

难的是找到这些信息的概述:你可以创建自己的设置，Gradle 有自己的，Kotlin 有自己的，Android 有自己的，...

所以我想我会提供所有这些的概述。

在您阅读文档以了解它的作用之前，您不应该添加设置。这就是为什么我每次都添加文档的链接。

# 文件`gradle.properties`

友好的毕业生医生告诉你

> 在 Gradle 中，属性可以在构建脚本、gradle.properties 文件中定义，或者作为命令行上的参数定义。对于特定的场景，在命令行上声明属性是很常见的。例如，您可能希望传入一个特定的属性值来控制运行时行为，只针对这一次构建调用。构建脚本中的属性很容易成为维护难题，并使构建脚本逻辑变得复杂。gradle.properties 有助于将属性从构建脚本中分离出来，应该作为一个可行的选项来研究。这是放置控制构建环境的属性的好位置。
> [https://docs . gradle . org/current/user guide/organizing _ gradle _ projects . html # declare _ properties _ in _ gradle _ properties _ file](https://docs.gradle.org/current/userguide/organizing_gradle_projects.html#declare_properties_in_gradle_properties_file)

# 放在那里自己设置

首先你可以用它来放置你自己的设置。例如，如果你有一个 Android 项目，你可以放在那里

```
## gradle.properties 
# Common Android settings android.compileSdkVersion=28
android.applicationId=com.example
android.targetSdkVersion=28
android.minSdkVersion=21
android.versionCode=2
android.versionName=1.2 
```

Enter fullscreen mode Exit fullscreen mode

然后你可以一直重用同一个`app/build.gradle`片段

```
android {
    compileSdkVersion rootProject.findProperty("android.compileSdkVersion") as Integer

    defaultConfig {
        targetSdkVersion findProperty("android.targetSdkVersion") as Integer
        minSdkVersion findProperty("android.minSdkVersion") as Integer
        applicationId findProperty("android.applicationId")
        versionCode findProperty("android.minSdkVersion") as Integer
        versionName findProperty("android.versionName")
    }
} 
```

Enter fullscreen mode Exit fullscreen mode

# 放置您的依赖版本

这是我的 Gradle 插件自动为你做的:

```
## gradle.properties 
# Dependencies and Plugin versions with their available updates
# Generated by $ ./gradlew refreshVersions
# You can edit the rest of the file, it will be kept intact
# See https://github.com/jmfayard/buildSrcVersions/issues/77 plugin.com.github.ben-manes.versions=0.25.0
plugin.de.fayard.buildSrcVersions=0.6.1
version.com.android.tools.build..gradle=3.5.0
version.play-services-location=17.0.0
version.bottom-navigation-bar=2.1.0
version.lifecycle-extensions=2.0.0
#                # available=2.1.0 version.org.jetbrains.kotlin=1.3.31
#                # available=1.3.50 version.appcompat=1.1.0-rc01
#     # available=1.1.0 version.cardview=1.0.0
version.core-ktx=1.0.2
#    # available=1.1.0
# .... 
```

Enter fullscreen mode Exit fullscreen mode

阅读位于 [gradle :refreshVersions”的文档，生成包含版本和可用更新的 gradle.properties】](https://github.com/jmfayard/buildSrcVersions/issues/77)

# Gradle settings

前两项对于提高构建性能尤其重要。

```
org.gradle.caching=true
org.gradle.parallel=true
org.gradle.caching.debug=false
org.gradle.configureondemand=false
org.gradle.daemon.idletimeout= 10800000
org.gradle.console=auto
#org.gradle.java.home=(path to JDK home)
#org.gradle.warning.mode=(all,none,summary)
#org.gradle.workers.max=(max # of worker processes)
# org.gradle.priority=(low,normal) org.gradle.jvmargs=-Xmx2g -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8
// https://docs.gradle.org/current/userguide/build_environment.html#sec:configuring_jvm_memory 
```

Enter fullscreen mode Exit fullscreen mode

阅读位于[https://docs . gradle . org/current/user guide/build _ environment . html # sec:gradle _ configuration _ properties](https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_configuration_properties)的文档

# 科特林设置

```
kotlin.code.style=official
kotlin.caching.enabled=true
kotlin.incremental=true
kotlin.incremental.js=true 
```

Enter fullscreen mode Exit fullscreen mode

在[https://kotlinlang.org/docs/reference/using-gradle.html](https://kotlinlang.org/docs/reference/using-gradle.html)
看文件

```
kapt.use.worker.api=true
kapt.incremental.apt=true 
```

Enter fullscreen mode Exit fullscreen mode

在[https://kotlinlang.org/docs/reference/kapt.html](https://kotlinlang.org/docs/reference/kapt.html)阅读文件

# 安卓设置

```
studio.projectview=true 
```

Enter fullscreen mode Exit fullscreen mode

如果你和我一样认为`Android`的观点在各方面都比`Project`的观点更糟糕，需要淘汰

```
android.enableJetifier=true
android.useAndroidX=true 
```

Enter fullscreen mode Exit fullscreen mode

在[https://developer.android.com/jetpack/androidx](https://developer.android.com/jetpack/androidx)
看文件

```
android.databinding.incremental=true 
```

Enter fullscreen mode Exit fullscreen mode

阅读位于[https://developer . Android . com/topic/libraries/data-binding/start](https://developer.android.com/topic/libraries/data-binding/start)
的文档

```
android.enableSeparateAnnotationProcessing=true 
```

Enter fullscreen mode Exit fullscreen mode

阅读位于[https://developer . Android . com/studio/build/optimize-your-build](https://developer.android.com/studio/build/optimize-your-build)的文档

# 其他安卓标志

```
android.enableR8.fullMode=true
android.enableR8.libraries = true
android.enableR8 = true
android.debug.obsoleteApi=true
android.enableBuildCache=true
android.enableGradleWorkers=true
android.useMinimalKeepRules=true 
```

Enter fullscreen mode Exit fullscreen mode

在
[查看代码源 https://Android . Google source . com/platform/tools/base/+/mirror-goog-studio-master-dev/build-system/gradle-core/src/main/Java/com/Android/build/gradle/options/boolean option . kt](https://android.googlesource.com/platform/tools/base/+/mirror-goog-studio-master-dev/build-system/gradle-core/src/main/java/com/android/build/gradle/options/BooleanOption.kt)