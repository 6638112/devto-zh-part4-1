# 保持后端数据与前端数据同步的四种方法

> 原文：<https://dev.to/firstclown/four-ways-to-keep-backend-data-synced-with-your-frontend-2i2g>

人们在构建前端应用程序时的一个大问题是，保持后端数据与我的前端数据同步的最佳方式是什么？你似乎总是从不同的人那里得到不同的答案，以及可怕的“视情况而定”。嗯，这取决于什么？

以下是开发人员保持数据同步的四种主要方式，以及您可能选择其中一种的原因。

## 1。刷新每个动作的数据

您可以刷新用户采取的每个动作的数据。用户打开应用？从后端获取信息。用户查看他们保存的图片列表？从后端重新提取信息。用户保存新图片？保存它，然后从后端重新提取信息。这在以下情况下非常有用

这通常是一种非常合理的开始方式，也是大多数开发人员第一次开始使用的技术。如果你的数据不是太重，这可能是主要的途径。我喜欢避免过早的优化，所以我会向任何刚开始的开发人员推荐这一点。

如果您的应用程序包含只有该用户才能编辑的数据，这一点尤其正确。如果在应用程序运行时，并不真正担心后端的数据会改变，那么就没有必要改变数据，除非用户自己改变数据。

在任何本质上是单用户的应用程序中，比如营养跟踪器或书签管理器，用户都会想到这种行为。

## 2。添加刷新按钮

只有当用户单击页面上的刷新按钮时，才能刷新数据。这将从后端获取新信息的责任推给了用户，但是可以减少应用程序需要进行的网络调用的数量。这可以是一个显式按钮，或者在移动应用程序的情况下，在屏幕上向下滑动以触发刷新。

有许多应用程序遵循这种方法。如果实时数据对应用程序不重要，屏幕上一个漂亮的刷新按钮可以让用户在需要更新数据时更新数据。

很多时候，当更新数据时，用户并不认为这会导致用户的困惑。YouTube 的趋势频道在移动设备上遵循这一惯例，Twitch 也不会实时更新频道列表。如果他们这样做了，随着新的信息进入系统，用户将不断地试图击中一个移动的目标。最好现在就给他们看当前的推荐，让他们告诉你什么时候他们需要一组新的数据。

## 3。定期刷新

你可以每五分钟或半小时刷新一次数据。通过设置一个计时器并在计时器到时刷新数据，您可以用最新的信息保持屏幕刷新，而不会使用户或您的服务器不堪重负。这曾经是许多基于浏览器的电子邮件客户端的工作情况(有些可能仍然如此)，但我要说的是，他们中的大多数已经转向使用我将谈到的下一种方法。

如果您的应用程序放在一个标签中，让它经常运行，并且警报不需要在发生时立即发送，这仍然是一个有用的技术。

## 4。推送通知

最后一种技术被称为移动推送通知，通过 Web Sockets 或 Web Push 实现。(它曾被称为彗星，但描述的技术早已过了全盛时期。)

这是后端将数据推送到客户端，而不是客户端从后端请求数据。当前端启动时，它向后端注册它想要实时数据更新，然后，当前端需要的东西进入后端时，后端会立即将该信息推送到前端。

想想任何聊天应用，从 Facebook Messenger 到 Google Hangouts。他们使用了某种形式的推送通知，但你的浏览器窗口也是如此。当用户想要立即得到信息并且延迟是不可接受的时候，使用这个。

## 现在都在一起了

虽然这些都是非常不同的更新数据的方法，但是它们最好一起使用，这取决于上面概述的情况。如果我在手机上查看我的 Twitter feed，Twitter 会定期检查我是否有任何更新(选项 3)。如果我有更新，它将启用一个“查看 X 条新推文”刷新按钮，我可以单击该按钮来获取新数据(选项 2)。如果我在我的用户资料页面上，它根本不会尝试加载新数据，直到我点击退出并返回(选项 1)。每个应用程序都会根据他们想要的用户体验来选择不同的技术。

因此，研究这些不同的框架技术，并以这种方式思考，用户期望发生什么？这是选择如何同步数据的最佳方式。