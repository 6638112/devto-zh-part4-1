# 命名和创建 API 端点

> 原文：<https://dev.to/_mertsimsek/naming-and-creating-api-endpoints-340i>

在本文中，我们将介绍一些创建 API 端点的标准和建议。我希望，它将对你非常有帮助，并且它将帮助你改变关于创建 API 端点的观点，当然是以一种积极的方式。

首先，我们需要考虑你的 API 应该处理的所有事情。最初，这将是对您的资源的 CRUD(创建、读取、更新、删除)操作。如果我们有一个客户端点，它显然会像下面这样。

顾客

*   创造
*   阅读
*   更新
*   删除
*   目录
*   图像

客户还需要通过 API 上传图像。在这种情况下，我们将允许一个客户有一个映像，新的映像将覆盖以前的映像。

## API 端点方法

先说一些理论。在这一点上没有正确的答案，但有些方法比其他方法有一些缺点。由于我们是开发者，我们发现了最美丽的，并指出每一个的利弊。

### 获取实体

*   GET/customers——特定列表的客户列表，在某种逻辑上很简单。
*   GET /customers/x - Just entity X. X 可以是 ID、hash、slug、username，只要它对于一个资源是唯一的。
*   GET /customers/x，y，z——消费者需要多种资源。

关于自动递增的友情提示
在上面的例子中，X 可能是一个自动递增的 ID，许多开发人员都会承认这一点。重要的是，任何能够访问您的 API 的人都会确切地知道您有多少个实体。这种情况可以为人们提供信息。有人也可以编写一个脚本，点击/customers/1，然后点击/customers/2 和/customers/3，以这种方式收集所有实体。

您可以使用唯一的标识符。一个通用的唯一标识符似乎是一件合乎逻辑的事情。你可以在网上找到一些关于它的图书馆。

### 删除实体

如果你宁愿删除实体？这是最简单的。

*   DELETE /customers/x -删除单个客户。
*   删除/客户/x，y，z -删除一堆客户。
*   DELETE /customers/x/image -删除客户的图像。

### 发布 vs 上传

创建和更新呢？我知道很多人试图把帖子和具体的 CRUD 行为联系起来，但这是不确定的。一般来说，如果你事先知道整个 URL，就使用 PUT。例如，如果您正在为客户创建一个图像，那么 create 可以是一个 PUT。

PUT/customers/1/image HTTP/1.1
主持人:mertblog.net
内容类型:image/jpeg

这是何时使用 PUT 的恰当例子，因为。你已经知道了完整的网址，你可以一次又一次地重复。如果我们有一个客户的多个图像，张贴可能是一个很好的解决方案。

帖子/客户/1/图片

这是一个微妙的区别，但是不要试图将一个 HTTP 方法仅仅绑定到一个 CRUD 动作上。

### 复数、单数还是两者都有？

您可以决定将所有端点设为单数，但这有一个问题。令人困惑。我宁愿为所有事物创造一个复数，因为这是最明显的:

*   /customers——如果我对此运行 GET，我将得到一组客户。
*   /customers/7 -显然，我只对客户 45 感兴趣。
*   /客户/7，14 -客户 7，14 我知道了，谢谢。

使用复数 harmonic 的另一个重要原因是它接受 harmonic 命名的子实体:

*   /客户
*   /客户/7
*   /客户/7
*   /客户/7/场馆
*   /客户/7/场馆/2
*   /场馆/2

**和谐**是关键。

## 动词还是名词？

大多数时候，API 由一系列描述动作的端点组成:

POST/send user message
id = 5&message = hello

可想而知，这不是用 REST 做事情的方式。此外，开发人员发现下面的方法更加 RESTful，因为它使用了一个子实体:

POST/users/5/send-message
{ " message ":" Hello " }

但遗憾的是，这仍然是在 URL 中使用了一个动词。动词是一个动作——一个正在做的术语，我们的 API 只需要一个动词 HTTP 方法。所有其他动词都需要远离 URL。

名词是一个地方或一件事物。实体是事物，URL 成为事物在互联网上的地址。

这个实例会更加 RESTful。

POST/users/5/messages
{ " message ":" Hello " }

太棒了。我们已经创建了一个属于用户的新消息。保持这种良好 RESTful 的最大好处是，其他 HTTP 操作可以针对相同的 URL:

*   获取/用户/mert/消息
*   PATCH/users/mert/message/xdMRqwerty
*   删除/users/mert/message/xdMRqwerty

这对于人类和 RESTful 软件来说都更容易记录和理解。

## 组织端点

### 控制器

我们应该列出客户、场地、用户或类别？直白。每种类型的实体一个控制器:

*   分类控制器
*   事件控制器
*   用户控制器
*   静脉控制器

所有这些应该是一个实体，每个实体都需要一个控制器。子实体有时可能只是一种方法。例如，设置是用户的子实体。他们可以进入用户控制器。但是这是可选的和灵活的。

### 路线

此时，您应该希望避免多个端点使用复制和粘贴逻辑做令人痛苦的类似事情。不同的端点提供相同的实体，但格式略有不同，这让您的消费者非常恼火。

### 方法

当你列出了你的应用需要的所有路线后，就去制定合适的控制器方法。把它们都清空，让其中一个回复“你好！”并检查输出。你刚刚写了一个 API。

## 结论

当你有一个相对广泛的清单时，第一步是列出一个基本的**行动**清单。这是规划一个实体类。我试图让所有动词都远离 URL。另一个想法是使用复数。为所有的实体提供和谐。我希望，我可以改变你对构建 API 的看法。