# 浮躁的外壳

> 原文:[https://dev.to/juricakenda/impetuous-encasing-6mk](https://dev.to/juricakenda/impetuous-encasing-6mk)

你还记得小时候因为父母让你打扫房间而打扫房间吗？清洁会议是什么样子的？最有可能的是，你会把你的旧衬衫推进壁橱里，把你的玩具和鞋子以及半包糖果放在一个盒子里，然后，最重要的是，把那个盒子踢到床下。你的房间看起来很干净。这是你唯一能说实话的事。它看起来很干净。
但事实并非如此。

让我们在清理代码的时候不要像小孩子一样。毫无疑问，将代码块提取到不同的方法中是对一段看起来很糟糕的代码所做的最糟糕的事情之一。

面对现实吧。你想对自己宽容点。但是你没有帮到你自己。你已经设法制造了至少一个额外的问题来处理。现在，不仅代码看起来很糟糕，而且它还藏在暗处，希望你不会发现它。

我最近看了两位先生的演讲，关于如何处理遗留代码。他们的建议让我大吃一惊。太简单了。更好的是，他们一直把它说成是一种最省力的方法。这个方法是在你弄清楚它背后的语义之前，把我们能提取的任何东西都提取到方法中。他们这种方法的卖点是:“让代码告诉你它能做什么”。

虽然我同意这一观点，但它的背景极其重要。糟糕的代码不会告诉你它做了什么。或者更糟，它告诉你错误的事情。

我在实践中试过这种方法，很快就发现它有多糟糕。这个方法在一段时间内看起来不错。我在做重构，把所有东西都转移到不同的方法中。代码看起来更干净，可读性更好。

直到我喝完咖啡回来。它一点也不可读。事实上，我只是把垃圾代码藏在一个花哨的方法名后面，这个方法名甚至没有恰当地描述它在做什么。我让它更难阅读，因为你必须通过 5 个无意义的方法名来找到一些代码，这些代码实际上在做一些隐藏在它核心的事情。

当天的教训:“如果某件事看起来好得不像是真的，那它很可能就是真的。"

现在想想，听起来都没那么好听。对于一个工程师来说，一个不经大脑和思考就做某事的想法怎么可能是有趣的呢？

高质量、可读和可维护的代码没有捷径可走。我们不能把脏袜子放在盒子里，然后说它们是干净的。做好你的工作。重新设计，重新设计，为整个系统找出一个全新的架构。

草率的代码清理比没有代码清理更糟糕。