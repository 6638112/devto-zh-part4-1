# TFVC 工作空间管理提示

> 原文:[https://dev . to/xpirit/workspace-management-tips-for-tfvc-1m4n](https://dev.to/xpirit/workspace-management-tips-for-tfvc-1m4n)

[![Workspace management tips for TFVC](../Images/864ed8a26553dc419605695816750337.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--l4Y7EeLt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://jessehouwing.net/content/images/2019/06/5742119050_fef662a3cd_b.jpg)

工作区可能是 TFVC (Team Foundation 版本控制)中理解最少的功能。它们是从 TFVC 存储库中隔离不同的文件和变更集的好方法。

很多人会为一个特定的项目或一组解决方案配置一个新的工作区，但是让我们来详细看看工作区的一些使用方法:

*   修补程序:您可能需要为现在发生的事情创建一个修补程序，但是您在现有的工作区中有挂起的更改。您可以创建一个新的工作空间来解决这个特殊的问题，而不是搁置这些更改，对被 bug 的版本执行“获取特定版本”。完成修复后，您可以继续使用另一个工作空间，而无需做任何事情。
*   实验:你可能想要做一些大的重构，重构源代码控制或者其他一些非常有影响力的操作。在一个新的(临时的)工作空间中这样做可以帮助你避免弄乱你的正常工作区域。
*   审查其他人的变更:当对另一个人的变更进行审查时，您可能希望有一个本地副本，这样您就可以运行、注释和处理其他人的代码。您可以轻松地将这些更改放入临时工作区，而不是放入您自己的工作区，之后您可以安全地删除它。
*   当您处理其他变更时，执行合并:当需要发布一个版本时，您可能正在处理一个新的特性，并且已经将一些变更合并回另一个分支。为了准备这个发布，在您当前的工作区中，不要拾取变更或者覆盖正在进行的工作，在一个临时的工作区中执行这种发布活动通常更容易，这样您就知道工作总是在源代码控制中的精确版本上完成的。
*   防止对重要分支的意外变更:通过将您的生产分支放在一个单独的工作区中，您不会意外地将来自开发和 Main 的变更合并到一个签入中。由于 Visual Studio 通常会自动选择工作区中的所有挂起的更改，这可能会导致对主/主要分支的意外更改。我已经写了一个签入策略来防止这些问题，但是拥有独立的工作空间是一个更安全的解决方案。
*   在同一个工作站/服务器上与多个开发人员一起工作:在一些组织中，开发人员使用一个远程桌面到一个强大的中央服务器来进行更改。为了确保每个开发人员都有自己的文件集，每个开发人员都有自己的工作空间。另一种方法是将工作区公开，这允许多个开发人员使用同一个工作区文件夹。但这往往会导致各种意想不到的问题。
*   浏览旧版本的代码:如果您需要检查/比较旧版本和新版本，您通常可以在 Visual Studio 中使用文件夹比较视图，但是如果您需要进行更彻底的比较，您可能希望在您的 TFVC repo 中有同一个文件夹的两个副本。创建两个工作区将允许您在本地磁盘上拥有同一文件夹的两个不同版本。
*   为合并或标签准备一个特殊的版本:您可以合并和标签一组文件的工作区版本。您可以创建一个工作区，然后使用 Get Specific Version 来获取特定文件的特定版本，这些版本可以来自不同的变更集版本。一旦您满意了，您就可以执行标签或合并或分支操作来将这个特定的工作区版本配置存储在服务器上。

如您所见，工作空间允许您在一台机器上进行并行开发，隔离变更等。

## [](#be-creative)有创意

如您所见，工作空间是一个非常强大的概念。可用于许多操作。但是你需要彻底理解这个概念。许多开发人员不明白工作区到底是什么以及它们是如何工作的，他们错过了 TFVC 的一些最强大的概念。

## [](#consolidating-and-cleaning-up)整顿和清理

当您有多个工作空间并希望将它们合并成一个时，需要您从`_1`文件夹中取消文件夹映射，然后在原始工作空间中映射这些相同的文件夹。您还可以从 TFS 服务器中删除`_1`工作区，然后更新原始工作区的映射。

请记住，工作空间存储在您的本地机器上，但是 TFS 服务器也有一个谁将哪个 TFVC 文件夹映射到哪个工作站的注册表。因此，仅仅从本地磁盘上删除文件是不够的。您需要将这些更改保存到 TFS 服务器(这在更改映射后执行 get 操作后自动发生)。

要检查哪些工作空间已注册到 TFS 服务器上的工作站，请使用:

```
tf vc workspaces /computer:YOURWORKSTATIONNAME 
```

然后使用删除旧工作区

```
// DELETE the local workspace
tf vc workspace /delete:WORKSPACENAME

// DELETE the workspace registration on the TFS server
tf vc workspaces /remove:WORKSPACENAME 
```

> 这第一次出现在[一个 StackOverflow 问题的答案](https://stackoverflow.com/a/48355207/736079)中。