# 铁锈-第一印象

> 原文：<https://dev.to/magnusstrale/rust-first-impressions-c90>

我已经开始玩 Rust 了，这里有一些从新手角度的观察。我之所以研究 Rust，是因为它是一种现代语言，不需要借助垃圾收集或引用计数就可以进行手动内存管理。这是一个我觉得非常有趣的概念。他们到底是怎么解决的？

首先，每当我开始学习一门新语言时，我都需要一个目标，否则我会跳过难的部分。在这种情况下，我拿起了书[“光线追踪挑战”](https://pragprog.com/book/jbtracer/the-ray-tracer-challenge)，它从零开始，向您展示如何建立一个光线追踪器(做 TDD 风格的奖励点！).因为我以前从未做过任何光线追踪的工作，这在那方面也很有教育意义。

请记住，这是一个新手写的，所以请原谅这篇文章中的任何错误(并告诉我！).

### 那么 Rust 中的内存管理呢？

这个想法是要有关于内存所有权和生命周期管理的严格规则。内存是自动分配给你的数据结构的，当你的数据结构超出范围时，内存就会被释放。对于局部变量来说，这是非常简单的，但是对于需要传递的数据来说，这就有点复杂了。你可以让一个方法*借用*你的数据(所有权仍然在调用代码中)，或者你可以*移动*你的数据(所有权被传递给被调用的方法，这意味着在方法调用后你不能在调用代码中引用该数据)。

还有复制数据的概念，它允许您传递数据的单独副本，并且仍然保持原始数据的完整性。这是通过实现一个特殊的复制特征(类似于其他语言中的接口)来实现的。

在开始的时候，确实需要相当多的试错来获得正确的借用/移动语义，在这里和那里随机添加' & '和' mut'。好消息是编译器给出了非常有用的消息，在线上有很多有用的文档，还有一个非常有用的社区。

### 除了内存管理还有什么？

*   速度！工具和编译的代码都运行得非常快。我没有做过任何严肃的基准测试，但是代码/编译/测试周期至少和我做过的其他事情一样快。
*   文档。我确实提到了有用的在线文档，我必须说 Rust 确实在这个部门大放异彩。是的——这种语言仍在积极开发中，所以会有一些变化发生，可能会让你出错，但每次都是文档救了我。不仅仅是语言和 API 文档，还有一本非常好的书(又名“书”)教你关于 Rust 的基础知识。
*   默认不变性。如果你想要可变的数据，你必须明确地声明，否则你的数据是安全的和不可变的。

### 铁锈地带一切都好吗？

当然也有让我恼火的事情...

*   不支持重载。我喜欢有可能重载一个方法，这个方法采用稍微不同的一组参数。在 Rust 中不可能-你必须使用另一个名字。这对于 **new** 方法(该名称是类似构造函数的方法的约定)来说尤其令人恼火，因为为了方便起见，我真的希望有几个版本。
*   数据和代码严格分离。您使用一个**结构**来定义对象的数据，并使用一个单独的 **impl** 部分来放置您的方法。不是说我完全不喜欢这样，而是和我习惯的不一样。
*   运算符过载。有很多重复(类型！)用于定义运算符重载。我们能不能至少去掉“类型输出= ...”？

### 到目前为止我的结论是什么？

对系统编程的关注清楚地反映在许多针对 Rust 的设计决策中，这使得编码时感觉非常“接近金属”/C-like。但令人惊讶的是，这与许多高级结构(lambdas、函数式编程支持等)结合在一起，使您能够编写非常有表现力和简洁的代码。安全方面也非常好，甚至看起来微软正因为这个原因考虑使用 Rust。

Rust 绝对是一门我会投入更多时间的语言，尤其是我以后会深入研究 WebAssembly(Rust 完全支持 web assembly)。它会成为我快速破解/兼职项目的首选语言吗？不确定——c#仍然是我最喜欢的。