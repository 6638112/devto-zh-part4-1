# 停止疯狂

> 原文:[https://dev.to/mbjelac/stop-the-madness-14f6](https://dev.to/mbjelac/stop-the-madness-14f6)

###### [](#cover-photo-by-tony-stoddard-on-unsplash)封面照片由*托尼·斯托达德*在 [Unsplash](https://unsplash.com/@kereru?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄

我刚刚听到一个令人毛骨悚然的故事:

如果客户想要测试他们的软件，IT 公司会收取额外的费用。UI 测试和单元测试。

所以，客户要额外付费。

为了测试。

换句话说，公司*激励*免测试软件。

这是疯狂的，必须停止。

## [](#a-fable)寓言

...其中我将尝试描述一个与上述情况相当的情况:

兔子来到熊的汽车修理店修理她的汽车。

熊对兔子说:“好吧，我们看到了问题，我们会解决它，但你有一个选择:要么我们用我们的旧破烂工具来解决它，这将花费你 250 胡萝卜，或者我们用我们的新酷工具来解决它，这将花费你 500 胡萝卜。”

邦妮起初很困惑，为什么她还要考虑小熊用什么工具来修车，但是她很好奇...

兔子想:“哦，所以新工具用起来比较慢？”

对此，贝尔回答道:“不，我们使用新工具要快得多。”

兔子:“但是我以为你是按小时收费的？”

熊:“我们公司的新政策规定我们按工具集的大小收费，而新工具集是旧工具集的两倍。”

被这个“逻辑”弄糊涂了，兔子开车去了另一家修理店。

## [](#explanation)解释

寓言中的“新工具”当然是测试。它们一点也不“新”,因为现代软件测试的概念至少从 20 世纪末就已经广为人知了——到现在已经超过 20 年了——但是编写没有测试的软件已经存在了更长时间，并且更加普遍，所以“新”在这种情况下是合适的。

寓言中的机械师的时间是实际的开发人员的时间。这个寓言的矛盾之处在于，熊在使用新工具时会收取更多的费用，尽管他在使用新工具时会花费更少的时间(即金钱)。

这种推理只有在你对每行代码收费的情况下才有意义，如果你的 IT 组织有这样的商业模式，这是可能的，但不太可能，因为世界上几乎所有的事情都是基于单位时间的成本(比如开发人员的工资)。

这与直觉相反，但是写更多的代码(实现+测试)花费的时间(T2)会更少。如果您仅仅因为实现代码将具有更高的质量而在 TDD 周期中编写所有代码，这一点尤其正确。

质量意味着速度。

测试驱动开发不仅引导你测试所有的逻辑(大多数错误隐藏的地方)和一个可靠的回归安全网，而且迫使你重新思考你的软件是如何构建的，子组件是什么，子组件之间的接口是如何设计的。所有这些都导致代码可读性更强，更容易更改，这意味着构建新功能会更快。

## [](#change-your-company-or)更换公司，或者...

我们周围到处都有“经典”的 IT 公司。他们的开发人员被交给通过聊天或写在文档或任务管理系统中向他们讲述的需求。他们继续实现需求。有些人为他们的部分代码编写测试。

这些开发人员中的一些人看到他们的代码库逐渐变成了代码沼泽，往好了说是难以导航和更改，往坏了说是公司本身面临巨大的商业风险和成本下降。一些开发人员认识到编写全面的测试套件和/或使用测试驱动开发以可持续的方式发展代码库的价值。

这些开发人员可能想要改变他们的工作方式。他们团队的工作方式。甚至可能是他们公司的工作方式。这很难。

想象一下，一个开发人员试图让他们的团队开始编写测试，而团队中的大多数人要么不能理解其价值，要么认为工作量太大。想象他们试图让他们的团队开始做 TDD，而团队中的大多数人看不到好处或者不能开始寻找从哪里开始。除此之外，还有其他组织问题，如管理压力、乐观估计(尤其是当与需求一起交给开发人员时)、沟通障碍等。这就像推一块巨石上山，只是巨石越来越重，山越来越陡。

现在想象一下，开发人员试图在一家将免测试软件作为其商业产品的一部分的公司中做所有这些事情。如果客户没有为测试支付额外的费用，开发人员*就不能写测试*。

当开发人员不喜欢他们的环境时，他们通常会采纳马丁·福勒的机智建议:

> 换个公司，或者换个公司

所以，当你询问你的开发人员他们是否认为花时间写测试是值得的时，请三思。在软件商业中，测试(尤其是正确完成的 TDD)意味着质量，质量意味着速度，速度意味着利润。

## [](#some-light-reading)点闲书

你不必同意我。我只是一个“普通”的开发者。我再次向你推荐马丁·福勒，他不是:

> [高质量软件的生产成本更低](https://martinfowler.com/articles/is-quality-worth-cost.html)

看看这个。现在。停止疯狂。