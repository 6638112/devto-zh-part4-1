# ID3TagEditor:‰∏Ä‰∏™ Swift Ê°ÜÊû∂ÔºåÂèØ‰ª•‰∏∫ macOS„ÄÅiOS„ÄÅtvOS„ÄÅwatchOS Âíå Linux ËØªÂÜô mp3 Êñá‰ª∂ÁöÑ ID3 Ê†áÁ≠æ

> ÂéüÊñá:[https://dev . to/chicio/ID3 tag editor-a-swift-framework-to-read-and-write-ID3-tag-of-your-MP3-files-for-MAC OS-IOs-tvos-and-watch OS-127 p](https://dev.to/chicio/id3tageditor-a-swift-framework-to-read-and-write-id3-tag-of-your-mp3-files-for-macos-ios-tvos-and-watchos-127p)

ÊàëÊèèËø∞‰∫ÜÊàëÁöÑ‰∏§‰∏™ÊúÄÊñ∞È°πÁõÆ:ID3TagEditor Âíå MP 3 id tag ger„ÄÇÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞ÜÊèèËø∞ÊàëÊòØÂ¶Ç‰ΩïÂàõÂª∫ ID3TagEditor ÁöÑ„ÄÇ

Âú®[ËøôÁØá‰πãÂâçÁöÑÊñáÁ´†](https://dev.to/chicio/the-birth-of-id3tageditor-and-mp3id3tagger-and-my-journey-into-the-id3-tag-standard-2ob6)‰∏≠ÔºåÊàëÊèèËø∞‰∫ÜÊàëÂºÄÂèë [ID3TagEditor](https://github.com/chicio/ID3TagEditor) ÁöÑÂéüÂõ†ÔºåËøôÊòØ‰∏Ä‰∏™ swift Â∫ìÔºåÁî®‰∫éÁºñËæë mp3 Êñá‰ª∂ÁöÑ ID3 Ê†áÁ≠æÔºåÊîØÊåÅ macOS„ÄÅiOS„ÄÅwatchOS Âíå tvOS„ÄÇ
Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂ∞ÜÊèèËø∞ÊàëÊòØÂ¶Ç‰ΩïÂºÄÂèëÂÆÉÁöÑ„ÄÇ‰∏ãÈù¢‰Ω†ÂèØ‰ª•ÊâæÂà∞Âõæ‰π¶È¶ÜÁöÑÊ†áÂøó„ÄÇ

[![ID3TagEditor logo](../Images/e76bf686fa27fda1a3fb18100b0d30c9.png "ID3TagEditor logo")T2„Äë](https://res.cloudinary.com/practicaldev/image/fetch/s--py0K5agv--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/assets/images/posts/id3tageditor-logo.jpg)

‰ΩÜÊòØÂú®Ê∑±ÂÖ•‰∫ÜËß£ ID3TagEditor ÁöÑÁªÜËäÇ‰πãÂâçÔºå‰∫ÜËß£‰∏Ä‰∏ã ID3 Ê†áÁ≠æÊ†áÂáÜÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÊòØÂæàÊúâÁî®ÁöÑ(‰Ω†ÂèØ‰ª•Âú®ÂÆòÊñπÁΩëÁ´ô‰∏äÊâæÂà∞ÂÆåÊï¥ÁöÑÂèÇËÄÉËµÑÊñô)„ÄÇÂÆÉÂØπ ID3 Ê†áÂáÜÁöÑÂÆö‰πâÊòØ:

> ID3 Ê†áÁ≠æÊòØ‰ª•ËßÑÂÆöÊ†ºÂºèÂ≠òÂÇ®ÁöÑ MP3 Èü≥È¢ëÊñá‰ª∂ÂÜÖÁöÑÊï∞ÊçÆÂÆπÂô®

Ëøô‰∏™ÂÆö‰πâÊÑèÂë≥ÁùÄ ID3 Ê†áÁ≠æÂü∫Êú¨‰∏äÊòØÂ≠òÂÇ®Âú® mp3 Êñá‰ª∂ÂºÄÂ§¥ÁöÑ‰ø°ÊÅØÂùó„ÄÇËØ•Ê†áÂáÜÂÆö‰πâ‰∫Ü‰ªª‰ΩïÂºÄÂèë‰∫∫ÂëòÈÉΩÂèØ‰ª•Áî®Êù•ËØªÂÜôËøô‰∫õ‰ø°ÊÅØÁöÑÊ†ºÂºè„ÄÇËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏™‰ΩøÁî®ÂçÅÂÖ≠ËøõÂà∂ÁºñËæëÂô®ÁöÑ ID3 Ê†áÁ≠æÁöÑ‰æãÂ≠ê„ÄÇ

[![ID3 tag example](../Images/119b69492d1b42a6c0ad60bad463d362.png "ID3 tag example")T2„Äë](https://res.cloudinary.com/practicaldev/image/fetch/s--lGZDU5sH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/assets/images/posts/id3-tag-example.jpg)

Ê†áÁ≠æÁî±‰∏Ä‰∏™Ê†áÈ¢òÂíå‰∏ÄÁ≥ªÂàóÂ∏ßÁªÑÊàê„ÄÇÊ†áÁ≠æÊä•Â§¥ÁöÑÂ§ßÂ∞è‰∏∫ 10 Â≠óËäÇÔºåÂåÖÂê´‰ª•‰∏ã‰ø°ÊÅØ(ÈíàÂØπ v2 Âíå v3):

*   ID3 Ê†áÁ≠æÊñá‰ª∂Ê†áËØÜÁ¨¶Ôºå3 Â≠óËäÇÔºåÈÄöÂ∏∏Ë°®Á§∫‰∏∫‚ÄúID3‚Äù
*   Ê†áÁ≠æÁâàÊú¨Ôºå2 ‰∏™Â≠óËäÇÔºå‰ª£Ë°®‰∏ªÁâàÊú¨Âíå‰øÆËÆ¢ÁâàÊú¨ÁöÑ‰∏ÄÂØπÊï∞Â≠ó(Â¶Ç`0x03 0x00`)
*   Ê†áÂøóÔºå1 Â≠óËäÇÔºåÂåÖÂê´‰∏â‰∏™ÈÖçÁΩÆÊ†áÂøóÔºåË°®Á§∫‰∏∫`%abc00000`(‰Ωç‰∏∫ 1)
*   Â§ßÂ∞èÔºå4 Â≠óËäÇ„ÄÇÂºïÁî® ID3 Ê†áÂáÜÔºåÂ∞∫ÂØ∏‰∏∫:

> ‰∏çÂêåÊ≠•ÂêéÂÆåÊï¥Ê†áÁ≠æÁöÑÂ§ßÂ∞èÔºåÂåÖÊã¨Â°´ÂÖÖÔºå‰∏çÂåÖÊã¨Â§¥‰ΩÜ‰∏çÂåÖÊã¨Êâ©Â±ïÂ§¥„ÄÇID3v2 Ê†áÁ≠æÂ§ßÂ∞èÁî®Âõõ‰∏™Â≠óËäÇÁºñÁ†ÅÔºåÂÖ∂‰∏≠ÊØè‰∏™Â≠óËäÇÁöÑÊúÄÈ´òÊúâÊïà‰Ωç(‰Ωç 7)ÈÉΩËÆæÁΩÆ‰∏∫Èõ∂ÔºåÊÄªÂÖ± 28 ‰Ωç„ÄÇÁΩÆÈõ∂ÁöÑ‰ΩçË¢´ÂøΩÁï•ÔºåÊâÄ‰ª•‰∏Ä‰∏™ 257 Â≠óËäÇÈïøÁöÑÊ†áÁ≠æË¢´Ë°®Á§∫‰∏∫$00 00 02 01„ÄÇ....Âú®Â§ßÂ∞èÊèèËø∞‰∏≠‰ªÖ‰ΩøÁî®‰∫Ü 28 ‰Ωç(‰ª£Ë°®È´òËææ 256MB)...

[![ID3 tag header](../Images/12618d35ccff14295433413a996b41c4.png "ID3 tag header")T2„Äë](https://res.cloudinary.com/practicaldev/image/fetch/s--eOMUDtyz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/assets/images/posts/id3-tag-header.jpg)

Ê°ÜÊû∂Áî±Ê†áÈ¢òÂíåËá™ÂÆö‰πâÂÜÖÂÆπÁªÑÊàê„ÄÇÂ∏ßÂ§¥ÂåÖÂê´‰ª•‰∏ã‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØÁöÑÂ§ßÂ∞è‰ºöÂõ†ÁâàÊú¨ËÄåÂºÇ:

*   Â∏ß idÔºåÁâàÊú¨ 2 ‰∏≠ 3 ‰∏™Â≠óËäÇÔºåÁâàÊú¨ 3 ‰∏≠ 4 ‰∏™Â≠óËäÇ
*   Â§ßÂ∞èÔºåÁâàÊú¨ 2 ‰∏≠‰∏∫ 3 ‰∏™Â≠óËäÇÔºåÁâàÊú¨ 3 ‰∏≠‰∏∫ 4 ‰∏™Â≠óËäÇÔºåÁî®‰∫éÊèèËø∞Â∏ßÁöÑÊÄªÂ§ßÂ∞èÔºå‰∏çÂåÖÊã¨Êä•Â§¥
*   ÈÄâÈ°πÊ†áÂøóÔºå2 Â≠óËäÇ‰ªÖÂú®ÁâàÊú¨ 3 ‰∏≠ÂèØÁî®

Âõ†Ê≠§ÔºåÂ∏ßÂ§¥Â§ßÂ∞èÂú®ÁâàÊú¨ 3 ‰∏≠‰∏∫ 10 Â≠óËäÇÔºåÂú®ÁâàÊú¨ 2 ‰∏≠‰∏∫ 6 Â≠óËäÇ„ÄÇÂú®Ê†áÈ¢ò‰πãÂêéÊòØÂÆöÂà∂ÁöÑÁâπÂÆöÊ°ÜÊû∂Ê†áÂøó/ÈÄâÈ°πÂíåÊ°ÜÊû∂ÂÜÖÂÆπ„ÄÇ‰ª•‰∏ãÊòØÁ¨¨ 3 ÁâàÊ†áÁ≠æ‰∏≠ÁöÑÊ°ÜÊû∂Á§∫‰æã„ÄÇ

[![ID3 frame example](../Images/3adb236b20d33d3e09a81c0ce8beb9fa.png "ID3 frame example")T2„Äë](https://res.cloudinary.com/practicaldev/image/fetch/s--sCyfWcF3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/assets/images/posts/id3-frame-example.jpg)

ÊúÄÂêé‰ΩÜÂπ∂ÈùûÊúÄ‰∏çÈáçË¶ÅÁöÑÊòØÔºåÂú® ID3 Ê†áËÆ∞ÁöÑÊú´Â∞æËøòÊúâ 2 KB ÁöÑÂÅèÁßªÈáè(‰Ω†ÂèØ‰ª•Âú®ÂâçÈù¢ÁöÑÂõæÁâá‰∏≠ÁúãÂà∞ÔºåÂú®Ê†áËÆ∞ÁöÑÊú´Â∞æÊúâ‰∏ÄÁ≥ªÂàóÊó†Â∞ΩÁöÑ`0x00`üòå).ID3TagEditor ÊòØÂ¶Ç‰ΩïËØªÂÜôÊâÄÊúâËøô‰∫õ‰ø°ÊÅØÁöÑÔºüÊ°ÜÊû∂ÁöÑ‰∏ªË¶Å api ÊòØ‰∏§‰∏™ÁÆÄÂçïÁöÑÊñπÊ≥ï:

```
/**
 Read the ID3 tag contained in the mp3 file.

 - parameter path: path of the mp3 file to be parsed.

 - throws: Could throw `InvalidFileFormat` if an mp3 file doesn't exists at the specified path.

 - returns: an ID3 tag or nil, if a tag doesn't exists in the file.
 */
public func read(from path: String) throws -> ID3Tag?

/**
 Writes the mp3 to a new file or overwrite it with the new ID3 tag.

 - parameter tag: the ID3 tag that written in the mp3 file.
 - parameter path: path of the mp3 file where we will write the tag.
 - parameter newPath: path where the file with the new tag will be written. **If nil, the mp3 file will be overwritten**.
 If nothing is passed, the file will be overwritten at its current location.

 - throws: Could throw `TagTooBig` (tag size > 256 MB) or `InvalidTagData` (no data set to be written in the
 ID3 tag).
 */
public func write(tag: ID3Tag, to path: String, andSaveTo newPath: String? = nil) throws 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Âõ†Ê≠§ÔºåID3TagEditor Ê°ÜÊû∂Êúâ‰∏§‰∏™‰∏ªË¶ÅÈÉ®ÂàÜ:‰∏Ä‰∏™Áî®‰∫éËØªÂèñ/Ëß£Êûê mp3 Êñá‰ª∂ÔºåÂè¶‰∏Ä‰∏™Áî®‰∫éÂ∞Ü ID3 Ê†áÁ≠æÂÜôÂÖ• mp3 Êñá‰ª∂„ÄÇ

ËÆ©Êàë‰ª¨‰ªéÈòÖËØª/Ëß£ÊûêÈÉ®ÂàÜÂºÄÂßã„ÄÇÂ∫ìÁöÑ‰∏ªË¶ÅÂÖ•Âè£ÁÇπÊòØ‰ªé‰∏Ä‰∏™`ID3TagParserFactory`ÂÆû‰æãÂåñÁöÑÁ±ª`ID3TagParser`„ÄÇÂÆÉÁöÑ‰∏ªË¶ÅÂäüËÉΩÊòØË¢´Áß∞‰∏∫`parse`„ÄÇÈ°æÂêçÊÄù‰πâÔºåÂÆÉËß£ÊûêÂêÑÁßçÂ∏ß„ÄÇÂú®Ê≠§‰πãÂâçÊúâ‰∏â‰∏™Êìç‰Ωú:

*   Ê†áÁ≠æÁöÑÁâàÊú¨Áî±Âêç‰∏∫`ID3TagVersionParser`ÁöÑÂêà‰ΩúËÄÖÊèêÂèñ
*   Ê£ÄÊü•Ê†áÁ≠æÊòØÂê¶Âú®Âä†ËΩΩÁöÑ mp3 Êñá‰ª∂‰∏≠ÂèØÁî®„ÄÇËøôÈ°πÊ£ÄÊü•Áî±Âêç‰∏∫`ID3TagPresence`ÁöÑÂêà‰ΩúËÄÖÂÆåÊàê
*   Ê†áÁ≠æÁöÑÂ§ßÂ∞èÁî±‰∏Ä‰∏™Âè´ÂÅö`ID3TagSizeParser`ÁöÑÂêà‰ΩúËÄÖÊèêÂèñ

```
....

func parse(mp3: Data) -> ID3Tag? {
    let version = tagVersionParser.parse(mp3: mp3 as Data)
    if (tagPresence.isTagPresentIn(mp3: mp3 as Data, version: version)) {
        let id3Tag = ID3Tag(version: version, size: 0)
        parseTagSizeFor(mp3: mp3 as NSData, andSaveInId3Tag: id3Tag)
        parseFramesFor(mp3: mp3 as NSData, id3Tag: id3Tag)
        return id3Tag
    }
    return nil
}

.... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ÊØè‰∏™Â∏ßÁöÑËß£ÊûêÂú®ÂáΩÊï∞`parseFramesFor`‰∏≠ÂÆåÊàê„ÄÇ

```
....
private func parseFramesFor(mp3: NSData, id3Tag: ID3Tag) {
    var currentFramePosition = id3TagConfiguration.headerSize();
    while currentFramePosition < id3Tag.properties.size {
        let frame = getFrameFrom(mp3: mp3, position: currentFramePosition, version: id3Tag.properties.version)
        frameContentParser.parse(frame: frame, id3Tag: id3Tag)
        currentFramePosition += frame.count;
    }
}

private func getFrameFrom(mp3: NSData, position: Int, version: ID3Version) -> Data {
    let frameSize = frameSizeParser.parse(mp3: mp3, framePosition: position, version: version)
    let frame = mp3.subdata(with: NSMakeRange(position, frameSize))
    return frame
}
.... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ÂØπÊØè‰∏™Â∏ßÁöÑËß£ÊûêÊòØÂ¶Ç‰ΩïËøõË°åÁöÑÔºüID3TagEditor Â¶Ç‰ΩïËØÜÂà´Ê≠£Á°ÆÁöÑÂ∏ßÂπ∂Ê†πÊçÆÂ∏ßÁ±ªÂûãÊâßË°åÊ≠£Á°ÆÁöÑËß£ÊûêÔºüÁ≠îÊ°àÂú®`ID3FrameContentParser`Á±ªÂÜÖÈÉ®ÔºåÂú®`parseFramesFor(mp3: NSData, id3Tag: ID3Tag)`ÂáΩÊï∞ÂÜÖÈÉ®‰ΩøÁî®„ÄÇËØ•Á±ª‰ΩøÁî® [**ÂëΩ‰ª§Ê®°Âºè**](https://en.wikipedia.org/wiki/Command_pattern) ‰∏∫ÂΩìÂâçÂ∏ßÁ±ªÂûãÂêØÂä®Ê≠£Á°ÆÁöÑ
Ëß£ÊûêÊìç‰Ωú„ÄÇÂ∏ßËß£ÊûêÊìç‰ΩúÂàóË°®Â≠òÂÇ®Âú®‰∏Ä‰∏™Â≠óÂÖ∏‰∏≠ÔºåÂÖ∂‰∏≠ÁöÑÂÖ≥ÈîÆÂ≠óÊòØ`FrameType`Êûö‰∏æ„ÄÇËØ•Êûö‰∏æ‰∏ÄËà¨Ê†áËØÜÂ∏ßÁ±ªÂûãÔºåÂπ∂Âú®`ID3FrameConfiguration`ÂáΩÊï∞`frameTypeFor(identifier: frameIdentifier, version: version)`‰∏≠Êò†Â∞ÑÂà∞ÊØè‰∏™ÁâàÊú¨ÁöÑÊ≠£Á°Æ ID3 Â∏ßÊ†áËØÜÁ¨¶„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÂ∏ßÊ†áËØÜÁ¨¶ÁöÑÊèêÂèñÊòØÂú®`getFrameTypeFrom(frame: Data, version: ID3Version) -> FrameType`‰∏≠ÂÆåÊàêÁöÑ„ÄÇ

```
 class ID3FrameContentParser: FrameContentParser {
     private let frameContentParsingOperations: [FrameType : FrameContentParsingOperation]
     private var id3FrameConfiguration: ID3FrameConfiguration

     init(frameContentParsingOperations: [FrameType : FrameContentParsingOperation],
          id3FrameConfiguration: ID3FrameConfiguration) {
         self.frameContentParsingOperations = frameContentParsingOperations
         self.id3FrameConfiguration = id3FrameConfiguration
     }

     func parse(frame: Data, id3Tag: ID3Tag) {
         let frameType = getFrameTypeFrom(frame: frame, version: id3Tag.properties.version)
         if (isAValid(frameType: frameType)) {
             frameContentParsingOperations[frameType]?.parse(frame: frame, id3Tag: id3Tag)
         }
     }

     private func getFrameTypeFrom(frame: Data, version: ID3Version) -> FrameType {
         let frameIdentifierSize = id3FrameConfiguration.identifierSizeFor(version: version)
         let frameIdentifierData = [UInt8](frame.subdata(in: Range(0...frameIdentifierSize - 1)))
         let frameIdentifier = toString(frameIdentifier: frameIdentifierData)
         let frameType = id3FrameConfiguration.frameTypeFor(identifier: frameIdentifier, version: version)
         return frameType
     }

     private func isAValid(frameType: FrameType) -> Bool {
         return frameType != .Invalid
     }

     private func toString(frameIdentifier: [UInt8]) -> String {
         return frameIdentifier.reduce("") { (convertedString, byte) -> String in
             return convertedString + String(Character(UnicodeScalar(byte)))
         }
     }
 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Â¶ÇÊûúÊàë‰ª¨ÊÉ≥Êõ¥Ê∑±ÂÖ•ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÁúã`ID3FrameContentParsingOperationFactory`„ÄÇËøô‰∏™Á±ªÂàùÂßãÂåñ‰Ωú‰∏∫ÂëΩ‰ª§‰ΩøÁî®ÁöÑÁ±ªÊù•ÂàÜÊûêÂêÑÁßçÁ±ªÂûãÁöÑÂ∏ß„ÄÇÊàëÂ∞ÜÂú®ÂÖ∂‰ªñÂ∏ñÂ≠ê‰∏≠ËÆ®ËÆ∫ÂÆÉ‰ª¨ÁöÑÂÆûÁé∞ÁªÜËäÇ(Âõ†‰∏∫Ëøô‰∏™Á±ªÂåÖÂê´‰∫ÜÂæàÂ§öÂæàÈÖ∑ÁöÑ swift ‰∏úË•øÔºåÊàëÂèØ‰ª•Áî®ÂÆÉ‰ª¨Êù•ÂÜôÂæàÂ§öÂÖ∂‰ªñÂ∏ñÂ≠êüòè).

```
class ID3FrameContentParsingOperationFactory {
    static func make() -> [FrameType : FrameContentParsingOperation] {
        let paddingRemover = PaddingRemoverUsingTrimming()
        let id3FrameConfiguration = ID3FrameConfiguration()
        return [
            .Artist: ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover, 
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.artist = frameContentWithoutPadding
            },
            .AlbumArtist: ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover,
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.albumArtist = frameContentWithoutPadding
            },
            .Album: ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover,
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.album = frameContentWithoutPadding
            },
            .Title: ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover,
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.title = frameContentWithoutPadding
            },
            .AttachedPicture: AttachedPictureFrameContentParsingOperation(
                    id3FrameConfiguration: id3FrameConfiguration,
                    pictureTypeAdapter: ID3PictureTypeAdapter(
                            id3FrameConfiguration: ID3FrameConfiguration(),
                            id3AttachedPictureFrameConfiguration: ID3AttachedPictureFrameConfiguration()
                    )
            ),
            .Year: ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover,
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.year = frameContentWithoutPadding
            },
            .Genre: ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover,
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.genre = ID3GenreStringAdapter().adapt(genre: frameContentWithoutPadding)
            },
            .TrackPosition : ID3FrameStringContentParsingOperation(
                    paddingRemover: paddingRemover,
                    id3FrameConfiguration: id3FrameConfiguration
            ) { (id3Tag: ID3Tag, frameContentWithoutPadding: String) in
                id3Tag.trackPosition = ID3TrackPositionStringAdapter().adapt(trackPosition: frameContentWithoutPadding)
            }
        ]
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ËÆ©Êàë‰ª¨ÁúãÁúã ID3TagEditor Â¶Ç‰ΩïÂêë mp3 Êñá‰ª∂ÂÜôÂÖ•‰∏Ä‰∏™Êñ∞Ê†áÁ≠æ„ÄÇÊ†áÁ≠æÁöÑÂàõÂª∫ÊòØÁî±Âú®`Mp3WithID3TagBuilder`Á±ª‰∏≠‰ΩøÁî®ÁöÑ`ID3TagCreator`Á±ªÂÆåÊàêÁöÑÔºåËøô‰∏™Á±ª‰ΩøÁî®Á£ÅÁõò‰∏äÁöÑÊñ∞Ê†áÁ≠æÂØπ mp3 Êñá‰ª∂ÊâßË°åÁúüÊ≠£ÁöÑÂÜôÊìç‰Ωú„ÄÇ`ID3TagCreator`Á±ªÁöÑ‰∏ªË¶ÅÂäüËÉΩÊòØ`create(id3Tag: ID3Tag) throws -> Data`„ÄÇ
Âú®Ëøô‰∏™ÂáΩÊï∞‰∏≠ÔºåÊ°ÜÊû∂ÊòØÁî±‰Ωú‰∏∫`ID3Tag`Á±ª‰º†ÈÄíÁªôÊ°ÜÊû∂ÁöÑÊï∞ÊçÆÂàõÂª∫ÁöÑ„ÄÇÂ¶ÇÊûúÊâÄÊúâÁöÑÂ∏ßÈ™åËØÅÈÉΩÈ°∫Âà©ÔºåÂàôÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊ†áÁ≠æÂ§¥ÔºåÂêåÊ†∑ÔºåÂ¶ÇÊûúÊ†áÁ≠æÂ§¥ÊúâÊïà(Ê†áÁ≠æÁöÑÂ§ßÂ∞èÊúâÊïà)ÔºåÂàôÊñ∞ÁöÑ`Data`ÂØπË±°ËøîÂõûÂà∞`Mp3WithID3TagBuilder`Á±ªÂπ∂ÂÜôÂÖ• mp3 Êñá‰ª∂„ÄÇ

```
class ID3TagCreator {
    private let id3FrameCreatorsChain: ID3FrameCreatorsChain
    private let uInt32ToByteArrayAdapter: UInt32ToByteArrayAdapter
    private let id3TagConfiguration: ID3TagConfiguration

    ....

    func create(id3Tag: ID3Tag) throws -> Data {
        var frames = id3FrameCreatorsChain.createFrames(id3Tag: id3Tag, tag: [UInt8]())
        if thereIsNotValidDataIn(frames: frames) {
            throw ID3TagEditorError.InvalidTagData
        }
        frames.append(contentsOf: createFramesEnd())
        let header = createTagHeader(contentSize: frames.count, id3Tag: id3Tag);
        let tag = header + frames
        if (isTooBig(tag: tag)) {
            throw ID3TagEditorError.TagTooBig
        }
        return Data(bytes: tag)
    }

    ....
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Â∏ßÊï∞ÊçÆÊòØÂ¶Ç‰ΩïÂàõÂª∫ÁöÑÔºüÁ≠îÊ°àÂú®`ID3FrameCreatorsChain`Âíå`ID3FrameCreatorsChainFactory`Á±ª‰∏≠„ÄÇÂ∑•ÂéÇÁ±ªÂàõÂª∫‰∫Ü‰∏Ä‰∏™ [**Ë¥£‰ªªÈìæ**](https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern) ÔºåÂÖ∂‰∏≠`ID3FrameCreatorsChain`Á±ªÁöÑÊØè‰∏™Â≠êÁ±ªÈÉΩÊòØ‰∏Ä‰∏™‰∏ìÈó®ÂåñÔºåË¥üË¥£ÁºñÂÜôÁâπÂÆöÁöÑÂ∏ßÁ±ªÂûã„ÄÇÂú®ÈìæÁöÑÊú´Â∞æÔºåËøîÂõû‰∏Ä‰∏™`[Uint8]`Êï∞ÁªÑ„ÄÇËøôÂü∫Êú¨‰∏äÊòØ‰∏Ä‰∏™Â≠óËäÇÊï∞ÁªÑÔºåÁÑ∂ÂêéÂú®`ID3TagCreator`Á±ªÁöÑ`create(id3Tag: ID3Tag) throws -> Data`Êú´Â∞æË¢´ËΩ¨Êç¢Êàê‰∏Ä‰∏™`Data`ÂØπË±°(ËøôÈáå‰πüÊ∑ªÂä†‰∫ÜÊ†áÁ≠æÂ§¥ÔºåÊ≠£Â¶ÇÊàë‰ª¨‰πãÂâçÁúãÂà∞ÁöÑ)„ÄÇ‰∏ãÈù¢ÊÇ®ÂèØ‰ª•ÊâæÂà∞ÂåÖÂê´Âú®`ID3FrameCreatorsChainFactory`Á±ª‰∏≠ÁöÑÈìæÂàõÂª∫(ÂêåÊ†∑ÔºåÊàë‰ª¨Â∞ÜÂú®‰ª•ÂêéÁöÑÂÖ∂‰ªñÂ∏ñÂ≠ê‰∏≠ÁúãÂà∞Èìæ‰∏≠ÂåÖÂê´ÁöÑÂêÑÁßçÁ±ªÁöÑËØ¶ÁªÜ‰ø°ÊÅØüòúËøô‰∏™Ê°ÜÊû∂ÂåÖÂê´‰∫ÜÂ§™Â§öÂæàÈÖ∑ÁöÑ swift ‰∏úË•øüò≥).ÈúÄË¶ÅÊ≥®ÊÑèÁöÑ‰∏Ä‰ª∂ÈáçË¶Å‰∫ãÊÉÖÊòØ:`ID3AttachedPicturesFramesCreator`Á±ªËÉΩÂ§üÂàõÂª∫ÈôÑÂä†ÁöÑÂõæÁâáÊ°ÜÊû∂ÔºåÂ∞ÜÂ∞ÅÈù¢ÁöÑÁ±ªÂûãËÆæÁΩÆ‰∏∫ ID3 Ê†áÂáÜ‰∏≠ÂÆö‰πâÁöÑÂàóË°®‰∏≠ÁöÑ‰∏ÄÁßç„ÄÇËøôÊ†∑ÔºåÊàëÂ∞±ÂèØ‰ª•‰ΩøÁî®ÊàëÁöÑ [ID3TagEditor Ê°ÜÊû∂Áî®Ê≠£Á°ÆÁöÑÊï∞ÊçÆÊù•Ê†áËÆ∞ mp3ÔºåÊàëÈúÄË¶ÅËøô‰∫õÊï∞ÊçÆÊù•Âú®ÊàëÁöÑ clio](///2018/05/07/born-id3tageditor-mp3id3tagger.html) ÁöÑÂ™í‰ΩìÂØºËà™Á≥ªÁªü‰∏äÊòæÁ§∫ mp3 Êñá‰ª∂Â∞ÅÈù¢ÔºÅÔºÅÔºÅüòå

```
class ID3FrameCreatorsChainFactory {
    static func make() -> ID3FrameCreatorsChain {
        let paddingAdder = PaddingAdderToEndOfContentUsingNullChar()
        let frameConfiguration = ID3FrameConfiguration()
        let uInt32ToByteArrayAdapter = UInt32ToByteArrayAdapterUsingUnsafePointer()
        let frameContentSizeCalculator = ID3FrameContentSizeCalculator(
                uInt32ToByteArrayAdapter: uInt32ToByteArrayAdapter
        )
        let frameFlagsCreator = ID3FrameFlagsCreator()
        let frameFromStringUTF16ContentCreator = ID3FrameFromStringContentCreator(
                frameContentSizeCalculator: frameContentSizeCalculator,
                frameFlagsCreator: frameFlagsCreator,
                stringToBytesAdapter: ID3UTF16StringToByteAdapter(paddingAdder: paddingAdder,
                                                                  frameConfiguration: frameConfiguration)
        )
        let frameFromStringISO88591ContentCreator = ID3FrameFromStringContentCreator(
            frameContentSizeCalculator: frameContentSizeCalculator,
            frameFlagsCreator: frameFlagsCreator,
            stringToBytesAdapter: ID3ISO88591StringToByteAdapter(paddingAdder: paddingAdder,
                                                                 frameConfiguration: frameConfiguration)
        )
        let albumFrameCreator = ID3AlbumFrameCreator(
                frameCreator: frameFromStringUTF16ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        let albumArtistCreator = ID3AlbumArtistFrameCreator(
                frameCreator: frameFromStringUTF16ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        let artistFrameCreator = ID3ArtistFrameCreator(
                frameCreator: frameFromStringUTF16ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        let titleFrameCreator = ID3TitleFrameCreator(
                frameCreator: frameFromStringUTF16ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        let attachedPictureFrameCreator = ID3AttachedPicturesFramesCreator(
                attachedPictureFrameCreator: ID3AttachedPictureFrameCreator(
                        id3FrameConfiguration: frameConfiguration,
                        id3AttachedPictureFrameConfiguration: ID3AttachedPictureFrameConfiguration(),
                        frameContentSizeCalculator: frameContentSizeCalculator,
                        frameFlagsCreator: frameFlagsCreator
                )
        )
        let yearFrameCreator = ID3YearFrameCreator(
                frameCreator: frameFromStringISO88591ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        let genreFrameCreator = ID3GenreFrameCreator(
                frameCreator: frameFromStringISO88591ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        let trackPositionFrameCreator = ID3TrackPositionFrameCreator(
                frameCreator: frameFromStringISO88591ContentCreator,
                id3FrameConfiguration: frameConfiguration
        )
        albumFrameCreator.nextCreator = albumArtistCreator
        albumArtistCreator.nextCreator = artistFrameCreator
        artistFrameCreator.nextCreator = titleFrameCreator
        titleFrameCreator.nextCreator = yearFrameCreator
        yearFrameCreator.nextCreator = genreFrameCreator
        genreFrameCreator.nextCreator = trackPositionFrameCreator
        trackPositionFrameCreator.nextCreator = attachedPictureFrameCreator
        return albumFrameCreator
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Â∞±ÊòØËøôÊ†∑ÔºÅÔºÅÔºÅËøôÊòØ ID3TagEditor Ê°ÜÊû∂ÁöÑ‰∏ÄËà¨ÁªìÊûÑ„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Êõ¥Â§öÂú∞‰∫ÜËß£Ëøô‰∏™Ê°ÜÊû∂Ôºå‰Ω†ÂèØ‰ª•ÁúãÁúã[ÊàëÁöÑ github repo](https://github.com/chicio/ID3TagEditor) Âπ∂ÂºÄÂßã‰∏∫‚ù§Ô∏èÂÅö‰∫õË¥°ÁåÆüíú„ÄÇÊòæÁÑ∂Ôºå‰Ω†‰πüÂøÖÈ°ªÁªßÁª≠ÈòÖËØªÊàëÁöÑÂçöÂÆ¢ÔºåÂπ∂Á≠âÂæÖÊàëÂú®‰∏äÈù¢ÊâøËØ∫ÁöÑÂÖ≥‰∫éÂÖ∂‰ªñÂÆûÁé∞ÁªÜËäÇÁöÑÂÖ∂‰ªñÂ∏ñÂ≠ê(Â¶ÇÊûú‰Ω†ÊáíÂæóËá™Â∑±ÂéªÁúãÁöÑËØùüòòüòÜ).

*ÂéüËΩΩ‰∫é[https://www . fabrizioduroni . it](https://www.fabrizioduroni.it/2018/05/08/id3tageditor-swift-read-write-id3-tag-mp3.html)2018 Âπ¥ 5 Êúà 8 Êó•„ÄÇ*