# 为 hacktoberfest 帮忙搭建 Gradle

> 原文:[https://dev . to/jmfayard/help-out-with-gradle-builds-for-hacktoberfest-1c](https://dev.to/jmfayard/helping-out-with-gradle-builds-for-hacktoberfest-1c1c)

使用[https://gradle.org](https://dev.toGradle)作为你的构建工具？请继续阅读。

# [](#hacktoberfest)#hacktoberfest

关于`OktoberFest`，你必须知道的是，在德国，它通常在九月举行。不要问我为什么。

所以我已经为`#hacktoberfest`贡献了一个拉取请求

# [![GitHub logo](img/75095a8afc1e0f207cda715962e75c8d.png) 升级简化 Gradle build # hacktoberfest# 44](https://github.com/FultonBrowne/Ara-android/pull/44)

[![jmfayard avatar](img/53eb4d64556bb6b9878d7bff68b1008d.png)](https://github.com/jmfayard) **[jmfayard](https://github.com/jmfayard)** posted on [<time datetime="2019-09-25T21:35:47Z">Sep 25, 2019</time>](https://github.com/FultonBrowne/Ara-android/pull/44)

## [](#what-type-of-pr-is-this-check-all-applicable)这是什么类型的公关？(勾选所有适用选项)

*   [x]重构
*   [ ]功能
*   [ ]错误修复
*   [ ]文档更新

## [](#description)描述

你好，我在 hacktoberfest 上发现了你的项目，我想我会帮助你维护你的库的构建，以使用最新和最好的版本

[https://dev . to/fultonbrowne/great-hacktoberfest-projects-NMP](https://dev.to/fultonbrowne/great-hacktoberfest-projects-nmp)

我不会更新自己的依赖版本，但你现在可以通过编辑“gradle.properties”轻松做到这一点。

要稍后搜索依赖项更新，只需运行`./gradlew :refresionVersions`

## [](#related-tickets--documents)相关车票&单据

[https://github.com/jmfayard/buildSrcVersions/issues/77](https://github.com/jmfayard/buildSrcVersions/issues/77)[https://github.com/jmfayard/buildSrcVersions/issues/82](https://github.com/jmfayard/buildSrcVersions/issues/82)[https://dev . to/jmfayard/the-one-grad le-trick-that-superses-all-others-5 bpg](https://dev.to/jmfayard/the-one-gradle-trick-that-supersedes-all-the-others-5bpg)

[View on GitHub](https://github.com/FultonBrowne/Ara-android/pull/44)

第二个！

# [![GitHub logo](img/75095a8afc1e0f207cda715962e75c8d.png) 升级构建+升级版本 #10](https://github.com/FultonBrowne/Ara-Server/pull/10) 

[![jmfayard avatar](img/53eb4d64556bb6b9878d7bff68b1008d.png)](https://github.com/jmfayard) **[jmfayard](https://github.com/jmfayard)** posted on [<time datetime="2019-09-26T05:49:27Z">Sep 26, 2019</time>](https://github.com/FultonBrowne/Ara-Server/pull/10)

## [](#what-type-of-pr-is-this-check-all-applicable)这是什么类型的公关？(勾选所有适用选项)

*   [x]重构
*   [ ]功能
*   [ ]错误修复
*   [ ]文档更新

## [](#description)描述

同[https://github.com/FultonBrowne/Ara-android/pull/44](https://github.com/FultonBrowne/Ara-android/pull/44)

## [](#related-tickets--documents)相关车票&单据

[https://github.com/jmfayard/buildSrcVersions/issues/77](https://github.com/jmfayard/buildSrcVersions/issues/77)[https://github.com/jmfayard/buildSrcVersions/issues/82](https://github.com/jmfayard/buildSrcVersions/issues/82)[https://dev . to/jmfayard/the-one-grad le-trick-that-superses-all-others-5 bpg](https://dev.to/jmfayard/the-one-gradle-trick-that-supersedes-all-the-others-5bpg)

注意:如果你正在使用`./gradlew :refreshVersions`，你真的不再需要`dependabot`

[View on GitHub](https://github.com/FultonBrowne/Ara-Server/pull/10)

如果你看一下，我也做了同样的事情。让我们打开它:

## [](#i-updated-gradle)我更新了 Gradle:

总是个好主意。你得到更多的功能，更少的错误，更快的速度。

`$ ./gradlew wrapper --gradle-version 5.6.2`
T1】

## [T3 我添加了`build-scan`和`buildSrcVersions` Gradle 插件:](#i-added-the-raw-buildscan-endraw-and-raw-buildsrcversions-endraw-gradle-plugins)

```
// build.gradle

plugins {
    // :refreshVersions see https://github.com/jmfayard/buildSrcVersions/issues/77
    id("de.fayard.buildSrcVersions").version("0.6.1")
    id ("com.gradle.build-scan").version("2.4.2") 
}

buildSrcVersions {
  // Documented at https://github.com/jmfayard/buildSrcVersions/issues/53
}

buildScan {
    // ./gradlew --scan $TASKNAME 
    // see https://dev.to/jmfayard/the-one-gradle-trick-that-supersedes-all-the-others-5bpg

    termsOfServiceUrl = "https://gradle.com/terms-of-service"
    termsOfServiceAgree = "yes"
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#i-run-raw-gradlew-refreshversions-endraw-)我跑了`$ ./gradlew refreshVersions`

这将自动从项目依赖关系中提取版本，*和*允许找到更新的可用版本。

```
## gradle.properties
# user settings go here
# some.gradle.property=value 
# Dependencies and Plugin versions with their available updates
# Generated by $ ./gradlew refreshVersions
# You can edit the rest of the file, it will be kept intact
# See https://github.com/jmfayard/buildSrcVersions/issues/77 plugin.com.github.ben-manes.versions=0.25.0
plugin.de.fayard.buildSrcVersions=0.6.1
version.com.android.tools.build..gradle=3.5.0
version.play-services-location=17.0.0
version.bottom-navigation-bar=2.1.0
version.lifecycle-extensions=2.0.0
#                # available=2.1.0 version.org.jetbrains.kotlin=1.3.31
#                # available=1.3.50 version.appcompat=1.1.0-rc01
#     # available=1.1.0 version.cardview=1.0.0
version.core-ktx=1.0.2
#    # available=1.1.0
# .... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

好奇这个功能？

阅读位于 [gradle :refreshVersions”的文档，生成包含版本和可用更新的 gradle.properties】](https://github.com/jmfayard/buildSrcVersions/issues/77)

*   注意 1:我自己不更新依赖项，这是项目所有者应该做的！
*   注意 2:我必须将这个样板代码复制/粘贴到 settings.gradle 中，这样插件就可以获得正确的版本

## [](#i-add-the-missing-raw-gradlew-test-endraw-and-raw-gradlew-install-endraw-)我补充缺失的`./gradlew test`和`./gradlew install`

谷歌搞砸的一个重要原因是，与地球上基本上所有的软件项目不同，Android 项目默认没有相当于`$ npm install`和`$ npm test`的功能。

更糟糕的是，添加几行到`./build.gradle`
真的很简单

```
// build.gradle
tasks.create("install") {
    group = "custom"
    description = "Install the app"
    dependsOn(":app:installDebug")
}

tasks.create("test") {
    group = "custom"
    description = "Run the unit tests"
    dependsOn(":app:testDebugUnitTest")
}
tasks.create("hello") {
    group = "custom"
    description = "Empty Hello World task, useful to debug build problems"
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

额外收获:你知道你应该维护一个自述文件，但你懒得去做？这部分现在可以自我记录了！

```
$ ./gradlew tasks --group=custom

> Task :tasks

------------------------------------------------------------
Tasks runnable from root project
------------------------------------------------------------

Custom tasks
------------
install - Install the app
test - Run the unit tests
hello - Empty Hello World task, useful to debug build problems

To see all tasks and more detail, run gradlew tasks --all

To see more detail about a task, run gradlew help --task <task> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# 我用构建扫描插件检查构建

参见我之前的文章:

[![jmfayard](img/2f3388fbdac0b9ae9bf4b1bda0543ae3.png)](/jmfayard) [## 使用 Gradle 构建-扫描！

### 让-米歇尔·法耶德□9 月 22 日至 19 日□4 分钟阅读

#android #kotlin #gradle](/jmfayard/the-one-gradle-trick-that-supersedes-all-the-others-5bpg)

利用这些信息，我可以通过向 gradle.properties
添加几行代码来提高构建性能

```
## gradle.properties

# See https://dev.to/jmfayard/configuring-gradle-with-gradle-properties-211k
org.gradle.caching=true
org.gradle.parallel=true
kotlin.code.style=official
studio.projectview=true 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

见我关于 gradle.properties 的文章

[![jmfayard](img/2f3388fbdac0b9ae9bf4b1bda0543ae3.png)](/jmfayard) [## 使用“gradle.properties”配置 Gradle

### 让-米歇尔·法耶德□9 月 26 日至 19 日□3 分钟阅读

#java #kotlin #android #hacktoberfest](/jmfayard/configuring-gradle-with-gradle-properties-211k)

# [](#you-can-do-it-too)你也可以！

关于我的利基的最好的事情是，我所做的是完全通用的，并使开发人员能够做她最了解的事情！