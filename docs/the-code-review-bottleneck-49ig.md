# 代码审查瓶颈

> 原文：<https://dev.to/anze3db/the-code-review-bottleneck-49ig>

代码审查真的很有用，但问题是他们有一个令人讨厌的习惯，那就是让你很酷的新特性停留在等待审查者的队列中。让我们看看如何确保尽可能高效地完成代码审查。让我们看看如何在不妨碍特性速度的情况下进行高质量的代码评审。

# 瓶颈

代码审查本质上是一个瓶颈。它们减缓了产品开发过程中的功能流程。从这个意义上来说，它们违背了你的目标，即尽可能快地将高质量的特性交付给你的客户。但是因为代码评审可以帮助你的团队发布更少的错误和更高质量的特性，所以它们是值得的。

你发布新功能的速度越快，你的公司就能更好地适应新的市场趋势和解决用户问题。能在几周内交付的团队胜过能在几个月甚至几年内交付的团队。

如果你的拉取请求堆积如山并持续数周，这可能是你的流程需要改进的信号。

# 等待时间

代码审查的最大问题是等待时间。

当代码的作者打开一个 pull 请求并标记它准备好接受审查时，他们需要**等待**直到另一个人出现并审查它。这可能是打开拉取请求后的 1 小时(如果你幸运的话)，也可能需要几天甚至几周(如果你不幸运的话)。

在第一篇评论发布后，在作者看到评论之前，几乎总会有一点等待时间，如果作者需要根据反馈调整代码，等待时间会更长。

这个过程可以持续多个周期，并且每次切换都会增加一点等待时间。这就是为什么一个两周前就准备好的简单功能还没有发布。

等待时间对我们程序员来说尤其痛苦，因为每次等待后，上下文都会丢失，需要重新构建。等待时间越长，就越难记住所有的代码变化是如何适应可发布特性的。

# 解

只有一种方法可以解决等待时间的问题。就是尽量把它降到最低。实现这一点的最好方法是让代码评审**成为你的团队的首要任务**。

当一个拉请求准备好接受审查时，审查者应该放下所有的事情，集中精力尽快进行审查和合并。切换之间的等待时间应该以分钟计算，而不是以小时或天计算。

当一个拉请求被审查并需要更新时，作者应该放下一切，专注于回复评论。如果可能的话，再次尝试将等待时间限制在几分钟而不是几小时。如果审查需要大量的代码更改，您应该与审查者讨论，以确保更改将为客户带来商业价值。

“因为代码审查而放弃一切”的规则对我们开发人员来说是反直觉的。我们喜欢在流动中，无论出于什么原因都不想打破它。这就是我们感到富有成效的方式。代码审查不会让我们感到有生产力，因为当特性发布时，我们不会被认可。通常，都是作者在邀功。

如果你遵循代码审查是重中之重的规则，你的个人生产力将会受到打击。

# 但是你的团队的生产力将会飙升

你个人的生产力远不如你团队的生产力重要。当你的团队向用户发布特性时，效率最高。当一个特性准备好接受代码审查时，开发人员就说它已经准备好部署到生产中了。此时，您的团队最重要的目标是确保代码是可发布的。

对你的团队来说，除了做代码评审之外的任何事情都是反生产的。如果你花了一天的时间在你的特性上，而不是回顾一个拉请求，你就阻止了一个特性的部署。更糟糕的是，您正在创建一个新的瓶颈，并且正在创建更多的工作，这将导致更多的上下文切换。

这就是拉取请求堆积和特征速度骤降的原因。

将代码审查作为重中之重绝对至关重要。当代码评审到来时，你需要停止所有其他非生产性的活动。除了解决影响客户的生产问题之外，这几乎是任何事情。

如果您说当前会议需要提前结束，因为您需要查看一个新打开的拉式请求，那么您就是我的英雄。🤙

在下一篇博文中，我们将研究一些技术，您可以使用这些技术来尽可能快地检查和合并拉请求。剧透:都是为了减少批量！