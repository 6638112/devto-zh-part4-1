# 创造你自己的“代码语言”

> 原文：<https://dev.to/hurricaneinteractive/creating-your-own-code-language-1j1i>

首先，抱歉的标题。在本文中，“代码语言”(CL)指的是项目的代码风格。类似于一个设计系统如何决定一个项目/公司的视觉识别；CL 从架构的角度决定了语法和项目结构。

这篇文章并不是如何创建最佳竞争对手的“一步一步”指南。我想给大家一些我的想法，并希望引发更广泛的社区对这个问题的讨论。

这个概念并不新鲜。搜索“创建一个编码标准”将会返回大量的文章，这些文章都给出了这个主题的优缺点。然而，我认为，如果做得好，CL 可以帮助提高可读性、生产率和入职，并允许团队成员分享他们的意见，以创建更好的代码库。

## 这个为什么

我最近开始致力于一个新产品，我想推出，并可能赚钱，因为这一点，我知道我不能做我通常做的事情；也就是说，编写肮脏的(有时是粗糙的)代码，并以一个不稳定的、只能通过完全重构才能挽救的产品结束。我需要为自己和其他人制定一些有助于项目的基本规则(如果我能达到那个阶段的话)。

## 我的方法

我决定设置一些有助于可读性的规则，而不是设置非常严格的“该做什么”和“不该做什么”。这些规则不会妨碍生产力，有些规则可以用林挺规则或 CI 工具来捕捉。下面是我的“规则”的一些例子:

**1。map、filter、reduce 等需要命名函数，而不是内联函数。**
这将有助于保持代码简洁，分离功能以便于测试，并允许您在需要时轻松扩展功能的复杂性。

```
✅ [].map(funcName)
❌ [].map(() => {...}) 
```

Enter fullscreen mode Exit fullscreen mode

**2。异步/等待而不是承诺。**
对数据进行调用时，使用 async/await 代替解析承诺。

```
✅ const fetch = async () => { const data = await ajax(url) }
❌ const fetch = () => { ajax(url).then(...).catch(...) } 
```

Enter fullscreen mode Exit fullscreen mode

到目前为止，这些规则并没有阻碍生产力，只是有助于可读性，并允许在业务需求变化时可以轻松扩展的精简代码。如果这些规则中有任何一条不能被遵守，开发者可以简单地在注释文档中添加`@see <url>`，让其他开发者知道为什么这些规则被忽略了。

这些规则不仅仅局限于代码；对于我的项目，我创建了同样适用于 Git 提交、分支和文件夹结构等的规则。

### 文件夹结构

一个好的文件夹结构可以帮助开发人员轻松地找到并创建不同的组件(React for this project)。下面是一个我打算使用的文件夹结构的例子:

```
ComponentName
  - ComponentName.tsx
  - index.ts
  - helpers
    - function.ts
  - __test__
    - ComponentName.test.ts
    - function.test.ts
  - __spec__
    - ComponentName.stories.tsx 
```

Enter fullscreen mode Exit fullscreen mode

这种结构允许所有“组件的功能”、“功能和视觉测试”被隔离，使调试更容易。

然而，手动创建这个结构似乎很麻烦，使用像 [ccr](https://www.npmjs.com/package/create-components-react) 这样的工具或者创建你自己的内部 CLI 将允许这个结构自动生成。

> 不要脸的塞。我为一个不同的项目创建的一个例子。

### Git 工作流程

这些规则适用于团队成员如何创建提交、分支和评审过程。我想出的工作流程非常简单，可能已经做过一百万次了。下面是我如何处理分支的概要:

1.  **高层分支** - `master`、`test/*`、`dev`
2.  **任务级分支** -为每个特性、bug、故事等创建一个新的分支，并为任务添加一个标签 ID 或一个小描述
    1.  `feature/24`
    2.  `bug/no-confirmation-email`
    3.  `story/login-flow`
3.  当与“更高”级别的分支合并时，删除您的本地和远程分支。

## 工具

有很多工具可以让你创建规则和代码，这些规则和代码在被多个开发人员处理时保持一致。以下是我经常使用的一些:

1.  Husky 有助于防止不良代码被提交。
2.  允许你为你的代码创建风格指南。
3.  更漂亮的 -有助于保持所有代码的格式一致。
4.  [BundlePhobia](https://bundlephobia.com/) -在将包添加到项目之前检查包的大小。

## 关闭思绪

你需要和你的团队一起制定你的 CL 规则，但这不应该引发长达一周的争论；尝试用自动化工具解决尽可能多的问题，并在代码评审过程中捕捉任何其他问题。当引入一条新规则时，从那一点开始执行它，并且只在有时间的时候重构代码。CL 背后的主要思想是帮助提高生产率，给新来者一套可遵循的规则，并帮助提高代码的可读性；不要在团队之间制造重构和紧张的循环。

我认为创建一种代码语言可以产生类似于设计系统的效果；这有助于消除猜测，因为已经为您做出了许多决定，您最终可以专注于创建产品。

你有什么想法？

* * *

谢谢你看我的文章，它真的意义重大！❤️，请提供任何反馈或意见，我总是期待改进和有意义的讨论。这篇文章是我的 [#myweekinjs](http://myweekinjs.com) 挑战的一部分，如果你有兴趣了解更多，我还有其他有趣的文章。

### 👋下次见！