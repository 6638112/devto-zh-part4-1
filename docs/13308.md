# 逆天而行

> 原文：<https://dev.to/sbowenwilliams/going-against-the-grain-k09>

尽管标题如此，这篇博客文章实际上是关于什么时候*而不是*去违背常规。

> 贝特曼:87 年，休伊发布了这个；前进！他们最有成就的专辑。我觉得他们毫无争议的代表作是《臀要方》。一首这么朗朗上口的歌，大部分人大概都没听歌词。但他们应该这样做，因为这不仅仅是从众的乐趣和趋势的重要性。这也是对乐队本身的个人陈述。

[![](img/1fe23134b9bb1126363c1f7b4f6fa29b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--3Z9ymkBe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/27xubwgdnf5y2ozs8mo7.jpeg)

让我来介绍一下:
我们的 monolith rails 应用程序已经有 7 年历史了。到了可以喝酒的年龄了。我被要求创建一个不依赖于任何特定客户端的*新*类型的用户。

我有吗...

1.  让自己准备一些[霰弹枪手术](https://en.wikipedia.org/wiki/Shotgun_surgery)并找到`user.client`的每一个实例？
2.  随波逐流，维持所有用户都有客户端的预期？

好吧，因为我不是一个聪明人，我先选择了第一种。我告诉自己，这将会更加优雅。

> 旁白:不是的。

创建一个没有客户端的用户的问题是，在过去 7 年中编写的所有代码都期望一个用户-客户端关系，这种关系在任何地方都会中断，而且是一次中断。我发现自己在调试身份验证、后台数据处理作业、前端 bug...

我沿着这条路走了几天，想着如果我踩出所有的 bug，我可以合并我的“优雅”解决方案。幸运的是，一位更聪明的工程师介入进来，传授了一些关于从众的快乐的智慧话语。

为了增加这个功能(并且不需要对整个应用程序进行回归测试)，我需要找到一个在多年的期望范围内运行的解决方案。改变我们应用程序的基本期望是非常不必要的，就像用户拥有客户端一样。

那就是*好的*。

是的，作为软件工程师，我们的对象尽可能松散地联系在一起是一种美德。然而，在应用程序生命周期的大部分时间里(它让我们走到了这一步),拥有客户端的用户不太可能改变，反之亦然。在应用程序生命周期的大部分时间里，编写如果期望值改变就会崩溃的代码是完全没问题的。

在这一点上，由我来决定我是否想要反抗期望并承担改变多年代码的责任，或者我是否想要用应用程序的纹理来编写我的代码。

这并不是一个很难的选择。

> 我曾是一个叛徒，我曾四处游荡
> 但我无法接受惩罚，不得不安定下来
> ——休易·路易斯和新闻，臀部被广场