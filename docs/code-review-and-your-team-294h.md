# 代码评审和你的团队

> 原文：<https://dev.to/integerman/code-review-and-your-team-294h>

假设你在一个小的软件开发团队中——或者在一个部门中，或者在一个更小的组织中。您可能正在进行代码评审，也可能没有，您可能认为它们很重要，也可能认为它们不重要(提示:它们很重要)。

作为一名软件工程师和软件工程经理，我认为代码评审是开发团队所做的最重要和最有价值的事情之一。

# 代码评审的类型

代码评审的范围可以从没有评审到正式的带有评审文档的代码评审会议。

*   最不费力的是**没有代码评审**。听起来确实如此。开发人员提交他们的代码并继续下一个任务(注意，这并不是说他们测试或不测试他们的代码，这完全集中在审查代码变更的内容上)。

*   在**自我审查**文化中，开发人员在完成一个功能时审查他们自己的代码。这有助于捕捉愚蠢的错误，比如提交不应该版本化的文件，并作为基本的健全性检查。

*   比这更进一步的是，在提交开发人员的代码之前，叫其他人在他们的办公桌前检查代码。这也被称为**桌面检查**，并且给出了代码的外部视角，但是审查者被限制在很短的时间内，并且没有充分的自由来检查代码。

*   越来越正式的是，开发人员可以在闲暇时将代码发送给其他人进行同行评审。这可以通过电子邮件、GitHub 或 GitLab 等源代码控制系统或 Upsource 等正式的代码审查工具来完成。

*   大大提升正式程度，团队可以在两个或更多个人之间召开**代码审查会议**,以团队的形式讨论变更。

*   最后，在更极端的形式层面，进行正式的**代码遍历**，逐行检查变更，并记录缺陷和其他发现的问题。

这是代码评审中形式的一个尺度，形式越多不一定越好。适当的严格程度取决于所讨论的系统和团队。一些重要因素包括:

*   变化的幅度
*   系统的敏感性/故障的严重性
*   团队的技能水平
*   团队的知识水平
*   相关领域的代码质量
*   产品供应的成熟度
*   用户群的规模

团队不一定需要为每个变化坚持相同的过程。与修复空引用异常相比，对业务关键型系统的大规模重构可能需要更严格的审查。

# 代码评审的价值

当然，代码评审的价值来自于发现 bug，强制执行一种通用的代码风格，并且知道代码评审将会发生这一行为增加了提交的代码的质量，但是还有其他的好处。

代码评审提高了代码的质量，但也提高了团队的质量。通过让其他人参与到代码评审中来，你就把应用程序的知识传播给了其他人。如果一个开发人员外出度假或者忙于另一个项目，评审人员也更有可能参与到那个项目中。此外，如果在发布后的产品中出现了 bug，开发人员和评审人员有机会记住所做的更改，因此让其他人参与到过程中可以提高团队对紧急工作做出响应的能力。

开发人员还将通过审查他们的代码从其他人那里获得技巧和实践，并将这些实践合并到他们自己的代码中。更有经验的开发人员会教年轻的开发人员新的语言特性和库，让他们的生活更轻松，并帮助他们不断学习。此外，不同的开发人员有不同的关注点。一个以性能为导向的评审者会给出与一个以架构为中心的开发人员或一个以安全性或可测试性为中心的开发人员完全不同的代码反馈。

# 充分利用代码评审

我发现了一些从代码评审中获得最大收益的关键要点。其中大部分是针对中小型软件即服务(SaaS)组织的，因为这是我的主要经验所在，但是这些实践应该对许多其他类型的组织有益。

排名不分先后:

对于大多数评审，向一两个评审者发送同行评审请求就足够了。对于较大且风险较高的评审，提交者或评审者可以请求更正式的评审过程。或者，团队可以有一些硬性规定，例如:

*   如果修改的行数超过 250，则需要升级审查流程
*   如果接触了某些文件或方法，则需要升级审查流程
*   如果只是对应用程序数据进行更改，那么就不需要那么正式了

在指派评审员时，我喜欢指派一个主题专家进行评审，也可以指派一个资历较浅或不熟悉该应用程序的人。这有助于传播知识，并提供一个安全网。

当实际审查代码时，我喜欢一遍一遍地检查代码。首先，我将把代码作为一个整体来检查，以寻找更改的文件、更改的类型以及文件的整体形状。接下来，我将再次查看代码，从功能的角度看引入了哪些具体的更改。之后，我将着眼于架构、可维护性和代码风格。我通常会以可测试性、性能和安全性作为结束。通过强迫自己透过一系列镜头来看代码，我可以欺骗我的大脑以新的视角来关注事物，并找到否则我不会发现的东西。

我喜欢通过合并请求来管理代码评审，并在描述中包括以下细节:

*   围绕变革的商业逻辑
*   任何技术债务、架构或测试性变更
*   任何被考虑/未被淘汰的替代方案
*   开发人员测试变更的计划

最后一点特别重要，因为代码审查应该验证或发现开发人员计划中的错误，以确保代码更改不会引入缺陷。这可以像变更中包含的单元测试一样简单，或者类似于“我在 IE 和 Chrome 中测试了这个屏幕，作为访客和认证用户，使用了特性 X、Y 和 Z”

* * *

总的来说，代码评审是一种非常有用的方法，可以改善你的代码和你的团队，也是一种传播知识、经验和不断提高代码质量和团队技能的重要方法。