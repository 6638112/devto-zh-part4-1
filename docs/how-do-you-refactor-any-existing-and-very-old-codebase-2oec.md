# 你如何重构任何现有的非常旧的代码库？

> 原文：<https://dev.to/wajahatkarim/how-do-you-refactor-any-existing-and-very-old-codebase-2oec>

所以在工作中，我一直在做快 2 年的 codebase。好像是一些刚开始学习 Android 开发的学生写的。以下是一些关于 codebase 的简单事实:

*   没有 MVP、MVVM 之类的建筑。每个单独的 Activity 类都做 UI 工作、数据持久化、网络调用、深度链接集成、业务逻辑等等。这导致了具有 20，000 行代码的类，并且使得代码导航更加困难。

*   一些活动类包括 3-4 个屏幕的代码。类似的布局有 4-5 个子布局，这些是根据应用程序的状态显示/隐藏。同样，每个屏幕的逻辑、网络调用、持久性等都属于同一个活动类。

*   代码是用 Java 编写的，并且使用了很多旧的库，比如凌空等。我最近转移了代码库，使用 AndroidX，这本身就是一个大问题。没有材料成分或任何接近材料设计的东西。有时候感觉设计师更熟悉 iOS。所以设计模式，UI 交互更像 iOS 的方式。所以有时候在 Android 中创建这样的东西变得很难。

*   该应用程序使用大量的口味和维度来创建白色标签的应用程序，每个客户端使用不同的服务器，数据库，配色方案，以及启用哪些功能等。

现在，我们每天都在扩大客户数量。我们希望将代码库重构为 Kotlin，最好至少使用一点架构。我们目前正在从所有类中移除网络调用，并在开始时将它们转移到一个存储库类。

我们该如何着手？我们很想知道您的反馈。