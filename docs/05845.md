# ASP.NET MVC 5 国际化

> 原文：<https://dev.to/realvino/asp-net-mvc-5-internationalization-29oh>

如果你的网站面向来自世界各地的用户，这些用户可能会喜欢用他们自己的语言浏览你的网站内容。创建一个多语言网站不是一件容易的事情，但它肯定会让你的网站接触到更多的观众。幸运的是。NET Framework 已经有了支持不同语言和文化的组件。

我们将构建一个包含以下特性的 ASP.NET MVC 5 web 应用程序:

它可以显示不同语言的内容。它会自动检测用户浏览器中的语言。
它允许用户覆盖浏览器的语言。【ASP.NET T2】全球化与本土化
国际化包括全球化和本土化。全球化是设计支持不同文化的应用程序的过程。本地化是为给定的区域性自定义应用程序的过程。

区域性名称的格式为-，其中是语言代码，是子区域性代码。例如，es-CL 代表西班牙语(智利)，en-US 代表英语(美国)。

反正国际化往往缩写成“I18N”。缩写取第一个和最后一个字母以及它们之间的字母数，所以 18 代表第一个“I”和最后一个“N”之间的字母数。这同样适用于全球化(G11N)和本地化(L10N)。

ASP.NET 跟踪两个文化值，文化和 UICulture。区域性值确定依赖于区域性的函数的结果，如日期、数字和货币格式。UICulture 确定 ResourceManager 将为页面加载哪些资源。ResourceManager 只是查找由 CurrentUICulture 确定的特定于区域性的资源。每一根线。NET 有 CurrentCulture 和 CurrentUICulture 对象。因此，ASP.NET 在呈现依赖于文化的函数时会检查这些值。例如，如果当前线程的区域性(CurrentCulture)设置为“en-US”(英语，美国)，则为 DateTime。Now.ToLongDateString()显示“2011 年 1 月 8 日星期六”，但是如果 CurrentCulture 设置为“es-CL”(西班牙语，智利)，则结果将是“sábado，08 de enero de 2011”。

现在，让我们回顾一下目前为止使用的术语:

全球化(G11N):使一个应用程序支持不同语言和地区的过程。本地化(L10N):为给定的语言和地区定制应用程序的过程。国际化(I18N):描述全球化和本地化。
文化:它是一种语言，也可以是一个地区。
地区:地区和文化是一样的。
非特定区域性:有特定语言但没有地区的区域性。(如“en”、“es”)
特定文化:具有特定语言和地域的文化。(例如“en-US”、“en-GB”、“es-CL”)
为什么我们需要一个地区？光有一门语言还不够吗？你可能根本不需要一个区域。的确，美国的英语和英国的英语不一样，但是如果你的应用程序只是向来自这些说英语国家的人显示可读的英语文本，你就不需要一个地区。当您需要处理数字、日期和货币时，问题就出现了。例如，比较两个不同西班牙语地区(智利、墨西哥)的以下输出:

int 值= 5600；

线程。CurrentThread.CurrentCulture =新系统。globalization . culture info(" es-CL ")；
控制台。WriteLine(日期时间。now . ToShortDateString())；
控制台。WriteLine(值。ToString(" c "))；

线程。CurrentThread.CurrentCulture =新系统。globalization . culture info(" es-MX ")；
控制台。WriteLine(日期时间。now . ToShortDateString())；
控制台。WriteLine(值。ToString(" c "))；

// Output
26-07-2011 //日期，西班牙语(智利)
$5.600，00 //货币，西班牙语(智利)

26/07/2011 //西班牙语(墨西哥)es-MX 中的日期
$5，600.00 //西班牙语(墨西哥)es-MX 中的货币
您可以注意到日期和货币格式的不同。每个地区的小数点分隔符不同，可能会使其他地区的人感到困惑。如果墨西哥用户在他们的文化“1，000”中键入一千，它将在智利文化网站中被解释为 1(一)。我们主要是因为这种原因而需要区域，而不是因为语言本身。

如何在 ASP.NET MVC 中支持不同的语言
在 ASP.NET MVC 中有两种方法可以融入不同的语言和文化:

通过在我们所有的站点视图中使用资源字符串。通过对每种语言和地区使用不同的视图集。
通过 1 和 2 之间的混合

哪个最好？这是一个方便的问题。有些人喜欢对所有语言使用单一视图，因为这样更容易维护。而其他人认为用类似“@Resources”的代码替换视图内容。某些东西”可能会使视图变得混乱，并且变得不可读。一些项目需求迫使开发人员实现每种语言的不同视图。但是有时你没有选择在什么地方布局必须不同，比如从右到左的语言。即使你设置了 dir="rtl "，这在实际应用中可能也不够，除非项目的 UI 布局真的很简单。也许，两者的结合是最好的。无论如何，对于这个例子，使用资源是有意义的，因为我们将使用西班牙语、英语和阿拉伯语的布局不会有任何问题。

ASP.NET 怎么能猜出用户的语言呢？在每个 HTTP 请求上，都有一个名为 Accept-Language 的头字段，它决定了用户的浏览器支持哪些语言:

接受-语言:en-us，en；q=0.5
这意味着我的浏览器偏好英语(美国)，但也可以接受其他类型的英语。“q”参数表示用户对该语言偏好的估计。您可以使用 web 浏览器控制语言列表。