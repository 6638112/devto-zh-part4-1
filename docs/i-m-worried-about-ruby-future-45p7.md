# 我担心 Ruby 的未来

> 原文：<https://dev.to/katafrakt/i-m-worried-about-ruby-future-45p7>

去年在 Grill.rb 大会上，Bozhidar Batsov(你可能知道他是 Rubocop 的创造者)做了一个题为“Ruby.next”的演讲，他在演讲中提出了他对 Ruby 现状的看法。前景相当严峻:Ruby 3 没有清晰的路线图，老问题依然存在，最近的变化微不足道。很明显，其他语言，比如 C#、JavaScript 甚至 Java，更倾向于结构化开发，而 Ruby 已经停滞了很多年。

但是陈述的观点相当乐观:我们是社区，我们应该领导一个变化，并推动核心团队将语言发展引向我们想要的方向。

差不多一年后，我不再那么乐观了。让我用 3 个例子告诉你为什么。

## 1。模式匹配

经常研究其他语言的 Ruby 人员提出模式匹配的话题已经有一段时间了。我是其中之一。随着时间的推移，我们开始将我们的单一解决方案打造为宝石。最引人注目的可能是 [Qo](https://github.com/baweaver/qo) ，但还有其他人。关键是——有一些现有的解决方案，其中一些已经被采用，我们可以在语言本身中构建真正的模式匹配支持。

但是突然一个全新的模式匹配的想法出现在 Ruby tracker 中。它被合并了。人们不喜欢它，因为它很复杂，很麻烦。对于许多不熟悉模式匹配的人来说，它破坏了整个想法，将这个概念与不可读的语法联系在一起。

为什么要这样做？为什么核心团队没有选择一个现有的解决方案，并在此基础上进行构建？我现在不知道答案，但它闻起来很像美国国立卫生研究院综合症 T2 T3。

我在这里写了更多关于新模式匹配的内容:

[![katafrakt](img/d49b0ab1ce719780cc06c3ce2b4af621.png)](/katafrakt) [## ruby–模式匹配–第二印象

### 圣保罗年 4 月 18 日 19 日 3 分钟阅读

#ruby #patternmatching](/katafrakt/ruby-pattern-matching-second-impressions-3hkk)

## 2。管道操作员

就在上周，人们注意到[管道运营商已经被合并](https://github.com/ruby/ruby/commit/f169043d)。听起来很令人兴奋，但仔细观察后发现...这不是管道操作员应该做的！这只是方法链接的语法糖。

澄清一下:我并不反对 Ruby 中已经存在的更好的语法。但是选择一种被广泛接受的语法来做别的事情对我来说似乎有点鲁莽。更重要的是，这意味着由于这种半措施的存在，我们可能永远得不到真正的管道操作符。好不好——这不是讨论的重点。关键是没有人喜欢这个附加功能，而且在合并之前人们就应该反对它。这显然毫无意义，而我们，我们新的闪亮的管道运营商，不是一个管道运营商。

## 3。冻结字符串文字

还记得很多年前社区开始理解默认情况下字符串应该是不可变的吗？它们通常被用作哈希表中的键。我们并不经常让它们变异。让它们成为不可变的，对内存管理、GC 等更好。如果你真的想要一个可变的字符串，这很容易做到。

我们同意暂时和向后兼容，直到 Ruby 3 才会引入。但与此同时，我们广泛采用了一个神奇的评论`# frozen_string_literals: true`作为替代。在默认的 Rubocop 配置中，检查注释存在[甚至是“开”的。](https://github.com/rubocop-hq/rubocop/blob/master/config/default.yml#L2683-L2687)

然而在一月份，核心团队突然退出了。在 Ruby 3 中，字符串[不是默认不可变的。我们现在永远只剩下这个半吊子的注释工作区了。**尽管这个想法被社区普遍接受**。](https://bugs.ruby-lang.org/issues/11473#note-53)

## 总结

这些事情让我担心 Ruby 的未来。即使 Matz 不这么认为，Ruby 目前似乎还不是一个社区项目。核心团队:

*   提出自己奇怪的解决方案，而不是重复使用社区创建的内容
*   添加没人喜欢/需要的东西(我猜除了它们之外)
*   悄悄取消先前讨论并达成一致的想法

对于已经落后于竞争对手的语言来说，这并不是理想的状态。我希望它会改变。我希望 Ruby 3 有一些隐藏的路线图，它将是一个真正的突破，而不仅仅是“哦 lol，我们应该在今年发布它，所以让我们创建一个标签！”。因为这将是一个真正的考验，如果语言能够回到健康发展的轨道。

或者也许它会永远保持现在的样子，只有微小的变化。没必要是件坏事。我没意见。但我希望它能清楚地传达给社区。

* * *

这篇文章最初发布在我的个人博客上