# 如何停止在技术债务上浪费工程时间

> 原文:[https://dev . to/stepsize/how-to-stop wasted-engineering-time-on-technical-debt-5h0a](https://dev.to/stepsize/how-to-stop-wasting-engineering-time-on-technical-debt-5h0a)

你知道这是怎么回事。如果不试图找到额外的 10%-20%的工程时间来偿还技术债务，把你需要的一切都挤进一个 sprint 已经够难的了。如果你曾经争论过要为此抽出时间，你会知道这感觉像是一场史诗般的远征。

但这是可以做到的，在本指南中，我们将找到如何做到这一点。

我已经看到太多的会议在这个话题上浪费了太多的时间。证据通常是轶事，情绪可能会高涨，以房间里声音最大的人的意见为准。

困境是这样的:如果*业务*压力接管，你的公司就有承担太多技术债务的风险——工程师变得没有动力，公司在技术上破产，而你的竞争对手赢了。如果*工程*压力占据上风，公司就有承担太少技术债务的风险，所以你的竞争对手会更快地推出产品和功能，占领市场，然后用这些现金来偿还他们的技术债务。你又输了。

传统智慧认为，工程团队应该对代码库——技术债务所在——及其对公司的影响建立直觉，从而建立对组织的信任。如果你的创始首席架构师告诉你现在重构核心代码，你(通常)会照做。

努力留住我们的工程师，创造一种知识、共享和信任的文化是有意义的。但是这需要数年的艰苦工作，我们仍然在重构工作的另一端出来，几乎不知道我们的时间是否花得值。我们是否节省了未来的工程时间？或者，我们是否可以再等一段时间来偿还技术债务，并推出更多的功能？我们永远无法确定，我们会把它归因于产品开发更像艺术而不是科学。

好吧，是时候我们给它注入更多的科学了。

# [](#what-site-reliability-and-tech-debt-budgets-have-in-common)站点可靠性和技术债务预算有什么共同点

管理得当、计划周密的技术债务是一个非常有价值的工具。就像金融债务一样，当我们意识到自己在做什么时，我们可以用它来增加额外的杠杆作用。但是，如果我们不知不觉地承担了太多——例如，没有真正理解交易的条款(即，对我们的代码库、客户、团队和业务的影响)——它可能会导致我们公司的灭亡。

最好的站点可靠性工程团队从管理技术债务的角度考虑他们的站点可靠性预算。网站可靠性——由谷歌推广的一个概念——负责保持软件产品正常运行，但有趣的是，像谷歌这样的公司并不追求 100%的正常运行时间。这是因为 99.99%的正常运行时间足以让谷歌产品在现实世界的用户面前显得极其可靠。那最后的 0.01%更难达到，根本不值得去争取。

因此，如果这让他们每年有 52 分钟的停机时间，谷歌会希望尽可能接近这个数字。任何少于 52 分钟的时间都会错过承担额外风险和更快地为客户提供更具雄心的功能的机会。

把你的技术债务预算想象成你的网站可靠性预算。如果你承担的是[谨慎的技术债务](https://martinfowler.com/bliki/TechnicalDebtQuadrant.html)——并且在影响你的客户和业务之前，你保持在你所能容忍的最大技术债务金额以下——你应该增加金额以承担更多风险并击败你的竞争对手。

[![](../Images/bfe6b111aead9ae159fc10c8d1786b86.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--BaE-Rno8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wjrme71h5txhqgbw7rpm.png)

当你的技术预算出现赤字时，偿还一些债务。如果是绿色的，你可以承担更多的风险，承担更多的债务。你的目标是不断地尽可能接近你的理想科技债务额。换句话说，如果你在图中红色部分的顶点，理想的科技债务预算是 A B。如果你在绿色部分的顶点，是 B C。记住 A C 是一个太大的预算。

因为技术债务现在可以衡量了——这是我的联合创始人在另一篇文章中提到的主题——这不再只是概念上的，而是完全实用的。

# 如何充分利用你的科技债务预算

你应该制定一个科技债务预算，让你回到或回到你能忍受的最大科技债务额。为了定义这个预算，确定你的代码库中哪些领域的技术债务值得立即偿还，也就是说，这些债务会阻碍你的公司达到当前的目标。你不想还太少的债，但也不想还太多。

AngelList 的 Remote 负责人 Andreas Klinger 在他的文章“[重构更大的遗留代码库](https://klinger.io/post/183107642120/refactoring-larger-legacy-codebases)”中说得很好:

> 不是所有东西都需要重构。如果它不是关键的，或者没有人需要在接下来的几个月里改进它的功能，或者它太复杂，考虑承认它是技术债务。'

[![](../Images/837888eff7ecc36647541395784b7e70.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--rzIY1VC0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/hqh0t0sxav7ani9z53vz.png)

简而言之，你的目标是确定你在这个冲刺阶段、一个月或一个季度要做的事情的交集，以及你的代码库中有技术债务的部分。还清那个路口的债务，但不要在那个路口之外。

这就是科学补充艺术的地方。你可以使用数据来确定你需要尽快偿还技术债务的领域:

*   确定代码库中所有权较弱的文件，因为代码所有权是代码库健康状况的主要指标。你可以在我们的文章[中找到更多关于健康代码库所需的文化特征](https://blog.stepsize.com/the-one-cultural-characteristic-you-need-for-a-healthy-codebase/)。
*   度量这些文件的内聚性和耦合性，将您的列表删减为一组所有权弱、内聚性低、耦合性高的文件。您可以在我们的文章[中找到关于这些指标的更多信息，使用行业领导者的研究来衡量技术债务](https://blog.stepsize.com/use-research-from-industry-leaders-to-measure-technical-debt/)。
*   计算每个文件的变动，以确定问题文件的子集。正如[微软研究显示的](https://docs.microsoft.com/en-us/azure/devops/learn/devops-at-microsoft/using-simple-code-churn-metric-find-software-bugs)，“活动文件仅占整个系统大小的 2%-8%，占系统文件变化的 20%-40%，并造成所有错误的 60%-90%”。
*   将这些文件与您的季度路线图进行比较。您的路线图中列出的任何功能是否需要工程师来处理您已经确定的问题文件的子集？如果是这样，将这些文件作为重构的目标，估计所需的工作，并将其分配给工程师——他们应该是文件的所有者。把这项工作纳入你的计划。

[查看我们的免费 VSCode 扩展，开始这一旅程](http://bit.ly/VSCode-marketplace-Stepsize)—它将帮助您持续跟踪和偿还最紧迫的技术债务。

# [](#get-into-a-longterm-relationship-with-tech-debt)与科技债务建立长期关系

我们已经在 Stepsize 以及许多世界级的软件公司中实施了这种数据驱动的方法。现在，不仅技术债务的话题更容易提出，而且我们也知道我们愿意承担多少债务，以及何时/如何偿还。我们很少怀疑我们是否在新功能和技术债务之间做出了正确的权衡。我们消除了大量的猜测以及随之而来的恐惧和焦虑。

需要说明的是，这不是一年使用一次就可以忘记的灵丹妙药。你需要了解你的科技债务。跟踪你每次冲刺的所有指标的进展，并持续改进整个过程，以达到[技术财富](https://firstround.com/review/forget-technical-debt-heres-how-to-build-technical-wealth/)。

我们已经写了一些方法来做到这一点，所以考虑[创造一种所有权的工程文化](https://blog.stepsize.com/the-one-cultural-characteristic-you-need-for-a-healthy-codebase/)和[奖励偿还技术债务的工程师](https://uselessdevblog.wordpress.com/2018/06/24/why-we-all-choose-to-not-pay-back-tech-debt/)来创造正确的激励。

* * *

**此外，我们还开发了一款 SaaS 产品来为您完成这一切，您可以在这里**试用一下