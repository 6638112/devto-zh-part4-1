# 评估 JavaScript 开源包

> 原文：<https://dev.to/jnielson94/evaluating-javascript-open-source-packages-1j0l>

*原载于[jnielson.com](https://jnielson.com/evaluating-javascript-open-source-packages)T3】*

几乎在每一个项目中，都会有这样一个时刻，您需要使用现有的包来扩充您的源代码，使其更简单、更健壮，或者减少维护量。当你去图书馆时，重要的是从不同的角度评估不同的选择。如果你简单地根据一个包是否能完成你的任务来评估它，你可能会错过一些重要的考虑因素，这些因素可能会在以后回来伤害你。例如，如果你选择了一个只有一行实际源代码并且没有测试的包，这个包真的能给你带来任何好处吗？我会说没有，但是每个项目都是不同的，如果能够从包中而不是从本地文件中导入这一行代码，可能会对您的项目有所帮助。

那么，你在评估一个套餐的时候会考虑什么呢？以我的经验来看，为你认为可能满足你需求的每个包准备一份清单是很有帮助的。我的列表通常如下所示:

*   许可许可
*   稳定性
*   稳定水平
*   流行
*   文件质量
*   库中的代码量
*   在我的项目中需要/保存的代码量
*   打开和关闭拉式请求趋势
*   贡献文档

在使用这个列表时，我会问自己一些问题来评估每一个类别，我会在下面列出这些问题。一般来说，你应该回答尽可能多的问题，以确保包裹不是一个明确的“不”，并写下你的答案！通过写下你对各种套餐提出的每个问题的答案，你为未来的你提供了笔记和文档，以便回答 6 个月后的问题:“你为什么选择[这个套餐]而不是[那个套餐]？”(这个问题经常出现)。

我想指出的是，这个列表绝对是我在我的项目中发现有用的个人意见。如果你有其他建议，欢迎和我分享！我很想知道其他人在评估包时做了什么，因为我可能遗漏了一些关键步骤。

## 许可放任

在评估我的问题的潜在解决方案时，我通常检查的第一点是它使用的许可，以及该许可的许可程度。当评估工作项目中使用的包时，遵循您的组织的指导方针是非常重要的，因为如果您不正确地使用许可证，它会导致一些重大问题。所以，我问自己关于许可证的问题:

*   该许可证是否在组织预先批准的最终名单上？
*   在个人项目中，我是否可以放心地使用许可证？
*   许可证是否要求任何类型的归属或让我的项目采用该许可证？
*   使用这个包值得许可证要求吗？

## 稳定

为了正确地评估一个软件包的使用，我觉得看一下这个软件包看起来有多稳定对于将来保持更新是至关重要的。我最近写了[关于升级你的项目依赖关系](https://jnielson.com/upgrading-your-javascript-project-dependencies)，如果你使用稳定的包，定期升级的工作量会大大减少。如何确定包装的稳定性？我通常会问这样的问题:

*   是否经常发布？(这可能是好的也可能是坏的，取决于包装)
*   他们是否利用 alpha/beta/canary 版本来测试变更？(还有人用那些吗？)
*   人们通常会停留在最新版本上吗？(这是一个很难快速找到数据的问题，但非常值得)
*   做出突破性改变(使用 semver 时的主要版本)有周期吗？
*   是否有大量未决问题？(原始问题计数并不总是分享有用的信息，但它有助于检查)

有各种不同的指标和东西可以检查，以尝试和确定一个包有多稳定，但我发现考虑这一点很重要，因为如果一个包处于稳定状态，不需要任何重大更改或修复，其他一些方面就变得不那么重要了。

## 维护级别

如果你有一个不是特别稳定的项目，确定当前维护者的参与程度就变得至关重要。如果只有一个人处理这个包，那是他们的全职工作吗？或者他们有其他更重要的事情吗？如果有多个维护者，你可能会考虑是否有一个“主要维护者”,如果他们放弃这个包，就会停止前进。特别是对于不太稳定的包，停止变更和改进并不是你想要的，因为这可能会导致不分叉包就无法修复关键的 bug。在确定维护水平时，我倾向于问自己这样的问题:

*   包源代码有多少贡献者？
*   看起来像是只有一个人有权发布更新，还是可以由多人发布？
*   有人全职从事这项工作吗？(并不是每个包都需要全职人员来处理，但我喜欢核心包)
*   问题和拉取请求的处理速度有多快？维护人员看起来像是在断断续续地工作吗？
*   有没有办法为维护者提供资金/支持？你能做到吗？

## 人气

与维护级别相关的一个重要考虑因素是软件包的受欢迎程度。如果一个包足够受欢迎，那么通过专职维护人员或者其他方式拥有更高的维护水平就变得更加重要。但是，重要的包是有用的，因为随着包越来越受欢迎，维护者倾向于开发与发布和文档相关的更好的习惯。纯粹因为某个包受欢迎而选择它并不总是项目的最佳选择，但是它可以在帮助您了解如何使用该包的可用资源方面产生影响。如果发生了一些事情，阻止了当前的维护者跟上它，那么它还会影响包维护的可能性。受欢迎程度的一个重要考虑因素通常是包的下载量，但是我并不认为这个指标特别有用，因为它不能提供任何关于有多少项目实际上在使用这个包的信息。我更喜欢新的 Github“使用者”徽章，但它仍然有一些严重的限制。现在，我将只指出我用来尝试和估计一个包有多受欢迎的东西:

*   比较下载量是什么样的？(使用相对数量很重要，因为原始下载数量没有意义)
*   github 的“使用者”徽章说明了什么？这与其他选择相比如何？
*   该项目在谷歌结果计数中如何比较？
*   stackoverflow 上的问题是否被回答和接受？看起来像是社区努力回答问题吗？

为了比较下载次数，我通常使用 [npmtrends](https://www.npmtrends.com/styled-components-vs-emotion-vs-glamorous) ，它不能提供一个完整的图片，但是可以从这个角度给你一个软件包看起来像什么的好主意。StackOverflow 允许您查看标签，因此您可以检查[样式组件](https://stackoverflow.com/questions/tagged/styled-components)标签，以了解这些问题是否得到了回答以及谁在回答它们。

## 文档质量

开源软件包的一个重要但经常被忽视的方面是文档有多好。对于简单的包，文档作为一个简单的自述文件可能就足够了，它详细说明了导出以及如何使用它们。对于更复杂的包，你经常会发现他们有一个专门的文档网站。在这两种情况下，重要的是要考虑与您引入的代码相关的文档质量。我通常使用以下问题来评估文档的质量:

*   自述文件上次更新是什么时候？
*   自述文件是否包括软件包的所有导出内容，或者是否有未记录的功能？
*   发行说明是否有一个变更日志或地方？
*   变更日志/发行说明比提交列表更清晰吗？

如果他们使用文档网站，我会检查一下(最好是除了现场站点之外的源代码)，使用类似下面的问题(除了查看代码内文档):

*   当事情发生变化时，网站会更新吗？
*   网站的组织是否能让我很容易找到我需要的东西？
*   网站是否有信息缺失？
*   网站上有没有不清楚不解释的术语？

评估文档质量是非常个人化的，因为对我来说可能非常有意义的东西可能会完全迷惑下一个开发人员。这是一个我认为非常有用的步骤，因为通常人们在第一次看文档的时候就会产生对文档的看法。查看可用的文档对于确保该库实际上解决了您试图解决的问题是非常关键的，但是它也有助于评估弄清楚如何使用该库和处理不可避免地会出现的奇怪事情有多容易。

## 代码库中的代码量

有时候引入一个包是有帮助的，但是其他时候如果你只是打算在几个地方使用它，你最好为你的项目写更多的具体代码。在很多情况下，包有额外的抽象，使它们更容易重用，但是增加了比你在使用中可能需要的更多的代码。也可能是因为有一个内置的语言特性可以完成这个包的大部分功能，有时甚至是全部功能。例如，过去使用`left-pad`包是很常见的(并且它仍然有 400 万的周下载量)，但是 JavaScript 有一个内置的`padStart()`方法，它做同样的事情并且不需要你拉进一个包。因此，在某些情况下，你要确保问自己这样的问题:

*   使用内置的语言特性可以做到这一点吗？
*   该软件包是否提供了我不需要的额外功能？
*   如果我自己编写功能，项目中的维护工作会显著增加吗？(通常这是肯定的，但有些包是微不足道的)
*   包中有我不想复制的测试和其他代码质量工具吗？

## 在我的项目中需要/保存的代码量

在使用包的时候，有一点很少被提及，那就是消费包需要多少代码。在某些情况下，仅仅为了减少使用包所需的代码量，构建包的特定于项目的版本可能是值得的。Dan Abramov 写了一篇名为[“为改变而优化”](https://overreacted.io/optimized-for-change/)的文章，其中提到了“二阶”API 设计的想法——使用这种 API 的代码将会如何发展。为了评估我所关注的产品包的想法，我倾向于提出如下问题:

*   例子有多长？
*   例子之间有多大区别？有很多样板文件吗？
*   软件包节省的代码量是否超过了它要求我编写的代码量？

## 打开和关闭拉式请求趋势

与维护级别相关的另一件事是包的打开和关闭的拉请求。如果一个包有一堆打开的拉取请求，它们长时间不动，那么可能有一个潜在的维护级别问题，我不想使用这个包。如果没有开放的拉取请求，这通常是一个好的迹象，但是如果在最近的时间跨度内没有任何拉取请求，我想确保我已经在早期评估了项目的稳定性。如果有很多打开的拉请求，但也有很多最近关闭的拉请求，它可能只是一个非常活跃的包，但在大多数情况下，我遇到的问题通常与缺乏维护人员有关。所以，我会问这样的问题:

*   打开的拉取请求打开了多长时间？
*   最近是否有任何关闭的拉取请求？
*   看起来像是批量关闭拉取请求吗？多长时间发生一次？
*   拉取请求通常是关闭(拒绝)还是合并？
*   在请求被批准或拒绝之前，是否有很多关于请求的讨论？

## 投稿文档

我检查的最后一件事是项目是否有贡献过程的文档。通常这没什么大不了的，因为大多数人会将它们记录下来，作为对未来的帮助，但是有时一个项目只有一个维护者，他不关心记录用于以可靠的方式对包进行更改的过程。这里的问题通常是:

*   是否存在贡献文档？
*   是否有拉式请求或问题模板？

## 结论

一旦你把一个包“通过测试”并评估它，然后呢？你如何决定使用什么包？通常可以归结为个人/项目偏好，即什么包最有意义。几乎在所有情况下，这都是一种权衡，因为一个包可能更小但不够健壮，或者另一个包可能功能更全但增加了一些您不想增加的额外包大小。在任何情况下，您最终选择什么包应该是您能够支持的决定，所以理想情况下，您应该写下您对每个包提出的问题的答案，以便为将来的您提供一些文档！我发现能够回答这个问题是很有价值的，“你为什么选择这个包而不是其他选项？”6 个月后做笔记，特别是如果在这 6 个月里事情发生了变化，你有上次的笔记，你可以轻松地重新评估！

* * *

## 概述/准备

JavaScript 开源包有什么关系？(未订购)

TL；灾难恢复点:

*   检查稳定性和受欢迎程度-是否经常发布？有人用吗？
*   维护水平如何？有人全职从事这项工作吗？
*   代码/文档/贡献质量——事情有文档记录并在工作吗？
*   执照检查至关重要！确保它是您可以使用的许可证
*   微不足道的话考虑自己写？

*   稳定性(他们多久发布一次？他们发布 alpha/beta 版本吗？人们用那些吗？)

*   维护级别(人们是全职工作吗？它有多个贡献者吗？等等)

*   受欢迎程度(有多少其他项目依赖于它？下载量是什么样的？)

*   代码质量(他们有测试吗？CI 构建？)

*   文档质量(是否是最新的？他们有以前的版本吗？它是一个独立的站点还是只是一个自述文件？)

*   贡献文档(是否存在？github 中有问题/公关模板吗？)

*   打开和关闭的拉动请求(他们坐了很久吗？有没有关于他们的交流？)

*   它涉及哪些许可证？(清楚它为什么会有那些吗？你的组织允许吗？)

*   实际上有多少代码？(bundlephobia &查看源代码——内联可能更好)

*横幅图片由 undraw.co 提供*