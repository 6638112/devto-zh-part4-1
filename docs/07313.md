# 学习让我迷失了方向

> 原文：<https://dev.to/codegram/learning-rust-my-way-3acg>

最初发布于 [Codegram 的博客](https://www.codegram.com/blog/learning-rust-my-way)

几年前，当我用 Vue 做第一步的时候，我决定用这个框架创建一个视频游戏。它被称为 Live，是一款基于文本的生存游戏，UI 非常简洁(你可以在这里玩)。我从创建它中获得了很多乐趣，人们从玩它中获得了乐趣，它帮助我了解了很多关于 Vue 的知识。

如今，围绕办公室的炒作大多围绕着铁锈。我已经读了一些关于 Rust 编程语言的书，也做了一些关于 T2 的事情，但是我们都知道学习的最好方法是实践。 [Codegram 的静修](https://thoughts.codegram.com/our-company-retreat-things-we-learned-during-codegrams-2019-retreat/)给我提供了一个用 Rust 构建东西的绝佳机会，尽管做一个大项目感觉有点力不从心。

但是，嘿，历史会重演，以前奏效的应该会再次奏效，所以为什么不用 Rust 重新构建 Live 呢？有了已经定义和明确的业务逻辑，我就可以专注于代码了。

当然，最大的挑战是思考和编程*“生锈的方法”*。作为主要语言的 JavaScript，使用其他语言如 Ruby 或 PHP 并没有太大的不同。即使您使用 TypeScript 添加了严格的类型，一般的处理方式也不会有太大的变化。

使用 Rust 时，您会突然意识到内存是如何工作的，不同类型的数据是如何存储在堆栈或堆中的，以及有 12 种不同类型的数字🤯。你学会欣赏怪异的、有时令人沮丧的 JavaScript 怪癖，以换取简单性。除此之外，你还需要学习一些完全奇怪的概念，比如所有权和 T2 寿命。甚至当你遇到一个熟悉的东西，比如一个数组，结果是你不能把新元素放进去！而且不能有不同类型在里面！你很容易陷入这样的境地:你**不知道如何做最基本的事情。“我的库存里怎么会有不同类型的物品！”**

幸运的是，并不是一切都是完全不同和令人沮丧的。你还有函数，模块，`const`和`let`。即使每件事的工作方式都有点不同，你也可以很容易地理解。而且`cargo`感觉像一个超能力的`npm`。

我遵循了一种务实的方法，并试图在过于担心遵循 Rust 的最佳实践之前有一个功能性的游戏。这意味着很多可变性，克隆东西，当一些东西不起作用时，只需尝试添加一个`*`或一个`&`，看看它是否能解决它。**让它发挥作用，以后再理解它。那是我的座右铭！这可能不是学习一门新语言最学术的方法，但对我来说很有效。我给你举个例子。**

游戏的大部分都围绕着物品。寻找物品，消费它们，用它们来制作其他物品(尽管这还没有实现，但我想保留数据结构，以便以后能够添加特性)。一个标准项目，像`wood`，应该有一个`id`、`name`和`description`。一个可消耗的物品，像一个`berries`，也应该有其他属性，像`water`和`food`点，一旦被消耗，它会增加你的属性。这意味着我真的有不同类型的项目，但由于 Rust 没有继承，我不能有一个`BaseItem`来扩展。为了避免几个小时都这样，我的第一个方法是将所有可能的属性添加到所有项目中。所以最后我用`wood`拥有`water: 0`和`food: 0`属性，毫无意义。我还必须添加一个`consumable: true`属性来检查并通知用户该商品是否可以消费。它起作用了，尽管并不理想。但至少我可以继续这个项目，这对士气很重要！

所以一旦我有了游戏的所有特征，我回到这个问题，我知道它应该以不同的方式完成。在这一点上，我更有信心了，因为*我已经用 Rust* 开发了一个游戏。如果我第一次遇到这个问题时就试图用正确的方法解决它，那将会是一个痛苦和令人沮丧的过程，而且很可能会失败，因为*我根本不了解 Rust* 。在大卫和 Txus 的帮助下，我们探索了一些方法。拥有不同类型的项目没有用，因为大多数时候我需要使用单一的`Item`类型。此外，为每一个都重复相同的属性也不合适。我们试图创建一个`Item` [trait](https://doc.rust-lang.org/book/ch10-02-traits.html) 并让所有的项目类型实现它，但是由于 trait 不知道实现它的 [struct](https://doc.rust-lang.org/book/ch05-01-defining-structs.html) 的属性，如果不为 trait 的每个实现复制大量代码，它就无法工作。那感觉也不对。

如果你对铁锈知之甚少或一无所知，不要担心我说的没有意义。关键是我们一直在尝试那些不起作用的东西。当然，这可能会令人沮丧，但事实是铁锈阻止了我走错路。铁锈如此严格的酷之处在于，就像已经存在于大理石块中的米开朗基罗的雕像一样，似乎只有一个简单的解决方案等待人们去发现。我们确实找到了。最后，简单到只有一个具有共同的`id`、`name`和`description`属性的`Item`结构，以及一个可以具有不同属性集的`properties`、[枚举](https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html)(消耗品的`values`、工具的`usesUntilBreakdown`等)。它工作了，感觉很好，很干净，甚至帮助改进了应用程序代码的其余部分。刚好合适。我仍然很欣赏 JavaScript(或任何其他不太严格的语言)提供的灵活性和开发速度，但是在你运行它之前绝对确定你的程序将会工作，这真的很好(我不认为这是你仅仅通过向 JavaScript 添加类型就能得到的东西🙄).

因此，历史确实重演了，我设法创造了一个功能游戏，在这个过程中学习了很多关于 Rust 的知识。有很多东西我没有探索，比如使用线程，但这是一次很棒的 Rust 初次体验，我觉得作为一名开发人员，我已经进步了很多，走出了我的舒适区，尝试了一种与我以前尝试过的其他语言如此不同的语言。

下一步:完成缺失的功能(如制作物品和升级)，玩线程以更好地控制时间，并探索 WASM，以便能够在浏览器上玩游戏！

你可以在这里找到项目[，克隆它，运行`cargo run`就可以玩了。](https://github.com/codegram/live-rust)

*照片由[德米特里·拜尔](https://unsplash.com/@dmitrybayer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在[Unsplash](https://unsplash.com/search/photos/rust?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)T5 拍摄*